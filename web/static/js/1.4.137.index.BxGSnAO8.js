(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Z0(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const Lt={},Il=[],Fr=()=>{},wD=()=>!1,dh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Q0=t=>t.startsWith("onUpdate:"),pn=Object.assign,ey=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xD=Object.prototype.hasOwnProperty,ht=(t,e)=>xD.call(t,e),qe=Array.isArray,Nl=t=>hh(t)==="[object Map]",YS=t=>hh(t)==="[object Set]",et=t=>typeof t=="function",Zt=t=>typeof t=="string",ua=t=>typeof t=="symbol",Pt=t=>t!==null&&typeof t=="object",XS=t=>(Pt(t)||et(t))&&et(t.then)&&et(t.catch),ZS=Object.prototype.toString,hh=t=>ZS.call(t),CD=t=>hh(t).slice(8,-1),QS=t=>hh(t)==="[object Object]",ty=t=>Zt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ja=Z0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ph=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},SD=/-(\w)/g,Mi=ph(t=>t.replace(SD,(e,n)=>n?n.toUpperCase():"")),kD=/\B([A-Z])/g,el=ph(t=>t.replace(kD,"-$1").toLowerCase()),gh=ph(t=>t.charAt(0).toUpperCase()+t.slice(1)),bg=ph(t=>t?`on${gh(t)}`:""),Xs=(t,e)=>!Object.is(t,e),Df=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Zf=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Cm=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ED=t=>{const e=Zt(t)?Number(t):NaN;return isNaN(e)?t:e};let sw;const ek=()=>sw||(sw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ny(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Zt(r)?MD(r):ny(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Zt(t)||Pt(t))return t}const AD=/;(?![^(]*\))/g,TD=/:([^]+)/,_D=/\/\*[^]*?\*\//g;function MD(t){const e={};return t.replace(_D,"").split(AD).forEach(n=>{if(n){const r=n.split(TD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Oi(t){let e="";if(Zt(t))e=t;else if(qe(t))for(let n=0;n<t.length;n++){const r=Oi(t[n]);r&&(e+=r+" ")}else if(Pt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const OD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",RD=Z0(OD);function tk(t){return!!t||t===""}const Yc=t=>Zt(t)?t:t==null?"":qe(t)||Pt(t)&&(t.toString===ZS||!et(t.toString))?JSON.stringify(t,nk,2):String(t),nk=(t,e)=>e&&e.__v_isRef?nk(t,e.value):Nl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[wg(r,s)+" =>"]=i,n),{})}:YS(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>wg(n))}:ua(e)?wg(e):Pt(e)&&!qe(e)&&!QS(e)?String(e):e,wg=(t,e="")=>{var n;return ua(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xr;class rk{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Xr,!e&&Xr&&(this.index=(Xr.scopes||(Xr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Xr;try{return Xr=this,e()}finally{Xr=n}}}on(){Xr=this}off(){Xr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function LD(t){return new rk(t)}function ID(t,e=Xr){e&&e.active&&e.effects.push(t)}function ND(){return Xr}let Do;class ry{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ID(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,tl();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(DD(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),nl()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ks,n=Do;try{return Ks=!0,Do=this,this._runnings++,ow(this),this.fn()}finally{lw(this),this._runnings--,Do=n,Ks=e}}stop(){var e;this.active&&(ow(this),lw(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function DD(t){return t.value}function ow(t){t._trackId++,t._depsLength=0}function lw(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)ik(t.deps[e],t);t.deps.length=t._depsLength}}function ik(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Ks=!0,Sm=0;const sk=[];function tl(){sk.push(Ks),Ks=!1}function nl(){const t=sk.pop();Ks=t===void 0?!0:t}function iy(){Sm++}function sy(){for(Sm--;!Sm&&km.length;)km.shift()()}function ok(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&ik(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const km=[];function lk(t,e,n){iy();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&km.push(r.scheduler)))}sy()}const ak=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Em=new WeakMap,Po=Symbol(""),Am=Symbol("");function sr(t,e,n){if(Ks&&Do){let r=Em.get(t);r||Em.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=ak(()=>r.delete(n))),ok(Do,i)}}function ts(t,e,n,r,i,s){const o=Em.get(t);if(!o)return;let l=[];if(e==="clear")l=[...o.values()];else if(n==="length"&&qe(t)){const c=Number(r);o.forEach((u,d)=>{(d==="length"||!ua(d)&&d>=c)&&l.push(u)})}else switch(n!==void 0&&l.push(o.get(n)),e){case"add":qe(t)?ty(n)&&l.push(o.get("length")):(l.push(o.get(Po)),Nl(t)&&l.push(o.get(Am)));break;case"delete":qe(t)||(l.push(o.get(Po)),Nl(t)&&l.push(o.get(Am)));break;case"set":Nl(t)&&l.push(o.get(Po));break}iy();for(const c of l)c&&lk(c,4);sy()}const PD=Z0("__proto__,__v_isRef,__isVue"),ck=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ua)),aw=BD();function BD(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=mt(this);for(let s=0,o=this.length;s<o;s++)sr(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(mt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){tl(),iy();const r=mt(this)[e].apply(this,n);return sy(),nl(),r}}),t}function $D(t){const e=mt(this);return sr(e,"has",t),e.hasOwnProperty(t)}class uk{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,r){const i=this._isReadonly,s=this._shallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?XD:pk:s?hk:dk).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=qe(e);if(!i){if(o&&ht(aw,n))return Reflect.get(aw,n,r);if(n==="hasOwnProperty")return $D}const l=Reflect.get(e,n,r);return(ua(n)?ck.has(n):PD(n))||(i||sr(e,"get",n),s)?l:or(l)?o&&ty(n)?l:l.value:Pt(l)?i?mk(l):Xc(l):l}}class fk extends uk{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._shallow){const c=jl(s);if(!Qf(r)&&!jl(r)&&(s=mt(s),r=mt(r)),!qe(e)&&or(s)&&!or(r))return c?!1:(s.value=r,!0)}const o=qe(e)&&ty(n)?Number(n)<e.length:ht(e,n),l=Reflect.set(e,n,r,i);return e===mt(i)&&(o?Xs(r,s)&&ts(e,"set",n,r):ts(e,"add",n,r)),l}deleteProperty(e,n){const r=ht(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&ts(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!ua(n)||!ck.has(n))&&sr(e,"has",n),r}ownKeys(e){return sr(e,"iterate",qe(e)?"length":Po),Reflect.ownKeys(e)}}class HD extends uk{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const FD=new fk,VD=new HD,zD=new fk(!0),oy=t=>t,mh=t=>Reflect.getPrototypeOf(t);function ef(t,e,n=!1,r=!1){t=t.__v_raw;const i=mt(t),s=mt(e);n||(Xs(e,s)&&sr(i,"get",e),sr(i,"get",s));const{has:o}=mh(i),l=r?oy:n?cy:yc;if(o.call(i,e))return l(t.get(e));if(o.call(i,s))return l(t.get(s));t!==i&&t.get(e)}function tf(t,e=!1){const n=this.__v_raw,r=mt(n),i=mt(t);return e||(Xs(t,i)&&sr(r,"has",t),sr(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function nf(t,e=!1){return t=t.__v_raw,!e&&sr(mt(t),"iterate",Po),Reflect.get(t,"size",t)}function cw(t){t=mt(t);const e=mt(this);return mh(e).has.call(e,t)||(e.add(t),ts(e,"add",t,t)),this}function uw(t,e){e=mt(e);const n=mt(this),{has:r,get:i}=mh(n);let s=r.call(n,t);s||(t=mt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Xs(e,o)&&ts(n,"set",t,e):ts(n,"add",t,e),this}function fw(t){const e=mt(this),{has:n,get:r}=mh(e);let i=n.call(e,t);i||(t=mt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&ts(e,"delete",t,void 0),s}function dw(){const t=mt(this),e=t.size!==0,n=t.clear();return e&&ts(t,"clear",void 0,void 0),n}function rf(t,e){return function(r,i){const s=this,o=s.__v_raw,l=mt(o),c=e?oy:t?cy:yc;return!t&&sr(l,"iterate",Po),o.forEach((u,d)=>r.call(i,c(u),c(d),s))}}function sf(t,e,n){return function(...r){const i=this.__v_raw,s=mt(i),o=Nl(s),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=i[t](...r),d=n?oy:e?cy:yc;return!e&&sr(s,"iterate",c?Am:Po),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:l?[d(h[0]),d(h[1])]:d(h),done:p}},[Symbol.iterator](){return this}}}}function xs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function UD(){const t={get(s){return ef(this,s)},get size(){return nf(this)},has:tf,add:cw,set:uw,delete:fw,clear:dw,forEach:rf(!1,!1)},e={get(s){return ef(this,s,!1,!0)},get size(){return nf(this)},has:tf,add:cw,set:uw,delete:fw,clear:dw,forEach:rf(!1,!0)},n={get(s){return ef(this,s,!0)},get size(){return nf(this,!0)},has(s){return tf.call(this,s,!0)},add:xs("add"),set:xs("set"),delete:xs("delete"),clear:xs("clear"),forEach:rf(!0,!1)},r={get(s){return ef(this,s,!0,!0)},get size(){return nf(this,!0)},has(s){return tf.call(this,s,!0)},add:xs("add"),set:xs("set"),delete:xs("delete"),clear:xs("clear"),forEach:rf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=sf(s,!1,!1),n[s]=sf(s,!0,!1),e[s]=sf(s,!1,!0),r[s]=sf(s,!0,!0)}),[t,n,e,r]}const[WD,jD,KD,qD]=UD();function ly(t,e){const n=e?t?qD:KD:t?jD:WD;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ht(n,i)&&i in r?n:r,i,s)}const GD={get:ly(!1,!1)},JD={get:ly(!1,!0)},YD={get:ly(!0,!1)},dk=new WeakMap,hk=new WeakMap,pk=new WeakMap,XD=new WeakMap;function ZD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function QD(t){return t.__v_skip||!Object.isExtensible(t)?0:ZD(CD(t))}function Xc(t){return jl(t)?t:ay(t,!1,FD,GD,dk)}function gk(t){return ay(t,!1,zD,JD,hk)}function mk(t){return ay(t,!0,VD,YD,pk)}function ay(t,e,n,r,i){if(!Pt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=QD(t);if(o===0)return t;const l=new Proxy(t,o===2?r:n);return i.set(t,l),l}function Dl(t){return jl(t)?Dl(t.__v_raw):!!(t&&t.__v_isReactive)}function jl(t){return!!(t&&t.__v_isReadonly)}function Qf(t){return!!(t&&t.__v_isShallow)}function yk(t){return Dl(t)||jl(t)}function mt(t){const e=t&&t.__v_raw;return e?mt(e):t}function yh(t){return Object.isExtensible(t)&&Zf(t,"__v_skip",!0),t}const yc=t=>Pt(t)?Xc(t):t,cy=t=>Pt(t)?mk(t):t;class vk{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ry(()=>e(this._value),()=>Ya(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=mt(this);return(!e._cacheable||e.effect.dirty)&&Xs(e._value,e._value=e.effect.run())&&Ya(e,4),uy(e),e.effect._dirtyLevel>=2&&Ya(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function eP(t,e,n=!1){let r,i;const s=et(t);return s?(r=t,i=Fr):(r=t.get,i=t.set),new vk(r,i,s||!i,n)}function uy(t){var e;Ks&&Do&&(t=mt(t),ok(Do,(e=t.dep)!=null?e:t.dep=ak(()=>t.dep=void 0,t instanceof vk?t:void 0)))}function Ya(t,e=4,n){t=mt(t);const r=t.dep;r&&lk(r,e)}function or(t){return!!(t&&t.__v_isRef===!0)}function Ie(t){return wk(t,!1)}function bk(t){return wk(t,!0)}function wk(t,e){return or(t)?t:new tP(t,e)}class tP{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:mt(e),this._value=n?e:yc(e)}get value(){return uy(this),this._value}set value(e){const n=this.__v_isShallow||Qf(e)||jl(e);e=n?e:mt(e),Xs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:yc(e),Ya(this,4))}}function at(t){return or(t)?t.value:t}const nP={get:(t,e,n)=>at(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return or(i)&&!or(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function xk(t){return Dl(t)?t:new Proxy(t,nP)}class rP{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>uy(this),()=>Ya(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function iP(t){return new rP(t)}/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qs(t,e,n,r){try{return r?t(...r):t()}catch(i){vh(i,e,n)}}function Vr(t,e,n,r){if(et(t)){const s=qs(t,e,n,r);return s&&XS(s)&&s.catch(o=>{vh(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Vr(t[s],e,n,r));return i}function vh(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const u=s.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,o,l)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){qs(c,null,10,[t,o,l]);return}}sP(t,n,i,r)}function sP(t,e,n,r=!0){console.error(t)}let vc=!1,Tm=!1;const Nn=[];let Ei=0;const Pl=[];let _s=null,So=0;const Ck=Promise.resolve();let fy=null;function bh(t){const e=fy||Ck;return t?e.then(this?t.bind(this):t):e}function oP(t){let e=Ei+1,n=Nn.length;for(;e<n;){const r=e+n>>>1,i=Nn[r],s=bc(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function dy(t){(!Nn.length||!Nn.includes(t,vc&&t.allowRecurse?Ei+1:Ei))&&(t.id==null?Nn.push(t):Nn.splice(oP(t.id),0,t),Sk())}function Sk(){!vc&&!Tm&&(Tm=!0,fy=Ck.then(Ek))}function lP(t){const e=Nn.indexOf(t);e>Ei&&Nn.splice(e,1)}function aP(t){qe(t)?Pl.push(...t):(!_s||!_s.includes(t,t.allowRecurse?So+1:So))&&Pl.push(t),Sk()}function hw(t,e,n=vc?Ei+1:0){for(;n<Nn.length;n++){const r=Nn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Nn.splice(n,1),n--,r()}}}function kk(t){if(Pl.length){const e=[...new Set(Pl)].sort((n,r)=>bc(n)-bc(r));if(Pl.length=0,_s){_s.push(...e);return}for(_s=e,So=0;So<_s.length;So++)_s[So]();_s=null,So=0}}const bc=t=>t.id==null?1/0:t.id,cP=(t,e)=>{const n=bc(t)-bc(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Ek(t){Tm=!1,vc=!0,Nn.sort(cP);try{for(Ei=0;Ei<Nn.length;Ei++){const e=Nn[Ei];e&&e.active!==!1&&qs(e,null,14)}}finally{Ei=0,Nn.length=0,kk(),vc=!1,fy=null,(Nn.length||Pl.length)&&Ek()}}function uP(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Lt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:p}=r[d]||Lt;p&&(i=n.map(m=>Zt(m)?m.trim():m)),h&&(i=n.map(Cm))}let l,c=r[l=bg(e)]||r[l=bg(Mi(e))];!c&&s&&(c=r[l=bg(el(e))]),c&&Vr(c,t,6,i);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Vr(u,t,6,i)}}function Ak(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},l=!1;if(!et(t)){const c=u=>{const d=Ak(u,e,!0);d&&(l=!0,pn(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!l?(Pt(t)&&r.set(t,null),null):(qe(s)?s.forEach(c=>o[c]=null):pn(o,s),Pt(t)&&r.set(t,o),o)}function wh(t,e){return!t||!dh(e)?!1:(e=e.slice(2).replace(/Once$/,""),ht(t,e[0].toLowerCase()+e.slice(1))||ht(t,el(e))||ht(t,e))}let dn=null,Tk=null;function ed(t){const e=dn;return dn=t,Tk=t&&t.type.__scopeId||null,e}function ge(t,e=dn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Tw(-1);const s=ed(e);let o;try{o=t(...i)}finally{ed(s),r._d&&Tw(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function xg(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:l,attrs:c,emit:u,render:d,renderCache:h,data:p,setupState:m,ctx:y,inheritAttrs:b}=t;let x,C;const M=ed(t);try{if(n.shapeFlag&4){const A=i||r,F=A;x=Si(d.call(F,A,h,s,m,p,y)),C=c}else{const A=e;x=Si(A.length>1?A(s,{attrs:c,slots:l,emit:u}):A(s,null)),C=e.props?c:fP(c)}}catch(A){tc.length=0,vh(A,t,1),x=J(zr)}let L=x;if(C&&b!==!1){const A=Object.keys(C),{shapeFlag:F}=L;A.length&&F&7&&(o&&A.some(Q0)&&(C=dP(C,o)),L=ss(L,C))}return n.dirs&&(L=ss(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),x=L,ed(M),x}const fP=t=>{let e;for(const n in t)(n==="class"||n==="style"||dh(n))&&((e||(e={}))[n]=t[n]);return e},dP=(t,e)=>{const n={};for(const r in t)(!Q0(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function hP(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:l,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?pw(r,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const p=d[h];if(o[p]!==r[p]&&!wh(u,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?pw(r,o,u):!0:!!o;return!1}function pw(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!wh(n,s))return!0}return!1}function pP({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const _k="components";function vi(t,e){return Ok(_k,t,!0,e)||t}const Mk=Symbol.for("v-ndc");function gP(t){return Zt(t)?Ok(_k,t,!1)||t:t||Mk}function Ok(t,e,n=!0,r=!1){const i=dn||Tn;if(i){const s=i.type;{const l=d3(s,!1);if(l&&(l===e||l===Mi(e)||l===gh(Mi(e))))return s}const o=gw(i[t]||s[t],e)||gw(i.appContext[t],e);return!o&&r?s:o}}function gw(t,e){return t&&(t[e]||t[Mi(e)]||t[gh(Mi(e))])}const mP=t=>t.__isSuspense;function yP(t,e){e&&e.pendingBranch?qe(t)?e.effects.push(...t):e.effects.push(t):aP(t)}const vP=Symbol.for("v-scx"),bP=()=>Wt(vP);function wr(t,e){return hy(t,null,e)}const of={};function ri(t,e,n){return hy(t,e,n)}function hy(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:l}=Lt){if(e&&s){const R=e;e=(...U)=>{R(...U),F()}}const c=Tn,u=R=>r===!0?R:Mo(R,r===!1?1:void 0);let d,h=!1,p=!1;if(or(t)?(d=()=>t.value,h=Qf(t)):Dl(t)?(d=()=>u(t),h=!0):qe(t)?(p=!0,h=t.some(R=>Dl(R)||Qf(R)),d=()=>t.map(R=>{if(or(R))return R.value;if(Dl(R))return u(R);if(et(R))return qs(R,c,2)})):et(t)?e?d=()=>qs(t,c,2):d=()=>(m&&m(),Vr(t,c,3,[y])):d=Fr,e&&r){const R=d;d=()=>Mo(R())}let m,y=R=>{m=L.onStop=()=>{qs(R,c,4),m=L.onStop=void 0}},b;if(Eh)if(y=Fr,e?n&&Vr(e,c,3,[d(),p?[]:void 0,y]):d(),i==="sync"){const R=bP();b=R.__watcherHandles||(R.__watcherHandles=[])}else return Fr;let x=p?new Array(t.length).fill(of):of;const C=()=>{if(!(!L.active||!L.dirty))if(e){const R=L.run();(r||h||(p?R.some((U,W)=>Xs(U,x[W])):Xs(R,x)))&&(m&&m(),Vr(e,c,3,[R,x===of?void 0:p&&x[0]===of?[]:x,y]),x=R)}else L.run()};C.allowRecurse=!!e;let M;i==="sync"?M=C:i==="post"?M=()=>Qn(C,c&&c.suspense):(C.pre=!0,c&&(C.id=c.uid),M=()=>dy(C));const L=new ry(d,Fr,M),A=ND(),F=()=>{L.stop(),A&&ey(A.effects,L)};return e?n?C():x=L.run():i==="post"?Qn(L.run.bind(L),c&&c.suspense):L.run(),b&&b.push(F),F}function wP(t,e,n){const r=this.proxy,i=Zt(t)?t.includes(".")?Rk(r,t):()=>r[t]:t.bind(r,r);let s;et(e)?s=e:(s=e.handler,n=e);const o=Zc(this),l=hy(i,s.bind(r),n);return o(),l}function Rk(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Mo(t,e,n=0,r){if(!Pt(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),or(t))Mo(t.value,e,n,r);else if(qe(t))for(let i=0;i<t.length;i++)Mo(t[i],e,n,r);else if(YS(t)||Nl(t))t.forEach(i=>{Mo(i,e,n,r)});else if(QS(t))for(const i in t)Mo(t[i],e,n,r);return t}function xP(t,e){if(dn===null)return t;const n=Ah(dn)||dn.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,l,c=Lt]=e[i];s&&(et(s)&&(s={mounted:s,updated:s}),s.deep&&Mo(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function yo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let c=l.dir[r];c&&(tl(),Vr(c,n,8,[t.el,l,t,e]),nl())}}const Ms=Symbol("_leaveCb"),lf=Symbol("_enterCb");function CP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hn(()=>{t.isMounted=!0}),py(()=>{t.isUnmounting=!0}),t}const Lr=[Function,Array],Lk={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Lr,onEnter:Lr,onAfterEnter:Lr,onEnterCancelled:Lr,onBeforeLeave:Lr,onLeave:Lr,onAfterLeave:Lr,onLeaveCancelled:Lr,onBeforeAppear:Lr,onAppear:Lr,onAfterAppear:Lr,onAppearCancelled:Lr},SP={name:"BaseTransition",props:Lk,setup(t,{slots:e}){const n=by(),r=CP();let i;return()=>{const s=e.default&&Nk(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const b of s)if(b.type!==zr){o=b;break}}const l=mt(t),{mode:c}=l;if(r.isLeaving)return Cg(o);const u=mw(o);if(!u)return Cg(o);const d=_m(u,l,r,n);Mm(u,d);const h=n.subTree,p=h&&mw(h);let m=!1;const{getTransitionKey:y}=u.type;if(y){const b=y();i===void 0?i=b:b!==i&&(i=b,m=!0)}if(p&&p.type!==zr&&(!ko(u,p)||m)){const b=_m(p,l,r,n);if(Mm(p,b),c==="out-in")return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Cg(o);c==="in-out"&&u.type!==zr&&(b.delayLeave=(x,C,M)=>{const L=Ik(r,p);L[String(p.key)]=p,x[Ms]=()=>{C(),x[Ms]=void 0,delete d.delayedLeave},d.delayedLeave=M})}return o}}},kP=SP;function Ik(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function _m(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:p,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:b,onAppear:x,onAfterAppear:C,onAppearCancelled:M}=e,L=String(t.key),A=Ik(n,t),F=(W,ee)=>{W&&Vr(W,r,9,ee)},R=(W,ee)=>{const ve=ee[1];F(W,ee),qe(W)?W.every(Ce=>Ce.length<=1)&&ve():W.length<=1&&ve()},U={mode:s,persisted:o,beforeEnter(W){let ee=l;if(!n.isMounted)if(i)ee=b||l;else return;W[Ms]&&W[Ms](!0);const ve=A[L];ve&&ko(t,ve)&&ve.el[Ms]&&ve.el[Ms](),F(ee,[W])},enter(W){let ee=c,ve=u,Ce=d;if(!n.isMounted)if(i)ee=x||c,ve=C||u,Ce=M||d;else return;let te=!1;const me=W[lf]=Qe=>{te||(te=!0,Qe?F(Ce,[W]):F(ve,[W]),U.delayedLeave&&U.delayedLeave(),W[lf]=void 0)};ee?R(ee,[W,me]):me()},leave(W,ee){const ve=String(t.key);if(W[lf]&&W[lf](!0),n.isUnmounting)return ee();F(h,[W]);let Ce=!1;const te=W[Ms]=me=>{Ce||(Ce=!0,ee(),me?F(y,[W]):F(m,[W]),W[Ms]=void 0,A[ve]===t&&delete A[ve])};A[ve]=t,p?R(p,[W,te]):te()},clone(W){return _m(W,e,n,r)}};return U}function Cg(t){if(xh(t))return t=ss(t),t.children=null,t}function mw(t){return xh(t)?t.children?t.children[0]:void 0:t}function Mm(t,e){t.shapeFlag&6&&t.component?Mm(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Nk(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===nn?(o.patchFlag&128&&i++,r=r.concat(Nk(o.children,e,l))):(e||o.type!==zr)&&r.push(l!=null?ss(o,{key:l}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function bt(t,e){return et(t)?pn({name:t.name},e,{setup:t}):t}const Xa=t=>!!t.type.__asyncLoader,xh=t=>t.type.__isKeepAlive;function EP(t,e){Dk(t,"a",e)}function AP(t,e){Dk(t,"da",e)}function Dk(t,e,n=Tn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ch(e,r,n),n){let i=n.parent;for(;i&&i.parent;)xh(i.parent.vnode)&&TP(r,e,n,i),i=i.parent}}function TP(t,e,n,r){const i=Ch(e,t,r,!0);xr(()=>{ey(r[e],i)},n)}function Ch(t,e,n=Tn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;tl();const l=Zc(n),c=Vr(e,n,t,o);return l(),nl(),c});return r?i.unshift(s):i.push(s),s}}const cs=t=>(e,n=Tn)=>(!Eh||t==="sp")&&Ch(t,(...r)=>e(...r),n),_P=cs("bm"),hn=cs("m"),MP=cs("bu"),OP=cs("u"),py=cs("bum"),xr=cs("um"),RP=cs("sp"),LP=cs("rtg"),IP=cs("rtc");function NP(t,e=Tn){Ch("ec",t,e)}function Pk(t,e,n,r){let i;const s=n;if(qe(t)||Zt(t)){i=new Array(t.length);for(let o=0,l=t.length;o<l;o++)i[o]=e(t[o],o,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s)}else if(Pt(t))if(t[Symbol.iterator])i=Array.from(t,(o,l)=>e(o,l,void 0,s));else{const o=Object.keys(t);i=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];i[l]=e(t[u],u,l,s)}}else i=[];return i}function Bi(t,e,n={},r,i){if(dn.isCE||dn.parent&&Xa(dn.parent)&&dn.parent.isCE)return J("slot",n,r);let s=t[e];s&&s._c&&(s._d=!1),Je();const o=s&&Bk(s(n)),l=Nt(nn,{key:n.key||o&&o.key||`_${e}`},o||[],o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Bk(t){return t.some(e=>nd(e)?!(e.type===zr||e.type===nn&&!Bk(e.children)):!0)?t:null}const Om=t=>t?Yk(t)?Ah(t)||t.proxy:Om(t.parent):null,Za=pn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Om(t.parent),$root:t=>Om(t.root),$emit:t=>t.emit,$options:t=>gy(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,dy(t.update)}),$nextTick:t=>t.n||(t.n=bh.bind(t.proxy)),$watch:t=>wP.bind(t)}),Sg=(t,e)=>t!==Lt&&!t.__isScriptSetup&&ht(t,e),DP={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Sg(r,e))return o[e]=1,r[e];if(i!==Lt&&ht(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&ht(u,e))return o[e]=3,s[e];if(n!==Lt&&ht(n,e))return o[e]=4,n[e];Rm&&(o[e]=0)}}const d=Za[e];let h,p;if(d)return e==="$attrs"&&sr(t,"get",e),d(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(n!==Lt&&ht(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,ht(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Sg(i,e)?(i[e]=n,!0):r!==Lt&&ht(r,e)?(r[e]=n,!0):ht(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||t!==Lt&&ht(t,o)||Sg(e,o)||(l=s[0])&&ht(l,o)||ht(r,o)||ht(Za,o)||ht(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ht(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function yw(t){return qe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Rm=!0;function PP(t){const e=gy(t),n=t.proxy,r=t.ctx;Rm=!1,e.beforeCreate&&vw(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:h,mounted:p,beforeUpdate:m,updated:y,activated:b,deactivated:x,beforeDestroy:C,beforeUnmount:M,destroyed:L,unmounted:A,render:F,renderTracked:R,renderTriggered:U,errorCaptured:W,serverPrefetch:ee,expose:ve,inheritAttrs:Ce,components:te,directives:me,filters:Qe}=e;if(u&&BP(u,r,null),o)for(const be in o){const j=o[be];et(j)&&(r[be]=j.bind(n))}if(i){const be=i.call(n,n);Pt(be)&&(t.data=Xc(be))}if(Rm=!0,s)for(const be in s){const j=s[be],de=et(j)?j.bind(n,n):et(j.get)?j.get.bind(n,n):Fr,Ee=!et(j)&&et(j.set)?j.set.bind(n):Fr,pe=Ne({get:de,set:Ee});Object.defineProperty(r,be,{enumerable:!0,configurable:!0,get:()=>pe.value,set:we=>pe.value=we})}if(l)for(const be in l)$k(l[be],r,n,be);if(c){const be=et(c)?c.call(n):c;Reflect.ownKeys(be).forEach(j=>{Bn(j,be[j])})}d&&vw(d,t,"c");function Re(be,j){qe(j)?j.forEach(de=>be(de.bind(n))):j&&be(j.bind(n))}if(Re(_P,h),Re(hn,p),Re(MP,m),Re(OP,y),Re(EP,b),Re(AP,x),Re(NP,W),Re(IP,R),Re(LP,U),Re(py,M),Re(xr,A),Re(RP,ee),qe(ve))if(ve.length){const be=t.exposed||(t.exposed={});ve.forEach(j=>{Object.defineProperty(be,j,{get:()=>n[j],set:de=>n[j]=de})})}else t.exposed||(t.exposed={});F&&t.render===Fr&&(t.render=F),Ce!=null&&(t.inheritAttrs=Ce),te&&(t.components=te),me&&(t.directives=me)}function BP(t,e,n=Fr){qe(t)&&(t=Lm(t));for(const r in t){const i=t[r];let s;Pt(i)?"default"in i?s=Wt(i.from||r,i.default,!0):s=Wt(i.from||r):s=Wt(i),or(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function vw(t,e,n){Vr(qe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function $k(t,e,n,r){const i=r.includes(".")?Rk(n,r):()=>n[r];if(Zt(t)){const s=e[t];et(s)&&ri(i,s)}else if(et(t))ri(i,t.bind(n));else if(Pt(t))if(qe(t))t.forEach(s=>$k(s,e,n,r));else{const s=et(t.handler)?t.handler.bind(n):e[t.handler];et(s)&&ri(i,s,t)}}function gy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,l=s.get(e);let c;return l?c=l:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(u=>td(c,u,o,!0)),td(c,e,o)),Pt(e)&&s.set(e,c),c}function td(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&td(t,s,n,!0),i&&i.forEach(o=>td(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=$P[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const $P={data:bw,props:ww,emits:ww,methods:Wa,computed:Wa,beforeCreate:Un,created:Un,beforeMount:Un,mounted:Un,beforeUpdate:Un,updated:Un,beforeDestroy:Un,beforeUnmount:Un,destroyed:Un,unmounted:Un,activated:Un,deactivated:Un,errorCaptured:Un,serverPrefetch:Un,components:Wa,directives:Wa,watch:FP,provide:bw,inject:HP};function bw(t,e){return e?t?function(){return pn(et(t)?t.call(this,this):t,et(e)?e.call(this,this):e)}:e:t}function HP(t,e){return Wa(Lm(t),Lm(e))}function Lm(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Un(t,e){return t?[...new Set([].concat(t,e))]:e}function Wa(t,e){return t?pn(Object.create(null),t,e):e}function ww(t,e){return t?qe(t)&&qe(e)?[...new Set([...t,...e])]:pn(Object.create(null),yw(t),yw(e??{})):e}function FP(t,e){if(!t)return e;if(!e)return t;const n=pn(Object.create(null),t);for(const r in e)n[r]=Un(t[r],e[r]);return n}function Hk(){return{app:null,config:{isNativeTag:wD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VP=0;function zP(t,e){return function(r,i=null){et(r)||(r=pn({},r)),i!=null&&!Pt(i)&&(i=null);const s=Hk(),o=new WeakSet;let l=!1;const c=s.app={_uid:VP++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:p3,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&et(u.install)?(o.add(u),u.install(c,...d)):et(u)&&(o.add(u),u(c,...d))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,d){return d?(s.components[u]=d,c):s.components[u]},directive(u,d){return d?(s.directives[u]=d,c):s.directives[u]},mount(u,d,h){if(!l){const p=J(r,i);return p.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(p,u):t(p,u,h),l=!0,c._container=u,u.__vue_app__=c,Ah(p.component)||p.component.proxy}},unmount(){l&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return s.provides[u]=d,c},runWithContext(u){const d=Qa;Qa=c;try{return u()}finally{Qa=d}}};return c}}let Qa=null;function Bn(t,e){if(Tn){let n=Tn.provides;const r=Tn.parent&&Tn.parent.provides;r===n&&(n=Tn.provides=Object.create(r)),n[t]=e}}function Wt(t,e,n=!1){const r=Tn||dn;if(r||Qa){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Qa._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&et(e)?e.call(r&&r.proxy):e}}function UP(t,e,n,r=!1){const i={},s={};Zf(s,kh,1),t.propsDefaults=Object.create(null),Fk(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:gk(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function WP(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,l=mt(i),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let p=d[h];if(wh(t.emitsOptions,p))continue;const m=e[p];if(c)if(ht(s,p))m!==s[p]&&(s[p]=m,u=!0);else{const y=Mi(p);i[y]=Im(c,l,y,m,t,!1)}else m!==s[p]&&(s[p]=m,u=!0)}}}else{Fk(t,e,i,s)&&(u=!0);let d;for(const h in l)(!e||!ht(e,h)&&((d=el(h))===h||!ht(e,d)))&&(c?n&&(n[h]!==void 0||n[d]!==void 0)&&(i[h]=Im(c,l,h,void 0,t,!0)):delete i[h]);if(s!==l)for(const h in s)(!e||!ht(e,h))&&(delete s[h],u=!0)}u&&ts(t,"set","$attrs")}function Fk(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ja(c))continue;const u=e[c];let d;i&&ht(i,d=Mi(c))?!s||!s.includes(d)?n[d]=u:(l||(l={}))[d]=u:wh(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(s){const c=mt(n),u=l||Lt;for(let d=0;d<s.length;d++){const h=s[d];n[h]=Im(i,c,h,u[h],t,!ht(u,h))}}return o}function Im(t,e,n,r,i,s){const o=t[n];if(o!=null){const l=ht(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&et(c)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const d=Zc(i);r=u[n]=c.call(null,e),d()}}else r=c}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===el(n))&&(r=!0))}return r}function Vk(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},l=[];let c=!1;if(!et(t)){const d=h=>{c=!0;const[p,m]=Vk(h,e,!0);pn(o,p),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!c)return Pt(t)&&r.set(t,Il),Il;if(qe(s))for(let d=0;d<s.length;d++){const h=Mi(s[d]);xw(h)&&(o[h]=Lt)}else if(s)for(const d in s){const h=Mi(d);if(xw(h)){const p=s[d],m=o[h]=qe(p)||et(p)?{type:p}:pn({},p);if(m){const y=kw(Boolean,m.type),b=kw(String,m.type);m[0]=y>-1,m[1]=b<0||y<b,(y>-1||ht(m,"default"))&&l.push(h)}}}const u=[o,l];return Pt(t)&&r.set(t,u),u}function xw(t){return t[0]!=="$"&&!Ja(t)}function Cw(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Sw(t,e){return Cw(t)===Cw(e)}function kw(t,e){return qe(e)?e.findIndex(n=>Sw(n,t)):et(e)&&Sw(e,t)?0:-1}const zk=t=>t[0]==="_"||t==="$stable",my=t=>qe(t)?t.map(Si):[Si(t)],jP=(t,e,n)=>{if(e._n)return e;const r=ge((...i)=>my(e(...i)),n);return r._c=!1,r},Uk=(t,e,n)=>{const r=t._ctx;for(const i in t){if(zk(i))continue;const s=t[i];if(et(s))e[i]=jP(i,s,r);else if(s!=null){const o=my(s);e[i]=()=>o}}},Wk=(t,e)=>{const n=my(e);t.slots.default=()=>n},KP=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=mt(e),Zf(e,"_",n)):Uk(e,t.slots={})}else t.slots={},e&&Wk(t,e);Zf(t.slots,kh,1)},qP=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Lt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:(pn(i,e),!n&&l===1&&delete i._):(s=!e.$stable,Uk(e,i)),o=e}else e&&(Wk(t,e),o={default:1});if(s)for(const l in i)!zk(l)&&o[l]==null&&delete i[l]};function Nm(t,e,n,r,i=!1){if(qe(t)){t.forEach((p,m)=>Nm(p,e&&(qe(e)?e[m]:e),n,r,i));return}if(Xa(r)&&!i)return;const s=r.shapeFlag&4?Ah(r.component)||r.component.proxy:r.el,o=i?null:s,{i:l,r:c}=t,u=e&&e.r,d=l.refs===Lt?l.refs={}:l.refs,h=l.setupState;if(u!=null&&u!==c&&(Zt(u)?(d[u]=null,ht(h,u)&&(h[u]=null)):or(u)&&(u.value=null)),et(c))qs(c,l,12,[o,d]);else{const p=Zt(c),m=or(c);if(p||m){const y=()=>{if(t.f){const b=p?ht(h,c)?h[c]:d[c]:c.value;i?qe(b)&&ey(b,s):qe(b)?b.includes(s)||b.push(s):p?(d[c]=[s],ht(h,c)&&(h[c]=d[c])):(c.value=[s],t.k&&(d[t.k]=c.value))}else p?(d[c]=o,ht(h,c)&&(h[c]=o)):m&&(c.value=o,t.k&&(d[t.k]=o))};o?(y.id=-1,Qn(y,n)):y()}}}const Qn=yP;function GP(t){return JP(t)}function JP(t,e){const n=ek();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:h,nextSibling:p,setScopeId:m=Fr,insertStaticContent:y}=t,b=(E,T,D,z=null,H=null,ne=null,ae=void 0,Z=null,G=!!T.dynamicChildren)=>{if(E===T)return;E&&!ko(E,T)&&(z=$(E),we(E,H,ne,!0),E=null),T.patchFlag===-2&&(G=!1,T.dynamicChildren=null);const{type:X,ref:ce,shapeFlag:Te}=T;switch(X){case Sh:x(E,T,D,z);break;case zr:C(E,T,D,z);break;case Eg:E==null&&M(T,D,z,ae);break;case nn:te(E,T,D,z,H,ne,ae,Z,G);break;default:Te&1?F(E,T,D,z,H,ne,ae,Z,G):Te&6?me(E,T,D,z,H,ne,ae,Z,G):(Te&64||Te&128)&&X.process(E,T,D,z,H,ne,ae,Z,G,xe)}ce!=null&&H&&Nm(ce,E&&E.ref,ne,T||E,!T)},x=(E,T,D,z)=>{if(E==null)r(T.el=l(T.children),D,z);else{const H=T.el=E.el;T.children!==E.children&&u(H,T.children)}},C=(E,T,D,z)=>{E==null?r(T.el=c(T.children||""),D,z):T.el=E.el},M=(E,T,D,z)=>{[E.el,E.anchor]=y(E.children,T,D,z,E.el,E.anchor)},L=({el:E,anchor:T},D,z)=>{let H;for(;E&&E!==T;)H=p(E),r(E,D,z),E=H;r(T,D,z)},A=({el:E,anchor:T})=>{let D;for(;E&&E!==T;)D=p(E),i(E),E=D;i(T)},F=(E,T,D,z,H,ne,ae,Z,G)=>{T.type==="svg"?ae="svg":T.type==="math"&&(ae="mathml"),E==null?R(T,D,z,H,ne,ae,Z,G):ee(E,T,H,ne,ae,Z,G)},R=(E,T,D,z,H,ne,ae,Z)=>{let G,X;const{props:ce,shapeFlag:Te,transition:Se,dirs:Pe}=E;if(G=E.el=o(E.type,ne,ce&&ce.is,ce),Te&8?d(G,E.children):Te&16&&W(E.children,G,null,z,H,kg(E,ne),ae,Z),Pe&&yo(E,null,z,"created"),U(G,E,E.scopeId,ae,z),ce){for(const Ge in ce)Ge!=="value"&&!Ja(Ge)&&s(G,Ge,null,ce[Ge],ne,E.children,z,H,Le);"value"in ce&&s(G,"value",null,ce.value,ne),(X=ce.onVnodeBeforeMount)&&mi(X,z,E)}Pe&&yo(E,null,z,"beforeMount");const je=YP(H,Se);je&&Se.beforeEnter(G),r(G,T,D),((X=ce&&ce.onVnodeMounted)||je||Pe)&&Qn(()=>{X&&mi(X,z,E),je&&Se.enter(G),Pe&&yo(E,null,z,"mounted")},H)},U=(E,T,D,z,H)=>{if(D&&m(E,D),z)for(let ne=0;ne<z.length;ne++)m(E,z[ne]);if(H){let ne=H.subTree;if(T===ne){const ae=H.vnode;U(E,ae,ae.scopeId,ae.slotScopeIds,H.parent)}}},W=(E,T,D,z,H,ne,ae,Z,G=0)=>{for(let X=G;X<E.length;X++){const ce=E[X]=Z?Os(E[X]):Si(E[X]);b(null,ce,T,D,z,H,ne,ae,Z)}},ee=(E,T,D,z,H,ne,ae)=>{const Z=T.el=E.el;let{patchFlag:G,dynamicChildren:X,dirs:ce}=T;G|=E.patchFlag&16;const Te=E.props||Lt,Se=T.props||Lt;let Pe;if(D&&vo(D,!1),(Pe=Se.onVnodeBeforeUpdate)&&mi(Pe,D,T,E),ce&&yo(T,E,D,"beforeUpdate"),D&&vo(D,!0),X?ve(E.dynamicChildren,X,Z,D,z,kg(T,H),ne):ae||j(E,T,Z,null,D,z,kg(T,H),ne,!1),G>0){if(G&16)Ce(Z,T,Te,Se,D,z,H);else if(G&2&&Te.class!==Se.class&&s(Z,"class",null,Se.class,H),G&4&&s(Z,"style",Te.style,Se.style,H),G&8){const je=T.dynamicProps;for(let Ge=0;Ge<je.length;Ge++){const gt=je[Ge],St=Te[gt],qt=Se[gt];(qt!==St||gt==="value")&&s(Z,gt,St,qt,H,E.children,D,z,Le)}}G&1&&E.children!==T.children&&d(Z,T.children)}else!ae&&X==null&&Ce(Z,T,Te,Se,D,z,H);((Pe=Se.onVnodeUpdated)||ce)&&Qn(()=>{Pe&&mi(Pe,D,T,E),ce&&yo(T,E,D,"updated")},z)},ve=(E,T,D,z,H,ne,ae)=>{for(let Z=0;Z<T.length;Z++){const G=E[Z],X=T[Z],ce=G.el&&(G.type===nn||!ko(G,X)||G.shapeFlag&70)?h(G.el):D;b(G,X,ce,null,z,H,ne,ae,!0)}},Ce=(E,T,D,z,H,ne,ae)=>{if(D!==z){if(D!==Lt)for(const Z in D)!Ja(Z)&&!(Z in z)&&s(E,Z,D[Z],null,ae,T.children,H,ne,Le);for(const Z in z){if(Ja(Z))continue;const G=z[Z],X=D[Z];G!==X&&Z!=="value"&&s(E,Z,X,G,ae,T.children,H,ne,Le)}"value"in z&&s(E,"value",D.value,z.value,ae)}},te=(E,T,D,z,H,ne,ae,Z,G)=>{const X=T.el=E?E.el:l(""),ce=T.anchor=E?E.anchor:l("");let{patchFlag:Te,dynamicChildren:Se,slotScopeIds:Pe}=T;Pe&&(Z=Z?Z.concat(Pe):Pe),E==null?(r(X,D,z),r(ce,D,z),W(T.children||[],D,ce,H,ne,ae,Z,G)):Te>0&&Te&64&&Se&&E.dynamicChildren?(ve(E.dynamicChildren,Se,D,H,ne,ae,Z),(T.key!=null||H&&T===H.subTree)&&yy(E,T,!0)):j(E,T,D,ce,H,ne,ae,Z,G)},me=(E,T,D,z,H,ne,ae,Z,G)=>{T.slotScopeIds=Z,E==null?T.shapeFlag&512?H.ctx.activate(T,D,z,ae,G):Qe(T,D,z,H,ne,ae,G):rt(E,T,G)},Qe=(E,T,D,z,H,ne,ae)=>{const Z=E.component=l3(E,z,H);if(xh(E)&&(Z.ctx.renderer=xe),a3(Z),Z.asyncDep){if(H&&H.registerDep(Z,Re),!E.el){const G=Z.subTree=J(zr);C(null,G,T,D)}}else Re(Z,E,T,D,H,ne,ae)},rt=(E,T,D)=>{const z=T.component=E.component;if(hP(E,T,D))if(z.asyncDep&&!z.asyncResolved){be(z,T,D);return}else z.next=T,lP(z.update),z.effect.dirty=!0,z.update();else T.el=E.el,z.vnode=T},Re=(E,T,D,z,H,ne,ae)=>{const Z=()=>{if(E.isMounted){let{next:ce,bu:Te,u:Se,parent:Pe,vnode:je}=E;{const oe=jk(E);if(oe){ce&&(ce.el=je.el,be(E,ce,ae)),oe.asyncDep.then(()=>{E.isUnmounted||Z()});return}}let Ge=ce,gt;vo(E,!1),ce?(ce.el=je.el,be(E,ce,ae)):ce=je,Te&&Df(Te),(gt=ce.props&&ce.props.onVnodeBeforeUpdate)&&mi(gt,Pe,ce,je),vo(E,!0);const St=xg(E),qt=E.subTree;E.subTree=St,b(qt,St,h(qt.el),$(qt),E,H,ne),ce.el=St.el,Ge===null&&pP(E,St.el),Se&&Qn(Se,H),(gt=ce.props&&ce.props.onVnodeUpdated)&&Qn(()=>mi(gt,Pe,ce,je),H)}else{let ce;const{el:Te,props:Se}=T,{bm:Pe,m:je,parent:Ge}=E,gt=Xa(T);if(vo(E,!1),Pe&&Df(Pe),!gt&&(ce=Se&&Se.onVnodeBeforeMount)&&mi(ce,Ge,T),vo(E,!0),Te&&ft){const St=()=>{E.subTree=xg(E),ft(Te,E.subTree,E,H,null)};gt?T.type.__asyncLoader().then(()=>!E.isUnmounted&&St()):St()}else{const St=E.subTree=xg(E);b(null,St,D,z,E,H,ne),T.el=St.el}if(je&&Qn(je,H),!gt&&(ce=Se&&Se.onVnodeMounted)){const St=T;Qn(()=>mi(ce,Ge,St),H)}(T.shapeFlag&256||Ge&&Xa(Ge.vnode)&&Ge.vnode.shapeFlag&256)&&E.a&&Qn(E.a,H),E.isMounted=!0,T=D=z=null}},G=E.effect=new ry(Z,Fr,()=>dy(X),E.scope),X=E.update=()=>{G.dirty&&G.run()};X.id=E.uid,vo(E,!0),X()},be=(E,T,D)=>{T.component=E;const z=E.vnode.props;E.vnode=T,E.next=null,WP(E,T.props,z,D),qP(E,T.children,D),tl(),hw(E),nl()},j=(E,T,D,z,H,ne,ae,Z,G=!1)=>{const X=E&&E.children,ce=E?E.shapeFlag:0,Te=T.children,{patchFlag:Se,shapeFlag:Pe}=T;if(Se>0){if(Se&128){Ee(X,Te,D,z,H,ne,ae,Z,G);return}else if(Se&256){de(X,Te,D,z,H,ne,ae,Z,G);return}}Pe&8?(ce&16&&Le(X,H,ne),Te!==X&&d(D,Te)):ce&16?Pe&16?Ee(X,Te,D,z,H,ne,ae,Z,G):Le(X,H,ne,!0):(ce&8&&d(D,""),Pe&16&&W(Te,D,z,H,ne,ae,Z,G))},de=(E,T,D,z,H,ne,ae,Z,G)=>{E=E||Il,T=T||Il;const X=E.length,ce=T.length,Te=Math.min(X,ce);let Se;for(Se=0;Se<Te;Se++){const Pe=T[Se]=G?Os(T[Se]):Si(T[Se]);b(E[Se],Pe,D,null,H,ne,ae,Z,G)}X>ce?Le(E,H,ne,!0,!1,Te):W(T,D,z,H,ne,ae,Z,G,Te)},Ee=(E,T,D,z,H,ne,ae,Z,G)=>{let X=0;const ce=T.length;let Te=E.length-1,Se=ce-1;for(;X<=Te&&X<=Se;){const Pe=E[X],je=T[X]=G?Os(T[X]):Si(T[X]);if(ko(Pe,je))b(Pe,je,D,null,H,ne,ae,Z,G);else break;X++}for(;X<=Te&&X<=Se;){const Pe=E[Te],je=T[Se]=G?Os(T[Se]):Si(T[Se]);if(ko(Pe,je))b(Pe,je,D,null,H,ne,ae,Z,G);else break;Te--,Se--}if(X>Te){if(X<=Se){const Pe=Se+1,je=Pe<ce?T[Pe].el:z;for(;X<=Se;)b(null,T[X]=G?Os(T[X]):Si(T[X]),D,je,H,ne,ae,Z,G),X++}}else if(X>Se)for(;X<=Te;)we(E[X],H,ne,!0),X++;else{const Pe=X,je=X,Ge=new Map;for(X=je;X<=Se;X++){const ue=T[X]=G?Os(T[X]):Si(T[X]);ue.key!=null&&Ge.set(ue.key,X)}let gt,St=0;const qt=Se-je+1;let oe=!1,Fe=0;const P=new Array(qt);for(X=0;X<qt;X++)P[X]=0;for(X=Pe;X<=Te;X++){const ue=E[X];if(St>=qt){we(ue,H,ne,!0);continue}let Me;if(ue.key!=null)Me=Ge.get(ue.key);else for(gt=je;gt<=Se;gt++)if(P[gt-je]===0&&ko(ue,T[gt])){Me=gt;break}Me===void 0?we(ue,H,ne,!0):(P[Me-je]=X+1,Me>=Fe?Fe=Me:oe=!0,b(ue,T[Me],D,null,H,ne,ae,Z,G),St++)}const se=oe?XP(P):Il;for(gt=se.length-1,X=qt-1;X>=0;X--){const ue=je+X,Me=T[ue],Ke=ue+1<ce?T[ue+1].el:z;P[X]===0?b(null,Me,D,Ke,H,ne,ae,Z,G):oe&&(gt<0||X!==se[gt]?pe(Me,D,Ke,2):gt--)}}},pe=(E,T,D,z,H=null)=>{const{el:ne,type:ae,transition:Z,children:G,shapeFlag:X}=E;if(X&6){pe(E.component.subTree,T,D,z);return}if(X&128){E.suspense.move(T,D,z);return}if(X&64){ae.move(E,T,D,xe);return}if(ae===nn){r(ne,T,D);for(let Te=0;Te<G.length;Te++)pe(G[Te],T,D,z);r(E.anchor,T,D);return}if(ae===Eg){L(E,T,D);return}if(z!==2&&X&1&&Z)if(z===0)Z.beforeEnter(ne),r(ne,T,D),Qn(()=>Z.enter(ne),H);else{const{leave:Te,delayLeave:Se,afterLeave:Pe}=Z,je=()=>r(ne,T,D),Ge=()=>{Te(ne,()=>{je(),Pe&&Pe()})};Se?Se(ne,je,Ge):Ge()}else r(ne,T,D)},we=(E,T,D,z=!1,H=!1)=>{const{type:ne,props:ae,ref:Z,children:G,dynamicChildren:X,shapeFlag:ce,patchFlag:Te,dirs:Se}=E;if(Z!=null&&Nm(Z,null,D,E,!0),ce&256){T.ctx.deactivate(E);return}const Pe=ce&1&&Se,je=!Xa(E);let Ge;if(je&&(Ge=ae&&ae.onVnodeBeforeUnmount)&&mi(Ge,T,E),ce&6)De(E.component,D,z);else{if(ce&128){E.suspense.unmount(D,z);return}Pe&&yo(E,null,T,"beforeUnmount"),ce&64?E.type.remove(E,T,D,H,xe,z):X&&(ne!==nn||Te>0&&Te&64)?Le(X,T,D,!1,!0):(ne===nn&&Te&384||!H&&ce&16)&&Le(G,T,D),z&&_e(E)}(je&&(Ge=ae&&ae.onVnodeUnmounted)||Pe)&&Qn(()=>{Ge&&mi(Ge,T,E),Pe&&yo(E,null,T,"unmounted")},D)},_e=E=>{const{type:T,el:D,anchor:z,transition:H}=E;if(T===nn){He(D,z);return}if(T===Eg){A(E);return}const ne=()=>{i(D),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(E.shapeFlag&1&&H&&!H.persisted){const{leave:ae,delayLeave:Z}=H,G=()=>ae(D,ne);Z?Z(E.el,ne,G):G()}else ne()},He=(E,T)=>{let D;for(;E!==T;)D=p(E),i(E),E=D;i(T)},De=(E,T,D)=>{const{bum:z,scope:H,update:ne,subTree:ae,um:Z}=E;z&&Df(z),H.stop(),ne&&(ne.active=!1,we(ae,E,T,D)),Z&&Qn(Z,T),Qn(()=>{E.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},Le=(E,T,D,z=!1,H=!1,ne=0)=>{for(let ae=ne;ae<E.length;ae++)we(E[ae],T,D,z,H)},$=E=>E.shapeFlag&6?$(E.component.subTree):E.shapeFlag&128?E.suspense.next():p(E.anchor||E.el);let re=!1;const ie=(E,T,D)=>{E==null?T._vnode&&we(T._vnode,null,null,!0):b(T._vnode||null,E,T,null,null,null,D),re||(re=!0,hw(),kk(),re=!1),T._vnode=E},xe={p:b,um:we,m:pe,r:_e,mt:Qe,mc:W,pc:j,pbc:ve,n:$,o:t};let Xe,ft;return{render:ie,hydrate:Xe,createApp:zP(ie,Xe)}}function kg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function vo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function YP(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function yy(t,e,n=!1){const r=t.children,i=e.children;if(qe(r)&&qe(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Os(i[s]),l.el=o.el),n||yy(o,l)),l.type===Sh&&(l.el=o.el)}}function XP(t){const e=t.slice(),n=[0];let r,i,s,o,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,t[n[l]]<u?s=l+1:o=l;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function jk(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jk(e)}const ZP=t=>t.__isTeleport,ec=t=>t&&(t.disabled||t.disabled===""),Ew=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Aw=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Dm=(t,e)=>{const n=t&&t.to;return Zt(n)?e?e(n):null:n},QP={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,l,c,u){const{mc:d,pc:h,pbc:p,o:{insert:m,querySelector:y,createText:b,createComment:x}}=u,C=ec(e.props);let{shapeFlag:M,children:L,dynamicChildren:A}=e;if(t==null){const F=e.el=b(""),R=e.anchor=b("");m(F,n,r),m(R,n,r);const U=e.target=Dm(e.props,y),W=e.targetAnchor=b("");U&&(m(W,U),o==="svg"||Ew(U)?o="svg":(o==="mathml"||Aw(U))&&(o="mathml"));const ee=(ve,Ce)=>{M&16&&d(L,ve,Ce,i,s,o,l,c)};C?ee(n,R):U&&ee(U,W)}else{e.el=t.el;const F=e.anchor=t.anchor,R=e.target=t.target,U=e.targetAnchor=t.targetAnchor,W=ec(t.props),ee=W?n:R,ve=W?F:U;if(o==="svg"||Ew(R)?o="svg":(o==="mathml"||Aw(R))&&(o="mathml"),A?(p(t.dynamicChildren,A,ee,i,s,o,l),yy(t,e,!0)):c||h(t,e,ee,ve,i,s,o,l,!1),C)W?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):af(e,n,F,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Ce=e.target=Dm(e.props,y);Ce&&af(e,Ce,null,u,0)}else W&&af(e,R,U,u,1)}Kk(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:l,children:c,anchor:u,targetAnchor:d,target:h,props:p}=t;if(h&&s(d),o&&s(u),l&16){const m=o||!ec(p);for(let y=0;y<c.length;y++){const b=c[y];i(b,e,n,m,!!b.dynamicChildren)}}},move:af,hydrate:e3};function af(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:d}=t,h=s===2;if(h&&r(o,e,n),(!h||ec(d))&&c&16)for(let p=0;p<u.length;p++)i(u[p],e,n,2);h&&r(l,e,n)}function e3(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:l,querySelector:c}},u){const d=e.target=Dm(e.props,c);if(d){const h=d._lpa||d.firstChild;if(e.shapeFlag&16)if(ec(e.props))e.anchor=u(o(t),e,l(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let p=h;for(;p;)if(p=o(p),p&&p.nodeType===8&&p.data==="teleport anchor"){e.targetAnchor=p,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(h,e,d,n,r,i,s)}Kk(e)}return e.anchor&&o(e.anchor)}const t3=QP;function Kk(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const nn=Symbol.for("v-fgt"),Sh=Symbol.for("v-txt"),zr=Symbol.for("v-cmt"),Eg=Symbol.for("v-stc"),tc=[];let ti=null;function Je(t=!1){tc.push(ti=t?null:[])}function n3(){tc.pop(),ti=tc[tc.length-1]||null}let wc=1;function Tw(t){wc+=t}function qk(t){return t.dynamicChildren=wc>0?ti||Il:null,n3(),wc>0&&ti&&ti.push(t),t}function sn(t,e,n,r,i,s){return qk(he(t,e,n,r,i,s,!0))}function Nt(t,e,n,r,i){return qk(J(t,e,n,r,i,!0))}function nd(t){return t?t.__v_isVNode===!0:!1}function ko(t,e){return t.type===e.type&&t.key===e.key}const kh="__vInternal",Gk=({key:t})=>t??null,Pf=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Zt(t)||or(t)||et(t)?{i:dn,r:t,k:e,f:!!n}:t:null);function he(t,e=null,n=null,r=0,i=null,s=t===nn?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Gk(e),ref:e&&Pf(e),scopeId:Tk,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dn};return l?(vy(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=Zt(n)?8:16),wc>0&&!o&&ti&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&ti.push(c),c}const J=r3;function r3(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Mk)&&(t=zr),nd(t)){const l=ss(t,e,!0);return n&&vy(l,n),wc>0&&!s&&ti&&(l.shapeFlag&6?ti[ti.indexOf(t)]=l:ti.push(l)),l.patchFlag|=-2,l}if(h3(t)&&(t=t.__vccOpts),e){e=i3(e);let{class:l,style:c}=e;l&&!Zt(l)&&(e.class=Oi(l)),Pt(c)&&(yk(c)&&!qe(c)&&(c=pn({},c)),e.style=ny(c))}const o=Zt(t)?1:mP(t)?128:ZP(t)?64:Pt(t)?4:et(t)?2:0;return he(t,e,n,r,i,o,s,!0)}function i3(t){return t?yk(t)||kh in t?pn({},t):t:null}function ss(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,l=e?Jk(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Gk(l),ref:e&&e.ref?n&&i?qe(i)?i.concat(Pf(e)):[i,Pf(e)]:Pf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ss(t.ssContent),ssFallback:t.ssFallback&&ss(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function yr(t=" ",e=0){return J(Sh,null,t,e)}function Wn(t="",e=!1){return e?(Je(),Nt(zr,null,t)):J(zr,null,t)}function Si(t){return t==null||typeof t=="boolean"?J(zr):qe(t)?J(nn,null,t.slice()):typeof t=="object"?Os(t):J(Sh,null,String(t))}function Os(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ss(t)}function vy(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(qe(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),vy(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(kh in e)?e._ctx=dn:i===3&&dn&&(dn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else et(e)?(e={default:e,_ctx:dn},n=32):(e=String(e),r&64?(n=16,e=[yr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Jk(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Oi([e.class,r.class]));else if(i==="style")e.style=ny([e.style,r.style]);else if(dh(i)){const s=e[i],o=r[i];o&&s!==o&&!(qe(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function mi(t,e,n,r=null){Vr(t,e,7,[n,r])}const s3=Hk();let o3=0;function l3(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||s3,s={uid:o3++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new rk(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vk(r,i),emitsOptions:Ak(r,i),emit:null,emitted:null,propsDefaults:Lt,inheritAttrs:r.inheritAttrs,ctx:Lt,data:Lt,props:Lt,attrs:Lt,slots:Lt,refs:Lt,setupState:Lt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=uP.bind(null,s),t.ce&&t.ce(s),s}let Tn=null;const by=()=>Tn||dn;let rd,Pm;{const t=ek(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};rd=e("__VUE_INSTANCE_SETTERS__",n=>Tn=n),Pm=e("__VUE_SSR_SETTERS__",n=>Eh=n)}const Zc=t=>{const e=Tn;return rd(t),t.scope.on(),()=>{t.scope.off(),rd(e)}},_w=()=>{Tn&&Tn.scope.off(),rd(null)};function Yk(t){return t.vnode.shapeFlag&4}let Eh=!1;function a3(t,e=!1){e&&Pm(e);const{props:n,children:r}=t.vnode,i=Yk(t);UP(t,n,i,e),KP(t,r);const s=i?c3(t,e):void 0;return e&&Pm(!1),s}function c3(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=yh(new Proxy(t.ctx,DP));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?f3(t):null,s=Zc(t);tl();const o=qs(r,t,0,[t.props,i]);if(nl(),s(),XS(o)){if(o.then(_w,_w),e)return o.then(l=>{Mw(t,l,e)}).catch(l=>{vh(l,t,0)});t.asyncDep=o}else Mw(t,o,e)}else Xk(t,e)}function Mw(t,e,n){et(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pt(e)&&(t.setupState=xk(e)),Xk(t,n)}let Ow;function Xk(t,e,n){const r=t.type;if(!t.render){if(!e&&Ow&&!r.render){const i=r.template||gy(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:l,compilerOptions:c}=r,u=pn(pn({isCustomElement:s,delimiters:l},o),c);r.render=Ow(i,u)}}t.render=r.render||Fr}{const i=Zc(t);tl();try{PP(t)}finally{nl(),i()}}}function u3(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return sr(t,"get","$attrs"),e[n]}}))}function f3(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return u3(t)},slots:t.slots,emit:t.emit,expose:e}}function Ah(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(xk(yh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Za)return Za[n](t)},has(e,n){return n in e||n in Za}}))}function d3(t,e=!0){return et(t)?t.displayName||t.name:t.name||e&&t.__name}function h3(t){return et(t)&&"__vccOpts"in t}const Ne=(t,e)=>eP(t,e,Eh);function $t(t,e,n){const r=arguments.length;return r===2?Pt(e)&&!qe(e)?nd(e)?J(t,null,[e]):J(t,e):J(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&nd(n)&&(n=[n]),J(t,e,n))}const p3="3.4.19";/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const g3="http://www.w3.org/2000/svg",m3="http://www.w3.org/1998/Math/MathML",Rs=typeof document<"u"?document:null,Rw=Rs&&Rs.createElement("template"),y3={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Rs.createElementNS(g3,t):e==="mathml"?Rs.createElementNS(m3,t):Rs.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Rs.createTextNode(t),createComment:t=>Rs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Rw.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const l=Rw.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Cs="transition",Pa="animation",xc=Symbol("_vtc"),Th=(t,{slots:e})=>$t(kP,v3(t),e);Th.displayName="Transition";const Zk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Th.props=pn({},Lk,Zk);const bo=(t,e=[])=>{qe(t)?t.forEach(n=>n(...e)):t&&t(...e)},Lw=t=>t?qe(t)?t.some(e=>e.length>1):t.length>1:!1;function v3(t){const e={};for(const te in t)te in Zk||(e[te]=t[te]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=b3(i),b=y&&y[0],x=y&&y[1],{onBeforeEnter:C,onEnter:M,onEnterCancelled:L,onLeave:A,onLeaveCancelled:F,onBeforeAppear:R=C,onAppear:U=M,onAppearCancelled:W=L}=e,ee=(te,me,Qe)=>{wo(te,me?d:l),wo(te,me?u:o),Qe&&Qe()},ve=(te,me)=>{te._isLeaving=!1,wo(te,h),wo(te,m),wo(te,p),me&&me()},Ce=te=>(me,Qe)=>{const rt=te?U:M,Re=()=>ee(me,te,Qe);bo(rt,[me,Re]),Iw(()=>{wo(me,te?c:s),Ss(me,te?d:l),Lw(rt)||Nw(me,r,b,Re)})};return pn(e,{onBeforeEnter(te){bo(C,[te]),Ss(te,s),Ss(te,o)},onBeforeAppear(te){bo(R,[te]),Ss(te,c),Ss(te,u)},onEnter:Ce(!1),onAppear:Ce(!0),onLeave(te,me){te._isLeaving=!0;const Qe=()=>ve(te,me);Ss(te,h),C3(),Ss(te,p),Iw(()=>{te._isLeaving&&(wo(te,h),Ss(te,m),Lw(A)||Nw(te,r,x,Qe))}),bo(A,[te,Qe])},onEnterCancelled(te){ee(te,!1),bo(L,[te])},onAppearCancelled(te){ee(te,!0),bo(W,[te])},onLeaveCancelled(te){ve(te),bo(F,[te])}})}function b3(t){if(t==null)return null;if(Pt(t))return[Ag(t.enter),Ag(t.leave)];{const e=Ag(t);return[e,e]}}function Ag(t){return ED(t)}function Ss(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[xc]||(t[xc]=new Set)).add(e)}function wo(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[xc];n&&(n.delete(e),n.size||(t[xc]=void 0))}function Iw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let w3=0;function Nw(t,e,n,r){const i=t._endId=++w3,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:l,propCount:c}=x3(t,e);if(!o)return r();const u=o+"end";let d=0;const h=()=>{t.removeEventListener(u,p),s()},p=m=>{m.target===t&&++d>=c&&h()};setTimeout(()=>{d<c&&h()},l+1),t.addEventListener(u,p)}function x3(t,e){const n=window.getComputedStyle(t),r=y=>(n[y]||"").split(", "),i=r(`${Cs}Delay`),s=r(`${Cs}Duration`),o=Dw(i,s),l=r(`${Pa}Delay`),c=r(`${Pa}Duration`),u=Dw(l,c);let d=null,h=0,p=0;e===Cs?o>0&&(d=Cs,h=o,p=s.length):e===Pa?u>0&&(d=Pa,h=u,p=c.length):(h=Math.max(o,u),d=h>0?o>u?Cs:Pa:null,p=d?d===Cs?s.length:c.length:0);const m=d===Cs&&/\b(transform|all)(,|$)/.test(r(`${Cs}Property`).toString());return{type:d,timeout:h,propCount:p,hasTransform:m}}function Dw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Pw(n)+Pw(t[r])))}function Pw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function C3(){return document.body.offsetHeight}function S3(t,e,n){const r=t[xc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Bw=Symbol("_vod"),k3=Symbol(""),E3=/(^|;)\s*display\s*:/;function A3(t,e,n){const r=t.style,i=Zt(n),s=r.display;let o=!1;if(n&&!i){if(e&&!Zt(e))for(const l in e)n[l]==null&&Bm(r,l,"");for(const l in n)l==="display"&&(o=!0),Bm(r,l,n[l])}else if(i){if(e!==n){const l=r[k3];l&&(n+=";"+l),r.cssText=n,o=E3.test(n)}}else e&&t.removeAttribute("style");Bw in t&&(t[Bw]=o?r.display:"",r.display=s)}const $w=/\s*!important$/;function Bm(t,e,n){if(qe(n))n.forEach(r=>Bm(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=T3(t,e);$w.test(n)?t.setProperty(el(r),n.replace($w,""),"important"):t[r]=n}}const Hw=["Webkit","Moz","ms"],Tg={};function T3(t,e){const n=Tg[e];if(n)return n;let r=Mi(e);if(r!=="filter"&&r in t)return Tg[e]=r;r=gh(r);for(let i=0;i<Hw.length;i++){const s=Hw[i]+r;if(s in t)return Tg[e]=s}return e}const Fw="http://www.w3.org/1999/xlink";function _3(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Fw,e.slice(6,e.length)):t.setAttributeNS(Fw,e,n);else{const s=RD(e);n==null||s&&!tk(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function M3(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const l=t.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){t._value=n;const u=l==="OPTION"?t.getAttribute("value"):t.value,d=n??"";u!==d&&(t.value=d),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=tk(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function El(t,e,n,r){t.addEventListener(e,n,r)}function O3(t,e,n,r){t.removeEventListener(e,n,r)}const Vw=Symbol("_vei");function R3(t,e,n,r,i=null){const s=t[Vw]||(t[Vw]={}),o=s[e];if(r&&o)o.value=r;else{const[l,c]=L3(e);if(r){const u=s[e]=D3(r,i);El(t,l,u,c)}else o&&(O3(t,l,o,c),s[e]=void 0)}}const zw=/(?:Once|Passive|Capture)$/;function L3(t){let e;if(zw.test(t)){e={};let r;for(;r=t.match(zw);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):el(t.slice(2)),e]}let _g=0;const I3=Promise.resolve(),N3=()=>_g||(I3.then(()=>_g=0),_g=Date.now());function D3(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vr(P3(r,n.value),e,5,[r])};return n.value=t,n.attached=N3(),n}function P3(t,e){if(qe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Uw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,B3=(t,e,n,r,i,s,o,l,c)=>{const u=i==="svg";e==="class"?S3(t,r,u):e==="style"?A3(t,n,r):dh(e)?Q0(e)||R3(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$3(t,e,r,u))?M3(t,e,r,s,o,l,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_3(t,e,r,u))};function $3(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Uw(e)&&et(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Uw(e)&&Zt(n)?!1:e in t}const Ww=t=>{const e=t.props["onUpdate:modelValue"]||!1;return qe(e)?n=>Df(e,n):e};function H3(t){t.target.composing=!0}function jw(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mg=Symbol("_assign"),F3={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Mg]=Ww(i);const s=r||i.props&&i.props.type==="number";El(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),s&&(l=Cm(l)),t[Mg](l)}),n&&El(t,"change",()=>{t.value=t.value.trim()}),e||(El(t,"compositionstart",H3),El(t,"compositionend",jw),El(t,"change",jw))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[Mg]=Ww(s),t.composing)return;const o=i||t.type==="number"?Cm(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===l)||(t.value=l))}},V3=["ctrl","shift","alt","meta"],z3={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>V3.some(n=>t[`${n}Key`]&&!e.includes(n))},_h=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const l=z3[e[o]];if(l&&l(i,e))return}return t(i,...s)})},U3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},W3=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=el(i.key);if(e.some(o=>o===s||U3[o]===s))return t(i)})},j3=pn({patchProp:B3},y3);let Kw;function K3(){return Kw||(Kw=GP(j3))}const q3=(...t)=>{const e=K3().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=J3(r);if(!i)return;const s=e._component;!et(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,G3(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function G3(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function J3(t){return Zt(t)?document.querySelector(t):t}var Y3=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const X3=Symbol();var qw;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(qw||(qw={}));function Z3(){const t=LD(!0),e=t.run(()=>Ie({}));let n=[],r=[];const i=yh({install(s){i._a=s,s.provide(X3,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!Y3?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const $i=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Q3={};function eB(t,e){const n=vi("router-view");return Je(),Nt(n)}const tB=$i(Q3,[["render",eB]]);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Al=typeof window<"u";function nB(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const xt=Object.assign;function Og(t,e){const n={};for(const r in e){const i=e[r];n[r]=li(i)?i.map(t):t(i)}return n}const nc=()=>{},li=Array.isArray,rB=/\/$/,iB=t=>t.replace(rB,"");function Rg(t,e,n="/"){let r,i={},s="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,l>-1?l:e.length),i=t(s)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=aB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function sB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Gw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function oB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Kl(e.matched[r],n.matched[i])&&Qk(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Kl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Qk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!lB(t[n],e[n]))return!1;return!0}function lB(t,e){return li(t)?Jw(t,e):li(e)?Jw(e,t):t===e}function Jw(t,e){return li(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function aB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Cc;(function(t){t.pop="pop",t.push="push"})(Cc||(Cc={}));var rc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(rc||(rc={}));function cB(t){if(!t)if(Al){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),iB(t)}const uB=/^[^#]+#/;function fB(t,e){return t.replace(uB,"#")+e}function dB(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Mh=()=>({left:window.pageXOffset,top:window.pageYOffset});function hB(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=dB(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Yw(t,e){return(history.state?history.state.position-e:-1)+t}const $m=new Map;function pB(t,e){$m.set(t,e)}function gB(t){const e=$m.get(t);return $m.delete(t),e}let mB=()=>location.protocol+"//"+location.host;function eE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let l=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(l);return c[0]!=="/"&&(c="/"+c),Gw(c,"")}return Gw(n,t)+r+i}function yB(t,e,n,r){let i=[],s=[],o=null;const l=({state:p})=>{const m=eE(t,location),y=n.value,b=e.value;let x=0;if(p){if(n.value=m,e.value=p,o&&o===y){o=null;return}x=b?p.position-b.position:0}else r(m);i.forEach(C=>{C(n.value,y,{delta:x,type:Cc.pop,direction:x?x>0?rc.forward:rc.back:rc.unknown})})};function c(){o=n.value}function u(p){i.push(p);const m=()=>{const y=i.indexOf(p);y>-1&&i.splice(y,1)};return s.push(m),m}function d(){const{history:p}=window;p.state&&p.replaceState(xt({},p.state,{scroll:Mh()}),"")}function h(){for(const p of s)p();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function Xw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Mh():null}}function vB(t){const{history:e,location:n}=window,r={value:eE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,u,d){const h=t.indexOf("#"),p=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:mB()+t+c;try{e[d?"replaceState":"pushState"](u,"",p),i.value=u}catch(m){console.error(m),n[d?"replace":"assign"](p)}}function o(c,u){const d=xt({},e.state,Xw(i.value.back,c,i.value.forward,!0),u,{position:i.value.position});s(c,d,!0),r.value=c}function l(c,u){const d=xt({},i.value,e.state,{forward:c,scroll:Mh()});s(d.current,d,!0);const h=xt({},Xw(r.value,c,null),{position:d.position+1},u);s(c,h,!1),r.value=c}return{location:r,state:i,push:l,replace:o}}function bB(t){t=cB(t);const e=vB(t),n=yB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=xt({location:"",base:t,go:r,createHref:fB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function wB(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),bB(t)}function xB(t){return typeof t=="string"||t&&typeof t=="object"}function tE(t){return typeof t=="string"||typeof t=="symbol"}const ks={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},nE=Symbol("");var Zw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Zw||(Zw={}));function ql(t,e){return xt(new Error,{type:t,[nE]:!0},e)}function Ji(t,e){return t instanceof Error&&nE in t&&(e==null||!!(t.type&e))}const Qw="[^/]+?",CB={sensitive:!1,strict:!1,start:!0,end:!0},SB=/[.+*?^${}()[\]/\\]/g;function kB(t,e){const n=xt({},CB,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const d=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const p=u[h];let m=40+(n.sensitive?.25:0);if(p.type===0)h||(i+="/"),i+=p.value.replace(SB,"\\$&"),m+=40;else if(p.type===1){const{value:y,repeatable:b,optional:x,regexp:C}=p;s.push({name:y,repeatable:b,optional:x});const M=C||Qw;if(M!==Qw){m+=10;try{new RegExp(`(${M})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${y}" (${M}): `+A.message)}}let L=b?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;h||(L=x&&u.length<2?`(?:/${L})`:"/"+L),x&&(L+="?"),i+=L,m+=20,x&&(m+=-8),b&&(m+=-20),M===".*"&&(m+=-50)}d.push(m)}r.push(d)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function l(u){const d=u.match(o),h={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",y=s[p-1];h[y.name]=m&&y.repeatable?m.split("/"):m}return h}function c(u){let d="",h=!1;for(const p of t){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const m of p)if(m.type===0)d+=m.value;else if(m.type===1){const{value:y,repeatable:b,optional:x}=m,C=y in u?u[y]:"";if(li(C)&&!b)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const M=li(C)?C.join("/"):C;if(!M)if(x)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);d+=M}}return d||"/"}return{re:o,score:r,keys:s,parse:l,stringify:c}}function EB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function AB(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=EB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(ex(r))return 1;if(ex(i))return-1}return i.length-r.length}function ex(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const TB={type:0,value:""},_B=/[a-zA-Z0-9_]/;function MB(t){if(!t)return[[]];if(t==="/")return[[TB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let l=0,c,u="",d="";function h(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&h(),o()):c===":"?(h(),n=1):p();break;case 4:p(),n=r;break;case 1:c==="("?n=2:_B.test(c)?p():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}function OB(t,e,n){const r=kB(MB(t.path),n),i=xt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function RB(t,e){const n=[],r=new Map;e=rx({strict:!1,end:!0,sensitive:!1},e);function i(d){return r.get(d)}function s(d,h,p){const m=!p,y=LB(d);y.aliasOf=p&&p.record;const b=rx(e,d),x=[y];if("alias"in d){const L=typeof d.alias=="string"?[d.alias]:d.alias;for(const A of L)x.push(xt({},y,{components:p?p.record.components:y.components,path:A,aliasOf:p?p.record:y}))}let C,M;for(const L of x){const{path:A}=L;if(h&&A[0]!=="/"){const F=h.record.path,R=F[F.length-1]==="/"?"":"/";L.path=h.record.path+(A&&R+A)}if(C=OB(L,h,b),p?p.alias.push(C):(M=M||C,M!==C&&M.alias.push(C),m&&d.name&&!nx(C)&&o(d.name)),y.children){const F=y.children;for(let R=0;R<F.length;R++)s(F[R],C,p&&p.children[R])}p=p||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&c(C)}return M?()=>{o(M)}:nc}function o(d){if(tE(d)){const h=r.get(d);h&&(r.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){let h=0;for(;h<n.length&&AB(d,n[h])>=0&&(d.record.path!==n[h].record.path||!rE(d,n[h]));)h++;n.splice(h,0,d),d.record.name&&!nx(d)&&r.set(d.record.name,d)}function u(d,h){let p,m={},y,b;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw ql(1,{location:d});b=p.record.name,m=xt(tx(h.params,p.keys.filter(M=>!M.optional).map(M=>M.name)),d.params&&tx(d.params,p.keys.map(M=>M.name))),y=p.stringify(m)}else if("path"in d)y=d.path,p=n.find(M=>M.re.test(y)),p&&(m=p.parse(y),b=p.record.name);else{if(p=h.name?r.get(h.name):n.find(M=>M.re.test(h.path)),!p)throw ql(1,{location:d,currentLocation:h});b=p.record.name,m=xt({},h.params,d.params),y=p.stringify(m)}const x=[];let C=p;for(;C;)x.unshift(C.record),C=C.parent;return{name:b,path:y,params:m,matched:x,meta:NB(x)}}return t.forEach(d=>s(d)),{addRoute:s,resolve:u,removeRoute:o,getRoutes:l,getRecordMatcher:i}}function tx(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function LB(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:IB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function IB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function nx(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function NB(t){return t.reduce((e,n)=>xt(e,n.meta),{})}function rx(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function rE(t,e){return e.children.some(n=>n===t||rE(t,n))}const iE=/#/g,DB=/&/g,PB=/\//g,BB=/=/g,$B=/\?/g,sE=/\+/g,HB=/%5B/g,FB=/%5D/g,oE=/%5E/g,VB=/%60/g,lE=/%7B/g,zB=/%7C/g,aE=/%7D/g,UB=/%20/g;function wy(t){return encodeURI(""+t).replace(zB,"|").replace(HB,"[").replace(FB,"]")}function WB(t){return wy(t).replace(lE,"{").replace(aE,"}").replace(oE,"^")}function Hm(t){return wy(t).replace(sE,"%2B").replace(UB,"+").replace(iE,"%23").replace(DB,"%26").replace(VB,"`").replace(lE,"{").replace(aE,"}").replace(oE,"^")}function jB(t){return Hm(t).replace(BB,"%3D")}function KB(t){return wy(t).replace(iE,"%23").replace($B,"%3F")}function qB(t){return t==null?"":KB(t).replace(PB,"%2F")}function id(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function GB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(sE," "),o=s.indexOf("="),l=id(o<0?s:s.slice(0,o)),c=o<0?null:id(s.slice(o+1));if(l in e){let u=e[l];li(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function ix(t){let e="";for(let n in t){const r=t[n];if(n=jB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(li(r)?r.map(s=>s&&Hm(s)):[r&&Hm(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function JB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=li(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const YB=Symbol(""),sx=Symbol(""),xy=Symbol(""),cE=Symbol(""),Fm=Symbol("");function Ba(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ls(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(ql(4,{from:n,to:e})):h instanceof Error?l(h):xB(h)?l(ql(2,{from:e,to:h})):(s&&r.enterCallbacks[i]===s&&typeof h=="function"&&s.push(h),o())},u=t.call(r&&r.instances[i],e,n,c);let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function Lg(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let l=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(XB(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ls(u,n,r,s,o))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const d=nB(u)?u.default:u;s.components[o]=d;const p=(d.__vccOpts||d)[e];return p&&Ls(p,n,r,s,o)()}))}}return i}function XB(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ox(t){const e=Wt(xy),n=Wt(cE),r=Ne(()=>e.resolve(at(t.to))),i=Ne(()=>{const{matched:c}=r.value,{length:u}=c,d=c[u-1],h=n.matched;if(!d||!h.length)return-1;const p=h.findIndex(Kl.bind(null,d));if(p>-1)return p;const m=lx(c[u-2]);return u>1&&lx(d)===m&&h[h.length-1].path!==m?h.findIndex(Kl.bind(null,c[u-2])):p}),s=Ne(()=>i.value>-1&&t$(n.params,r.value.params)),o=Ne(()=>i.value>-1&&i.value===n.matched.length-1&&Qk(n.params,r.value.params));function l(c={}){return e$(c)?e[at(t.replace)?"replace":"push"](at(t.to)).catch(nc):Promise.resolve()}return{route:r,href:Ne(()=>r.value.href),isActive:s,isExactActive:o,navigate:l}}const ZB=bt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ox,setup(t,{slots:e}){const n=Xc(ox(t)),{options:r}=Wt(xy),i=Ne(()=>({[ax(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ax(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:$t("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),QB=ZB;function e$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function t$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!li(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function lx(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ax=(t,e,n)=>t??e??n,n$=bt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Wt(Fm),i=Ne(()=>t.route||r.value),s=Wt(sx,0),o=Ne(()=>{let u=at(s);const{matched:d}=i.value;let h;for(;(h=d[u])&&!h.components;)u++;return u}),l=Ne(()=>i.value.matched[o.value]);Bn(sx,Ne(()=>o.value+1)),Bn(YB,l),Bn(Fm,i);const c=Ie();return ri(()=>[c.value,l.value,t.name],([u,d,h],[p,m,y])=>{d&&(d.instances[h]=u,m&&m!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!Kl(d,m)||!p)&&(d.enterCallbacks[h]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=i.value,d=t.name,h=l.value,p=h&&h.components[d];if(!p)return cx(n.default,{Component:p,route:u});const m=h.props[d],y=m?m===!0?u.params:typeof m=="function"?m(u):m:null,x=$t(p,xt({},y,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(h.instances[d]=null)},ref:c}));return cx(n.default,{Component:x,route:u})||x}}});function cx(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const r$=n$;function i$(t){const e=RB(t.routes,t),n=t.parseQuery||GB,r=t.stringifyQuery||ix,i=t.history,s=Ba(),o=Ba(),l=Ba(),c=bk(ks);let u=ks;Al&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Og.bind(null,$=>""+$),h=Og.bind(null,qB),p=Og.bind(null,id);function m($,re){let ie,xe;return tE($)?(ie=e.getRecordMatcher($),xe=re):xe=$,e.addRoute(xe,ie)}function y($){const re=e.getRecordMatcher($);re&&e.removeRoute(re)}function b(){return e.getRoutes().map($=>$.record)}function x($){return!!e.getRecordMatcher($)}function C($,re){if(re=xt({},re||c.value),typeof $=="string"){const T=Rg(n,$,re.path),D=e.resolve({path:T.path},re),z=i.createHref(T.fullPath);return xt(T,D,{params:p(D.params),hash:id(T.hash),redirectedFrom:void 0,href:z})}let ie;if("path"in $)ie=xt({},$,{path:Rg(n,$.path,re.path).path});else{const T=xt({},$.params);for(const D in T)T[D]==null&&delete T[D];ie=xt({},$,{params:h(T)}),re.params=h(re.params)}const xe=e.resolve(ie,re),Xe=$.hash||"";xe.params=d(p(xe.params));const ft=sB(r,xt({},$,{hash:WB(Xe),path:xe.path})),E=i.createHref(ft);return xt({fullPath:ft,hash:Xe,query:r===ix?JB($.query):$.query||{}},xe,{redirectedFrom:void 0,href:E})}function M($){return typeof $=="string"?Rg(n,$,c.value.path):xt({},$)}function L($,re){if(u!==$)return ql(8,{from:re,to:$})}function A($){return U($)}function F($){return A(xt(M($),{replace:!0}))}function R($){const re=$.matched[$.matched.length-1];if(re&&re.redirect){const{redirect:ie}=re;let xe=typeof ie=="function"?ie($):ie;return typeof xe=="string"&&(xe=xe.includes("?")||xe.includes("#")?xe=M(xe):{path:xe},xe.params={}),xt({query:$.query,hash:$.hash,params:"path"in xe?{}:$.params},xe)}}function U($,re){const ie=u=C($),xe=c.value,Xe=$.state,ft=$.force,E=$.replace===!0,T=R(ie);if(T)return U(xt(M(T),{state:typeof T=="object"?xt({},Xe,T.state):Xe,force:ft,replace:E}),re||ie);const D=ie;D.redirectedFrom=re;let z;return!ft&&oB(r,xe,ie)&&(z=ql(16,{to:D,from:xe}),pe(xe,xe,!0,!1)),(z?Promise.resolve(z):ve(D,xe)).catch(H=>Ji(H)?Ji(H,2)?H:Ee(H):j(H,D,xe)).then(H=>{if(H){if(Ji(H,2))return U(xt({replace:E},M(H.to),{state:typeof H.to=="object"?xt({},Xe,H.to.state):Xe,force:ft}),re||D)}else H=te(D,xe,!0,E,Xe);return Ce(D,xe,H),H})}function W($,re){const ie=L($,re);return ie?Promise.reject(ie):Promise.resolve()}function ee($){const re=He.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext($):$()}function ve($,re){let ie;const[xe,Xe,ft]=s$($,re);ie=Lg(xe.reverse(),"beforeRouteLeave",$,re);for(const T of xe)T.leaveGuards.forEach(D=>{ie.push(Ls(D,$,re))});const E=W.bind(null,$,re);return ie.push(E),Le(ie).then(()=>{ie=[];for(const T of s.list())ie.push(Ls(T,$,re));return ie.push(E),Le(ie)}).then(()=>{ie=Lg(Xe,"beforeRouteUpdate",$,re);for(const T of Xe)T.updateGuards.forEach(D=>{ie.push(Ls(D,$,re))});return ie.push(E),Le(ie)}).then(()=>{ie=[];for(const T of ft)if(T.beforeEnter)if(li(T.beforeEnter))for(const D of T.beforeEnter)ie.push(Ls(D,$,re));else ie.push(Ls(T.beforeEnter,$,re));return ie.push(E),Le(ie)}).then(()=>($.matched.forEach(T=>T.enterCallbacks={}),ie=Lg(ft,"beforeRouteEnter",$,re),ie.push(E),Le(ie))).then(()=>{ie=[];for(const T of o.list())ie.push(Ls(T,$,re));return ie.push(E),Le(ie)}).catch(T=>Ji(T,8)?T:Promise.reject(T))}function Ce($,re,ie){l.list().forEach(xe=>ee(()=>xe($,re,ie)))}function te($,re,ie,xe,Xe){const ft=L($,re);if(ft)return ft;const E=re===ks,T=Al?history.state:{};ie&&(xe||E?i.replace($.fullPath,xt({scroll:E&&T&&T.scroll},Xe)):i.push($.fullPath,Xe)),c.value=$,pe($,re,ie,E),Ee()}let me;function Qe(){me||(me=i.listen(($,re,ie)=>{if(!De.listening)return;const xe=C($),Xe=R(xe);if(Xe){U(xt(Xe,{replace:!0}),xe).catch(nc);return}u=xe;const ft=c.value;Al&&pB(Yw(ft.fullPath,ie.delta),Mh()),ve(xe,ft).catch(E=>Ji(E,12)?E:Ji(E,2)?(U(E.to,xe).then(T=>{Ji(T,20)&&!ie.delta&&ie.type===Cc.pop&&i.go(-1,!1)}).catch(nc),Promise.reject()):(ie.delta&&i.go(-ie.delta,!1),j(E,xe,ft))).then(E=>{E=E||te(xe,ft,!1),E&&(ie.delta&&!Ji(E,8)?i.go(-ie.delta,!1):ie.type===Cc.pop&&Ji(E,20)&&i.go(-1,!1)),Ce(xe,ft,E)}).catch(nc)}))}let rt=Ba(),Re=Ba(),be;function j($,re,ie){Ee($);const xe=Re.list();return xe.length?xe.forEach(Xe=>Xe($,re,ie)):console.error($),Promise.reject($)}function de(){return be&&c.value!==ks?Promise.resolve():new Promise(($,re)=>{rt.add([$,re])})}function Ee($){return be||(be=!$,Qe(),rt.list().forEach(([re,ie])=>$?ie($):re()),rt.reset()),$}function pe($,re,ie,xe){const{scrollBehavior:Xe}=t;if(!Al||!Xe)return Promise.resolve();const ft=!ie&&gB(Yw($.fullPath,0))||(xe||!ie)&&history.state&&history.state.scroll||null;return bh().then(()=>Xe($,re,ft)).then(E=>E&&hB(E)).catch(E=>j(E,$,re))}const we=$=>i.go($);let _e;const He=new Set,De={currentRoute:c,listening:!0,addRoute:m,removeRoute:y,hasRoute:x,getRoutes:b,resolve:C,options:t,push:A,replace:F,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:s.add,beforeResolve:o.add,afterEach:l.add,onError:Re.add,isReady:de,install($){const re=this;$.component("RouterLink",QB),$.component("RouterView",r$),$.config.globalProperties.$router=re,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>at(c)}),Al&&!_e&&c.value===ks&&(_e=!0,A(i.location).catch(Xe=>{}));const ie={};for(const Xe in ks)Object.defineProperty(ie,Xe,{get:()=>c.value[Xe],enumerable:!0});$.provide(xy,re),$.provide(cE,gk(ie)),$.provide(Fm,c);const xe=$.unmount;He.add($),$.unmount=function(){He.delete($),He.size<1&&(u=ks,me&&me(),me=null,c.value=ks,_e=!1,be=!1),xe()}}};function Le($){return $.reduce((re,ie)=>re.then(()=>ee(ie)),Promise.resolve())}return De}function s$(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const l=e.matched[o];l&&(t.matched.find(u=>Kl(u,l))?r.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>Kl(u,c))||i.push(c))}return[n,r,i]}const o$={},l$={class:"h-20 w-full fixed z-10 border-b border-b-gray-100 bg-white"},a$={class:"h-full w-full m-auto px-2 flex flex-row justify-start items-center"};function c$(t,e){return Je(),sn("div",l$,[he("div",a$,[Bi(t.$slots,"default")])])}const u$=$i(o$,[["render",c$]]),f$="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.5%2016.6667V12.5H7.49998V16.6667M15%2016.6667H4.99998C4.07951%2016.6667%203.33331%2015.9205%203.33331%2015V5.00001C3.33331%204.07954%204.07951%203.33334%204.99998%203.33334H11.8096C12.2517%203.33334%2012.6756%203.50894%2012.9881%203.8215L16.1785%207.01186C16.4911%207.32442%2016.6666%207.74834%2016.6666%208.19037V15C16.6666%2015.9205%2015.9205%2016.6667%2015%2016.6667Z'%20stroke='black'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",d$="data:image/svg+xml,%3csvg%20width='16'%20height='17'%20viewBox='0%200%2016%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.6666%2011.5V14C14.6666%2014.9205%2013.9205%2015.6667%2013%2015.6667H2.99998C2.07951%2015.6667%201.33331%2014.9205%201.33331%2014L1.33331%2011.5M4.66665%208.16667L7.99998%2011.5M7.99998%2011.5L11.3333%208.16667M7.99998%2011.5V1.5'%20stroke='black'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",h$="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.3333%2015V12.5H6.66668V15M13.3333%2015V17.5H6.66668V15M13.3333%2015H16.6667V7.5H13.3333M6.66668%2015H3.33334V7.5H6.66668M6.66668%207.5H13.3333M6.66668%207.5V3.33333C6.66668%202.8731%207.03977%202.5%207.50001%202.5H12.5C12.9602%202.5%2013.3333%202.8731%2013.3333%203.33333V7.5'%20stroke='black'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",p$={__name:"NLink",props:{to:{type:[String,Object],default:null},href:{type:String,default:null},target:{type:String,default:"_self"},disabled:{type:Boolean,default:!1},isBlock:{type:Boolean,default:!1},hasUnderline:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const n=t,r=e,i=Ne(()=>n.to),s=Ne(()=>n.href),o=Ne(()=>!n.to&&!n.href),l=Ne(()=>o.value?"button":i.value?"router-link":"a"),c=Ne(()=>o.value?{type:"button",disabled:n.disabled}:i.value?{to:n.to,target:n.target}:{href:n.href,target:n.target}),u=d=>{if(n.disabled){d.preventDefault();return}r("click",d)};return(d,h)=>(Je(),Nt(gP(l.value),Jk(c.value,{class:[{"n-link--disabled":t.disabled,"n-link--block":t.isBlock,"n-link--hasUnderline":t.hasUnderline},"n-link"],href:s.value?t.href:null,to:i.value?t.to:null,onClick:u}),{default:ge(()=>[Bi(d.$slots,"default",{},void 0,!0)]),_:3},16,["class","href","to"]))}},ic=$i(p$,[["__scopeId","data-v-30dc834c"]]),g$={class:"flex flex-row justify-start items-cente gap-8 ml-8"},m$=he("img",{alt:"Save",src:f$},null,-1),y$=he("span",{class:"block sm:hidden"},"",-1),v$=he("img",{alt:"Save",src:d$},null,-1),b$=he("span",{class:"block sm:hidden"},"",-1),w$=he("img",{alt:"Save",src:h$},null,-1),x$=he("span",{class:"block sm:hidden"},"",-1),C$=bt({__name:"MenuList",emits:["saveTemplate","loadTemplate","exportTemplate","editRegularWords","editTables"],setup(t,{emit:e}){const n=e,r=()=>{n("saveTemplate")},i=()=>{n("loadTemplate")},s=()=>{n("exportTemplate")};return(o,l)=>(Je(),sn("div",g$,[J(ic,{onClick:r},{default:ge(()=>[m$,y$]),_:1}),J(ic,{onClick:i},{default:ge(()=>[v$,b$]),_:1}),J(ic,{onClick:s},{default:ge(()=>[w$,x$]),_:1})]))}}),S$=""+new URL("../../assets/1.4.137.logo.CHQpCNMA.png",import.meta.url).href,k$={},E$={class:"h-10"},A$=he("img",{class:"h-full",alt:"GRAMICCI",src:S$},null,-1),T$=[A$];function _$(t,e){return Je(),sn("div",E$,T$)}const M$=$i(k$,[["render",_$]]);var Vm=(t=>(t[t.DEFAULT=1]="DEFAULT",t[t.TOGGLE=2]="TOGGLE",t))(Vm||{});const O$=bt({__name:"NButton",props:{buttonType:{type:Number,default:Vm.DEFAULT},isActive:{type:Boolean,default:!0}},emits:["click"],setup(t,{emit:e}){const n=e;function r(){n("click")}return(i,s)=>(Je(),sn("button",{class:Oi([{"n-button__toggle":t.buttonType===at(Vm).TOGGLE,"n-button__toggle--unactive":!t.isActive},"n-button"]),onClick:r,type:"button"},[Bi(i.$slots,"default",{},void 0,!0)],2))}}),R$=$i(O$,[["__scopeId","data-v-a959eea7"]]),L$={class:"w-screen h-screen fixed top-0 left-0 z-10 bg-gray-300 p-5 overflow-y-scroll"},I$={class:"flex justify-end items-center flex-row"},N$={class:"w-full max-w-3xl mx-auto"},D$={class:"text-3xl font-medium mb-6"},P$={__name:"FullPageModal",props:{title:{type:String,default:()=>{}}},emits:["close"],setup(t,{emit:e}){const n=e,r=()=>{n("close")};return(i,s)=>(Je(),sn("div",L$,[he("div",I$,[J(R$,{onClick:r},{default:ge(()=>[yr("")]),_:1})]),he("div",N$,[he("div",D$,Yc(t.title),1),he("div",null,[Bi(i.$slots,"default")])])]))}},B$={id:"export-template",class:"w-full"},$$={class:"mt-5 bg-white rounded-lg p-5"},H$={class:"flex justify-end items-center"},F$={key:0,class:"text-sm mr-4 text-green-700 font-bold"},V$={class:"mt-2 text-gray-800 break-words"},z$=bt({__name:"ExportTemplate",props:{savedData:{type:String,default:""}},setup(t){const e=t,n=Ie(!1),r=()=>{const i=document.createElement("textarea");i.value=e.savedData,document.getElementById("export-template").appendChild(i),i.select(),document.execCommand("Copy"),document.getElementById("export-template").removeChild(i),n.value=!0,setTimeout(()=>{n.value=!1},800)};return(i,s)=>(Je(),sn("div",B$,[he("div",$$,[he("div",H$,[J(Th,null,{default:ge(()=>[n.value?(Je(),sn("div",F$,"")):Wn("",!0)]),_:1}),J(ic,{onClick:r,hasUnderline:""},{default:ge(()=>[yr("")]),_:1})]),he("div",V$,Yc(t.savedData),1)])]))}}),U$=$i(z$,[["__scopeId","data-v-c208905a"]]);function kn(t){this.content=t}kn.prototype={constructor:kn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new kn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new kn(n)},addToStart:function(t,e){return new kn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new kn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new kn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=kn.from(t),t.size?new kn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=kn.from(t),t.size?new kn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=kn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};kn.from=function(t){if(t instanceof kn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new kn(e)};function uE(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=uE(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function fE(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),c=o.nodeSize;if(o==l){n-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let u=0,d=Math.min(o.text.length,l.text.length);for(;u<d&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let u=fE(o.content,l.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class Y{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let c=this.content[o],u=l+c.nodeSize;if(u>e&&r(c,i+l,s||null,o)!==!1&&c.content.size){let d=l+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,n-c):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Y(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],c=o+l.nodeSize;c>e&&((o<e||c>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=c}return new Y(r,i)}cutByIndex(e,n){return e==n?Y.empty:e==0&&n==this.content.length?this:new Y(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Y(i,s)}addToStart(e){return new Y([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Y(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return uE(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return fE(this,e,n,r)}findIndex(e,n=-1){if(e==0)return cf(0,e);if(e==this.size)return cf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?cf(r+1,o):cf(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Y.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Y(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Y.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Y(n||e,r)}static from(e){if(!e)return Y.empty;if(e instanceof Y)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Y([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Y.empty=new Y([],0);const Ig={index:0,offset:0};function cf(t,e){return Ig.index=t,Ig.offset=e,Ig}function sd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!sd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!sd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Tt=class zm{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&sd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return zm.none;if(e instanceof zm)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Tt.none=[];class od extends Error{}class le{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=hE(this.content,e+this.openStart,n);return r&&new le(r,this.openStart,this.openEnd)}removeBetween(e,n){return new le(dE(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return le.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(Y.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new le(e,r,i)}}le.empty=new le(Y.empty,0,0);function dE(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(dE(s.content,e-i-1,n-i-1)))}function hE(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=hE(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function W$(t,e,n){if(n.openStart>t.depth)throw new od("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new od("Inconsistent open depths");return pE(t,e,n,0)}function pE(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=pE(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return $o(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=j$(n,t);return $o(s,mE(t,o,l,e,r))}else return $o(s,ld(t,e,r))}function gE(t,e){if(!e.type.compatibleContent(t.type))throw new od("Cannot join "+e.type.name+" onto "+t.type.name)}function Um(t,e,n){let r=t.node(n);return gE(r,e.node(n)),r}function Bo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function sc(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Bo(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Bo(i.child(l),r);e&&e.depth==n&&e.textOffset&&Bo(e.nodeBefore,r)}function $o(t,e){return t.type.checkContent(e),t.copy(e)}function mE(t,e,n,r,i){let s=t.depth>i&&Um(t,e,i+1),o=r.depth>i&&Um(n,r,i+1),l=[];return sc(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(gE(s,o),Bo($o(s,mE(t,e,n,r,i+1)),l)):(s&&Bo($o(s,ld(t,e,i+1)),l),sc(e,n,i,l),o&&Bo($o(o,ld(n,r,i+1)),l)),sc(r,null,i,l),new Y(l)}function ld(t,e,n){let r=[];if(sc(null,t,n,r),t.depth>n){let i=Um(t,e,n+1);Bo($o(i,ld(t,e,n+1)),r)}return sc(e,null,n,r),new Y(r)}function j$(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Y.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Sc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Tt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new kc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(s),u=s-c;if(r.push(o,l,i+c),!u||(o=o.child(l),o.isText))break;s=u-1,i+=c+1}return new Sc(n,r,s)}static resolveCached(e,n){let r=ux.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else ux.set(e,r=new K$);let i=r.elts[r.i]=Sc.resolve(e,n);return r.i=(r.i+1)%q$,i}}class K${constructor(){this.elts=[],this.i=0}}const q$=12,ux=new WeakMap;class kc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const G$=Object.create(null);let Ho=class Wm{constructor(e,n,r,i=Tt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Y.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&sd(this.attrs,n||e.defaultAttrs||G$)&&Tt.sameSet(this.marks,r||Tt.none)}copy(e=null){return e==this.content?this:new Wm(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Wm(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return le.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new le(u,i.depth-o,s.depth-o)}replace(e,n,r){return W$(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Sc.resolveCached(this,e)}resolveNoCache(e){return Sc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),yE(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Y.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Tt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Tt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Y.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Ho.prototype.text=void 0;class ad extends Ho{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):yE(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ad(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ad(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function yE(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ko{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new J$(e,n);if(r.next==null)return Ko.empty;let i=vE(r);r.next&&r.err("Unexpected trailing text");let s=nH(tH(i));return rH(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let c=o.matchFragment(e,r);if(c&&(!n||c.validEnd))return Y.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:h}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let p=s(h,l.concat(d));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:c}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Ko.empty=new Ko(!0);class J${constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function vE(t){let e=[];do e.push(Y$(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Y$(t){let e=[];do e.push(X$(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function X$(t){let e=eH(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Z$(t,e);else break;return e}function fx(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Z$(t,e){let n=fx(t),r=n;return t.eat(",")&&(t.next!="}"?r=fx(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Q$(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function eH(t){if(t.eat("(")){let e=vE(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Q$(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function tH(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,c){let u={term:c,to:l};return e[o].push(u),u}function i(o,l){o.forEach(c=>c.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(o.type=="seq")for(let c=0;;c++){let u=s(o.exprs[c],l);if(c==o.exprs.length-1)return u;i(u,l=n())}else if(o.type=="star"){let c=n();return r(l,c),i(s(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return i(s(o.expr,l),c),i(s(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let c=l;for(let u=0;u<o.min;u++){let d=n();i(s(o.expr,c),d),c=d}if(o.max==-1)i(s(o.expr,c),c);else for(let u=o.min;u<o.max;u++){let d=n();r(c,d),i(s(o.expr,c),d),c=d}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function bE(t,e){return e-t}function dx(t,e){let n=[];return r(e),n.sort(bE);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:c}=s[o];!l&&n.indexOf(c)==-1&&r(c)}}}function nH(t){let e=Object.create(null);return n(dx(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let d=0;d<i.length;d++)i[d][0]==l&&(u=i[d][1]);dx(t,c).forEach(d=>{u||i.push([l,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[r.join(",")]=new Ko(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(bE);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function rH(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:c,next:u}=i.next[l];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function wE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function xE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function CE(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function SE(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new sH(t,r,e[r]);return n}let hx=class kE{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=SE(e,r.attrs),this.defaultAttrs=wE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ko.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:xE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ho(this,this.computeAttrs(e),Y.from(n),Tt.setFrom(r))}createChecked(e=null,n,r){return n=Y.from(n),this.checkContent(n),new Ho(this,this.computeAttrs(e),n,Tt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Y.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Y.empty,!0);return s?new Ho(this,e,n.append(s),Tt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){CE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Tt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new kE(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function iH(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class sH{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?iH(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Oh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=SE(e,i.attrs),this.excluded=null;let s=wE(this.attrs);this.instance=s?new Tt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Tt(this,xE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Oh(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){CE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class EE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=kn.from(e.nodes),n.marks=kn.from(e.marks||{}),this.nodes=hx.compile(this.spec.nodes,this),this.marks=Oh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Ko.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?px(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:px(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof hx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ad(r,r.defaultAttrs,e,Tt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ho.fromJSON(this,e)}markFromJSON(e){return Tt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function px(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let c=t.marks[l];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function oH(t){return t.tag!=null}function lH(t){return t.style!=null}let oc=class jm{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(oH(i))this.tags.push(i);else if(lH(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new mx(this,n,!1);return r.addAll(e,Tt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new mx(this,n,!0);return r.addAll(e,Tt.none,n.from,n.to),le.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(uH(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=yx(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=yx(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new jm(e,jm.schemaRules(e)))}};const AE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aH={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},TE={ol:!0,ul:!0},cd=1,ud=2,lc=4;function gx(t,e,n){return e!=null?(e?cd:0)|(e==="full"?ud:0):t&&t.whitespace=="pre"?cd|ud:n&~lc}class uf{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Tt.none,this.match=s||(o&lc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Y.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&cd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Y.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Y.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!AE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class mx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=gx(null,n.preserveWhitespace,0)|(r?lc:0);i?s=new uf(i.type,i.attrs,Tt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new uf(null,null,Tt.none,!0,null,o):s=new uf(e.schema.topNodeType,null,Tt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top;if(i.options&ud||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&cd)i.options&ud?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=e.nodeName.toLowerCase(),s;TE.hasOwnProperty(i)&&this.parser.normalizeLists&&cH(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));if(o?o.ignore:aH.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,c=this.top,u=this.needsBlock;if(AE.hasOwnProperty(i))c.content.length&&c.content[0].isInline&&this.open&&(this.open--,c=this.top),l=!0,c.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let d=o&&o.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),l&&this.sync(c),this.needsBlock=u}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,o,l,o.consuming===!1?s:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(s,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],l=o.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=o,!l.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=Tt.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):vx(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=gx(e,s,o.options);o.options&lc&&o.content.length==0&&(l|=lc);let c=Tt.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):vx(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new uf(e,n,c,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,c)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;c>=s;c--)if(o(l-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!d||d.name!=u&&d.groups.indexOf(u)==-1)return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function cH(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&TE.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function uH(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function yx(t){let e={};for(let n in t)e[n]=t[n];return e}function vx(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:d}=l.edge(c);if(u==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class rl{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ng(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,c=0;for(;l<s.length&&c<o.marks.length;){let u=o.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let u=o.marks[c++],d=this.serializeMark(u,o.isInline,n);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Bf(Ng(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Bf(Ng(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Bf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new rl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bx(e.marks)}}function bx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ng(t){return t.document||window.document}const wx=new WeakMap;function fH(t){let e=wx.get(t);return e===void 0&&wx.set(t,e=dH(t)),e}function dH(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Bf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=fH(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,c=n?t.createElementNS(n,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let p=h.indexOf(" ");p>0?c.setAttributeNS(h.slice(0,p),h.slice(p+1),u[h]):c.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let p=e[h];if(p===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:m,contentDOM:y}=Bf(t,p,n,r);if(c.appendChild(m),y){if(l)throw new RangeError("Multiple content holes");l=y}}}return{dom:c,contentDOM:l}}const _E=65535,ME=Math.pow(2,16);function hH(t,e){return t+e*ME}function xx(t){return t&_E}function pH(t){return(t-(t&_E))/ME}const OE=1,RE=2,$f=4,LE=8;class Km{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&LE)>0}get deletedBefore(){return(this.delInfo&(OE|$f))>0}get deletedAfter(){return(this.delInfo&(RE|$f))>0}get deletedAcross(){return(this.delInfo&$f)>0}}class mr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&mr.empty)return mr.empty}recover(e){let n=0,r=xx(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+pH(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[l+s],d=this.ranges[l+o],h=c+u;if(e<=h){let p=u?e==c?-1:e==h?1:n:n,m=c+i+(p<0?0:d);if(r)return m;let y=e==(n<0?c:h)?null:hH(l/3,e-c),b=e==c?RE:e==h?OE:$f;return(n<0?e!=c:e!=h)&&(b|=LE),new Km(m,b,y)}i+=d-u}return r?e+i:new Km(e+i,0,null)}touches(e,n){let r=0,i=xx(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[l+s],d=c+u;if(e<=d&&l==i*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),c=o+(this.inverted?0:s),u=this.ranges[i+n],d=this.ranges[i+r];e(l,l+u,c,c+d),s+=d-u}}invert(){return new mr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?mr.empty:new mr(e<0?[0,-e,0]:[0,0,e])}}mr.empty=new mr([]);class Bl{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Bl(this.maps,this.mirror,e,n)}copy(){return new Bl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Bl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,n);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this.maps[c].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Km(e,i,null)}}const Dg=Object.create(null);class Hn{getMap(){return mr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Dg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Dg)throw new RangeError("Duplicate use of step JSON ID "+e);return Dg[e]=n,n.prototype.jsonID=e,n}}class rn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new rn(e,null)}static fail(e){return new rn(null,e)}static fromReplace(e,n,r,i){try{return rn.ok(e.replace(n,r,i))}catch(s){if(s instanceof od)return rn.fail(s.message);throw s}}}function Cy(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Cy(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Y.fromArray(r)}class Fs extends Hn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new le(Cy(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return rn.fromReplace(e,this.from,this.to,s)}invert(){return new Ai(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Fs(n.pos,r.pos,this.mark)}merge(e){return e instanceof Fs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fs(n.from,n.to,e.markFromJSON(n.mark))}}Hn.jsonID("addMark",Fs);class Ai extends Hn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new le(Cy(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return rn.fromReplace(e,this.from,this.to,r)}invert(){return new Fs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ai(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ai&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ai(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ai(n.from,n.to,e.markFromJSON(n.mark))}}Hn.jsonID("removeMark",Ai);class Vs extends Hn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return rn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return rn.fromReplace(e,this.pos,this.pos+1,new le(Y.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Vs(this.pos,n.marks[i]);return new Vs(this.pos,this.mark)}}return new Gl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Vs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Vs(n.pos,e.markFromJSON(n.mark))}}Hn.jsonID("addNodeMark",Vs);class Gl extends Hn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return rn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return rn.fromReplace(e,this.pos,this.pos+1,new le(Y.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Vs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gl(n.pos,e.markFromJSON(n.mark))}}Hn.jsonID("removeNodeMark",Gl);class vn extends Hn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&qm(e,this.from,this.to)?rn.fail("Structure replace would overwrite content"):rn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new mr([this.from,this.to-this.from,this.slice.size])}invert(e){return new vn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vn(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof vn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vn(n.from,n.to,le.fromJSON(e,n.slice),!!n.structure)}}Hn.jsonID("replace",vn);class bn extends Hn{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(qm(e,this.from,this.gapFrom)||qm(e,this.gapTo,this.to)))return rn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return rn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?rn.fromReplace(e,this.from,this.to,r):rn.fail("Content does not fit in gap")}getMap(){return new mr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new bn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new bn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new bn(n.from,n.to,n.gapFrom,n.gapTo,le.fromJSON(e,n.slice),n.insert,!!n.structure)}}Hn.jsonID("replaceAround",bn);function qm(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function gH(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(c,u,d)=>{if(!c.isInline)return;let h=c.marks;if(!r.isInSet(h)&&d.type.allowsMarkType(r.type)){let p=Math.max(u,e),m=Math.min(u+c.nodeSize,n),y=r.addToSet(h);for(let b=0;b<h.length;b++)h[b].isInSet(y)||(o&&o.to==p&&o.mark.eq(h[b])?o.to=m:i.push(o=new Ai(p,m,h[b])));l&&l.to==p?l.to=m:s.push(l=new Fs(p,m,r))}}),i.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function mH(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let c=null;if(r instanceof Oh){let u=o.marks,d;for(;d=r.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let u=Math.min(l+o.nodeSize,n);for(let d=0;d<c.length;d++){let h=c[d],p;for(let m=0;m<i.length;m++){let y=i[m];y.step==s-1&&h.eq(i[m].style)&&(p=y)}p?(p.to=u,p.step=s):i.push({style:h,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>t.step(new Ai(o.from,o.to,o.style)))}function IE(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),d=l+u.nodeSize,h=r.matchType(u.type);if(!h)o.push(new vn(l,d,le.empty));else{r=h;for(let p=0;p<u.marks.length;p++)n.allowsMarkType(u.marks[p].type)||t.step(new Ai(l,d,u.marks[p]));if(i&&u.isText&&n.whitespace!="pre"){let p,m=/\r?\n|\r/g,y;for(;p=m.exec(u.text);)y||(y=new le(Y.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new vn(l+p.index,l+p.index+p[0].length,y))}}l=d}if(!r.validEnd){let c=r.fillBefore(Y.empty,!0);t.replace(l,l,new le(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function yH(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function fa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!yH(i,s,o))break}return null}function vH(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),c=o,u=l,d=Y.empty,h=0;for(let y=s,b=!1;y>n;y--)b||r.index(y)>0?(b=!0,d=Y.from(r.node(y).copy(d)),h++):c--;let p=Y.empty,m=0;for(let y=s,b=!1;y>n;y--)b||i.after(y+1)<i.end(y)?(b=!0,p=Y.from(i.node(y).copy(p)),m++):u++;t.step(new bn(c,u,o,l,new le(d.append(p),h,m),d.size-h,!0))}function Sy(t,e,n=null,r=t){let i=bH(t,e),s=i&&wH(r,e);return s?i.map(Cx).concat({type:e,attrs:n}).concat(s.map(Cx)):null}function Cx(t){return{type:t,attrs:null}}function bH(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function wH(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:o}function xH(t,e,n){let r=Y.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Y.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new bn(i,s,i,s,new le(r,0,0),n.length,!0))}function CH(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,c)&&EH(t.doc,t.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!y?u=!1:!m&&y&&(u=!0)}u===!1&&kH(t,o,l,s),IE(t,t.mapping.slice(s).map(l,1),r,void 0,u===null);let d=t.mapping.slice(s),h=d.map(l,1),p=d.map(l+o.nodeSize,1);return t.step(new bn(h,p,h+1,p-1,new le(Y.from(r.create(c,null,o.marks)),0,0),1,!0)),u===!0&&SH(t,o,l,s),!1}})}function SH(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let c=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function kH(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function EH(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function AH(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new bn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new le(Y.from(o),0,0),1,!0))}function $l(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=n-2;u>s;u--,d--){let h=i.node(u),p=i.index(u);if(h.type.spec.isolating)return!1;let m=h.content.cutByIndex(p,h.childCount),y=r&&r[d+1];y&&(m=m.replaceChild(0,y.type.create(y.attrs)));let b=r&&r[d]||h;if(!h.canReplace(p+1,h.childCount)||!b.type.validContent(m))return!1}let l=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(l,l,c?c.type:i.node(s+1).type)}function TH(t,e,n=1,r){let i=t.doc.resolve(e),s=Y.empty,o=Y.empty;for(let l=i.depth,c=i.depth-n,u=n-1;l>c;l--,u--){s=Y.from(i.node(l).copy(s));let d=r&&r[u];o=Y.from(d?d.type.create(d.attrs,o):i.node(l).copy(o))}t.step(new vn(e,e,new le(s.append(o),n,n),!0))}function no(t,e){let n=t.resolve(e),r=n.index();return NE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function NE(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Rh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&NE(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function _H(t,e,n){let r=new vn(e-n,e+n,le.empty,!0);t.step(r)}function MH(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function DE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),u=r.node(o),d=!1;if(s==1)d=u.canReplace(c,c,i);else{let h=u.contentMatchAt(c).findWrapping(i.firstChild.type);d=h&&u.canReplaceWith(c,c,h[0])}if(d)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Lh(t,e,n=e,r=le.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return PE(i,s,r)?new vn(e,n,r):new OH(i,s,r).fit()}function PE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class OH{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Y.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Y.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let c=new le(s,o,l);return e>-1?new bn(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new vn(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Pg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],d,h=null;if(n==1&&(o?u.matchType(o.type)||(h=u.fillBefore(Y.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:h};if(n==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Pg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new le(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Pg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new le(ja(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new le(ja(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-e,u=0,d=[],{match:h,type:p}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)d.push(i.child(b));h=h.matchFragment(i)}let m=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let b=l.child(u),x=h.matchType(b.type);if(!x)break;u++,(u>1||c==0||b.content.size)&&(h=x,d.push(BE(b.mark(p.allowedMarks(b.marks)),u==1?c:0,u==l.childCount?m:-1)))}let y=u==l.childCount;y||(m=-1),this.placed=Ka(this.placed,n,Y.from(d)),this.frontier[n].match=h,y&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,x=l;b<m;b++){let C=x.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),x=C.content}this.unplaced=y?e==0?le.empty:new le(ja(o.content,e-1,1),e-1,m<0?o.openEnd:e-1):new le(ja(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Bg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Bg(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],d=Bg(e,l,u,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ka(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ka(this.placed,this.depth,Y.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Y.empty,!0);n.childCount&&(this.placed=Ka(this.placed,this.frontier.length,n))}}function ja(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ja(t.firstChild.content,e-1,n)))}function Ka(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ka(t.lastChild.content,e-1,n)))}function Pg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function BE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,BE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Y.empty,!0)))),t.copy(r)}function Bg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!RH(n,s.content,o)?l:null}function RH(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function LH(t){return t.spec.defining||t.spec.definingForContent}function IH(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(PE(i,s,r))return t.step(new vn(e,n,r));let o=HE(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let y=i.node(p).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;o.indexOf(p)>-1?l=p:i.before(p)==m&&o.splice(1,0,-p)}let c=o.indexOf(l),u=[],d=r.openStart;for(let p=r.content,m=0;;m++){let y=p.firstChild;if(u.push(y),m==r.openStart)break;p=y.content}for(let p=d-1;p>=0;p--){let m=u[p],y=LH(m.type);if(y&&!m.sameMarkup(i.node(Math.abs(l)-1)))d=p;else if(y||!m.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let m=(p+d+1)%(r.openStart+1),y=u[m];if(y)for(let b=0;b<o.length;b++){let x=o[(b+c)%o.length],C=!0;x<0&&(C=!1,x=-x);let M=i.node(x-1),L=i.index(x-1);if(M.canReplaceWith(L,L,y.type,y.marks))return t.replace(i.before(x),C?s.after(x):n,new le($E(r.content,0,r.openStart,m),m,r.openEnd))}}let h=t.steps.length;for(let p=o.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>h));p--){let m=o[p];m<0||(e=i.before(m),n=s.after(m))}}function $E(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy($E(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Y.empty,!0))}return t}function NH(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=MH(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new le(Y.from(r),0,0))}function DH(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=HE(r,i);for(let o=0;o<s.length;o++){let l=s[o],c=o==s.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function HE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Hl extends Hn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return rn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return rn.fromReplace(e,this.pos,this.pos+1,new le(Y.from(i),0,n.isLeaf?0:1))}getMap(){return mr.empty}invert(e){return new Hl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hl(n.pos,n.attr,n.value)}}Hn.jsonID("attr",Hl);class Ec extends Hn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return rn.ok(r)}getMap(){return mr.empty}invert(e){return new Ec(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ec(n.attr,n.value)}}Hn.jsonID("docAttr",Ec);let Jl=class extends Error{};Jl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Jl.prototype=Object.create(Error.prototype);Jl.prototype.constructor=Jl;Jl.prototype.name="TransformError";class ky{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Bl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Jl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=le.empty){let i=Lh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new le(Y.from(r),0,0))}delete(e,n){return this.replace(e,n,le.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return IH(this,e,n,r),this}replaceRangeWith(e,n,r){return NH(this,e,n,r),this}deleteRange(e,n){return DH(this,e,n),this}lift(e,n){return vH(this,e,n),this}join(e,n=1){return _H(this,e,n),this}wrap(e,n){return xH(this,e,n),this}setBlockType(e,n=e,r,i=null){return CH(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return AH(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Hl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ec(e,n)),this}addNodeMark(e,n){return this.step(new Vs(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Tt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Gl(e,n)),this}split(e,n=1,r){return TH(this,e,n,r),this}addMark(e,n,r){return gH(this,e,n,r),this}removeMark(e,n,r){return mH(this,e,n,r),this}clearIncompatible(e,n,r){return IE(this,e,n,r),this}}const $g=Object.create(null);class We{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Ey(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=le.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:u}=o[l],d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(u.pos),l?le.empty:n),l==0&&Ex(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],c=e.mapping.slice(r),u=c.map(o.pos),d=c.map(l.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,n),Ex(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Be(e):Tl(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Tl(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Tl(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ii(e.node(0))}static atStart(e){return Tl(e,e,0,0,1)||new ii(e)}static atEnd(e){return Tl(e,e,e.content.size,e.childCount,-1)||new ii(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=$g[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in $g)throw new RangeError("Duplicate use of selection JSON ID "+e);return $g[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}We.prototype.visible=!0;class Ey{constructor(e,n){this.$from=e,this.$to=n}}let Sx=!1;function kx(t){!Sx&&!t.parent.inlineContent&&(Sx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends We{constructor(e,n=e){kx(e),kx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return We.near(r);let i=e.resolve(n.map(this.anchor));return new Be(i.parent.inlineContent?i:r,r)}replace(e,n=le.empty){if(super.replace(e,n),n==le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ih(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=We.findFrom(n,r,!0)||We.findFrom(n,-r,!0);if(s)n=s.$head;else return We.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(We.findFrom(e,-r,!0)||We.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Be(e,n)}}We.jsonID("text",Be);class Ih{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ih(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class $e extends We{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?We.near(s):new $e(s)}content(){return new le(Y.from(this.node),0,0)}eq(e){return e instanceof $e&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ay(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new $e(e.resolve(n.anchor))}static create(e,n){return new $e(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}$e.prototype.visible=!1;We.jsonID("node",$e);class Ay{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ih(r,r):new Ay(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&$e.isSelectable(r)?new $e(n):We.near(n)}}class ii extends We{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=le.empty){if(n==le.empty){e.delete(0,e.doc.content.size);let r=We.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ii(e)}map(e){return new ii(e)}eq(e){return e instanceof ii}getBookmark(){return PH}}We.jsonID("all",ii);const PH={map(){return this},resolve(t){return new ii(t)}};function Tl(t,e,n,r,i,s=!1){if(e.inlineContent)return Be.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&$e.isSelectable(l))return $e.create(t,n-(i<0?l.nodeSize:0))}else{let c=Tl(t,l,n+i,i<0?l.childCount:0,i,s);if(c)return c}n+=l.nodeSize*i}return null}function Ex(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof vn||i instanceof bn))return;let s=t.mapping.maps[r],o;s.forEach((l,c,u,d)=>{o==null&&(o=d)}),t.setSelection(We.near(t.doc.resolve(o),n))}const Ax=1,ff=2,Tx=4;let BH=class extends ky{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ax)&~ff,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ax)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ff,this}ensureMarks(e){return Tt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ff)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~ff,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Tt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(We.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Tx,this}get scrolledIntoView(){return(this.updated&Tx)>0}};function _x(t,e){return!e||!t?t:t.bind(e)}class qa{constructor(e,n,r){this.name=e,this.init=_x(n.init,r),this.apply=_x(n.apply,r)}}const $H=[new qa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new qa("selection",{init(t,e){return t.selection||We.atStart(e.doc)},apply(t){return t.selection}}),new qa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new qa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Hg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=$H.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qa(r.key,r.spec.state,r))})}}class Rl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=i?i[o].n:0,u=i?i[o].state:this,d=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,u,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Rl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new BH(this)}static create(e){let n=new Hg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Rl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Hg(this.schema,e.plugins),r=n.fields,i=new Rl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Hg(e.schema,e.plugins),s=new Rl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ho.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=We.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=u.fromJSON.call(c,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function FE(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=FE(i,e,{})),n[r]=i}return n}class Ft{constructor(e){this.spec=e,this.props={},e.props&&FE(e.props,this,this.props),this.key=e.key?e.key.key:VE("plugin")}getState(e){return e[this.key]}}const Fg=Object.create(null);function VE(t){return t in Fg?t+"$"+ ++Fg[t]:(Fg[t]=0,t+"$")}class Kt{constructor(e="key"){this.key=VE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const En=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ac=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Gm=null;const es=function(t,e,n){let r=Gm||(Gm=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},HH=function(){Gm=null},qo=function(t,e,n,r){return n&&(Mx(t,e,n,r,-1)||Mx(t,e,n,r,1))},FH=/^(img|br|input|textarea|hr)$/i;function Mx(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Br(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Qc(t)||FH.test(t.nodeName)||t.contentEditable=="false")return!1;e=En(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Br(t):0}else return!1}}function Br(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function VH(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Br(t)}else if(t.parentNode&&!Qc(t))e=En(t),t=t.parentNode;else return null}}function zH(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Qc(t))e=En(t)+1,t=t.parentNode;else return null}}function UH(t,e,n){for(let r=e==0,i=e==Br(t);r||i;){if(t==n)return!0;let s=En(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Br(t)}}function Qc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Nh=function(t){return t.focusNode&&qo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Eo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function WH(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function jH(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Br(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Br(r.startContainer),r.startOffset)}}}const Ri=typeof navigator<"u"?navigator:null,Ox=typeof document<"u"?document:null,ro=Ri&&Ri.userAgent||"",Jm=/Edge\/(\d+)/.exec(ro),zE=/MSIE \d/.exec(ro),Ym=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ro),nr=!!(zE||Ym||Jm),Gs=zE?document.documentMode:Ym?+Ym[1]:Jm?+Jm[1]:0,ai=!nr&&/gecko\/(\d+)/i.test(ro);ai&&+(/Firefox\/(\d+)/.exec(ro)||[0,0])[1];const Xm=!nr&&/Chrome\/(\d+)/.exec(ro),Dn=!!Xm,UE=Xm?+Xm[1]:0,Kn=!nr&&!!Ri&&/Apple Computer/.test(Ri.vendor),Yl=Kn&&(/Mobile\/\w+/.test(ro)||!!Ri&&Ri.maxTouchPoints>2),Pr=Yl||(Ri?/Mac/.test(Ri.platform):!1),KH=Ri?/Win/.test(Ri.platform):!1,Zr=/Android \d/.test(ro),eu=!!Ox&&"webkitFontSmoothing"in Ox.documentElement.style,qH=eu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function GH(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Yi(t,e){return typeof t=="number"?t:t[e]}function JH(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Rx(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Ac(o)){if(o.nodeType!=1)continue;let l=o,c=l==s.body,u=c?GH(s):JH(l),d=0,h=0;if(e.top<u.top+Yi(r,"top")?h=-(u.top-e.top+Yi(i,"top")):e.bottom>u.bottom-Yi(r,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+Yi(i,"top")-u.top:e.bottom-u.bottom+Yi(i,"bottom")),e.left<u.left+Yi(r,"left")?d=-(u.left-e.left+Yi(i,"left")):e.right>u.right-Yi(r,"right")&&(d=e.right-u.right+Yi(i,"right")),d||h)if(c)s.defaultView.scrollBy(d,h);else{let p=l.scrollLeft,m=l.scrollTop;h&&(l.scrollTop+=h),d&&(l.scrollLeft+=d);let y=l.scrollLeft-p,b=l.scrollTop-m;e={left:e.left-y,top:e.top-b,right:e.right-y,bottom:e.bottom-b}}if(c||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function YH(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,i=c.top;break}}return{refDOM:r,refTop:i,stack:WE(t.dom)}}function WE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ac(r));return e}function XH({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;jE(n,r==0?0:r-e)}function jE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Cl=null;function ZH(t){if(t.setActive)return t.setActive();if(Cl)return t.focus(Cl);let e=WE(t);t.focus(Cl==null?{get preventScroll(){return Cl={preventScroll:!0},!0}}:void 0),Cl||(Cl=!1,jE(e,0))}function KE(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,c,u;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=es(d).getClientRects();else continue;for(let m=0;m<p.length;m++){let y=p[m];if(y.top<=o&&y.bottom>=l){o=Math.max(y.bottom,o),l=Math.min(y.top,l);let b=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(b<r){n=d,r=b,i=b&&n.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,d.nodeType==1&&b&&(s=h+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!c&&y.left<=e.left&&y.right>=e.left&&(c=d,u={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!n&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(s=h+1)}}return!n&&c&&(n=c,i=u,r=0),n&&n.nodeType==3?QH(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:KE(n,i)}function QH(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=As(r,1);if(s.top!=s.bottom&&Ty(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Ty(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eF(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tF(t,e,n){let{node:r,offset:i}=KE(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function nF(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let c=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!o&&c.left>r.left||c.top>r.top?i=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function qE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(Ty(e,u))return qE(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function rF(t,e){let n=t.dom.ownerDocument,r,i=0,s=jH(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!Ty(e,u)||(o=qE(t.dom,e,u),!o))return null}if(Kn)for(let u=o;r&&u;u=Ac(u))u.draggable&&(r=void 0);if(o=eF(o,e),r){if(ai&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let u;eu&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=nF(t,r,i,e))}l==null&&(l=tF(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function Lx(t){return t.top<t.bottom||t.left<t.right}function As(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Lx(r))return r}return Array.prototype.find.call(n,Lx)||t.getBoundingClientRect()}const iF=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function GE(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=eu||ai;if(r.nodeType==3)if(o&&(iF.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=As(es(r,i,i),n);if(ai&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=As(es(r,i-1,i-1),-1);if(u.top==c.top){let d=As(es(r,i,i+1),-1);if(d.top!=c.top)return $a(d,d.left<u.left)}}return c}else{let c=i,u=i,d=n<0?1:-1;return n<0&&!i?(u++,d=-1):n>=0&&i==r.nodeValue.length?(c--,d=1):n<0?c--:u++,$a(As(es(r,c,u),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Br(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return Vg(c.getBoundingClientRect(),!1)}if(s==null&&i<Br(r)){let c=r.childNodes[i];if(c.nodeType==1)return Vg(c.getBoundingClientRect(),!0)}return Vg(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Br(r))){let c=r.childNodes[i-1],u=c.nodeType==3?es(c,Br(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return $a(As(u,1),!1)}if(s==null&&i<Br(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?es(c,0,o?0:1):c.nodeType==1?c:null:null;if(u)return $a(As(u,-1),!0)}return $a(As(r.nodeType==3?es(r):r,-n),n>=0)}function $a(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Vg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function JE(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function sF(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return JE(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=GE(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=es(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const oF=/[\u0590-\u08ac]/;function lF(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!oF.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:JE(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:y,focusOffset:b}=t.domSelectionRange(),x=y&&!m.contains(y.nodeType==1?y:y.parentNode)||c==y&&u==b;try{l.collapse(d,h),c&&(c!=d||u!=h)&&l.extend&&l.extend(c,u)}catch{}return p!=null&&(l.caretBidiLevel=p),x}):r.pos==r.start()||r.pos==r.end()}let Ix=null,Nx=null,Dx=!1;function aF(t,e,n){return Ix==e&&Nx==n?Dx:(Ix=e,Nx=n,Dx=n=="up"||n=="down"?sF(t,e,n):lF(t,e,n))}const Ur=0,Px=1,Oo=2,Li=3;class tu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ur,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>En(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof XE){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof YE&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?En(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?En(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let c=this.children[l],u=o+c.size;if(i==-1&&e<=u){let d=o+c.border;if(e>=d&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=o;for(let h=l;h>0;h--){let p=this.children[h-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=En(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let d=l+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=En(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let y=this.children[p],b=m+y.size;if(s>m&&o<b)return y.setSelection(e-m-y.border,n-m-y.border,r,i);m=b}let l=this.domFromPos(e,e?-1:1),c=n==e?l:this.domFromPos(n,n?-1:1),u=r.getSelection(),d=!1;if((ai||Kn)&&e==n){let{node:p,offset:m}=l;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let y=p,b;y;y=y.parentNode){if(b=y.nextSibling){b.nodeName=="BR"&&(l=c={node:b.parentNode,offset:En(b)+1});break}let x=y.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let y=p.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(ai&&u.focusNode&&u.focusNode!=c.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&Kn)&&qo(l.node,l.offset,u.anchorNode,u.anchorOffset)&&qo(c.node,c.offset,u.focusNode,u.focusOffset))return;let h=!1;if((u.extend||e==n)&&!d){u.collapse(l.node,l.offset);try{e!=n&&u.extend(c.node,c.offset),h=!0}catch{}}if(!h){if(e>n){let m=l;l=c,c=m}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,c=o-s.border;if(e>=l&&n<=c){this.dirty=e==r||n==o?Oo:Px,e==l&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Li:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Oo:Li}r=o}this.dirty=Oo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Oo:Px;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class YE extends tu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ur&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class cF extends tu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Go extends tu{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=rl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Go(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Li||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Li&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ur){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ur}}slice(e,n,r){let i=Go.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Qm(s,n,o,r)),e>0&&(s=Qm(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}}class Js extends tu{constructor(e,n,r,i,s,o,l,c,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],c,u=l&&l(n,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=u&&u.dom,h=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=rl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!h&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=eA(d,r,n),u?c=new uF(e,n,r,i,d,h||null,p,u,s,o+1):n.isText?new Dh(e,n,r,i,d,p,s):new Js(e,n,r,i,d,h||null,p,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Y.empty)}return e}matchesNode(e,n,r){return this.dirty==Ur&&e.eq(this.node)&&fd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new dF(this,o&&o.node,e);gF(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!h&&c.syncToMarks(d==this.node.childCount?Tt.none:this.node.child(d).marks,r,e),c.placeWidget(u,e,i)},(u,d,h,p)=>{c.syncToMarks(u.marks,r,e);let m;c.findNodeMatch(u,d,h,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(m=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,d,h,m,e)||c.updateNextNode(u,d,h,e,p,i)||c.addNode(u,d,h,e,i),i+=u.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Oo)&&(o&&this.protectLocalComposition(e,o),ZE(this.contentDOM,this.children,e),Yl&&mF(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=yF(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new cF(this,s,n,i);e.input.compositionNodes.push(o),this.children=Qm(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Li||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ur}updateOuterDeco(e){if(fd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=QE(this.dom,this.nodeDOM,Zm(this.outerDeco,this.node,n),Zm(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Bx(t,e,n,r,i){eA(r,e,t);let s=new Js(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Dh extends Js{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Li||this.dirty!=Ur&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ur||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ur,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Dh(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Li)}get domAtom(){return!1}isText(e){return this.node.text==e}}class XE extends tu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ur&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uF extends Js{constructor(e,n,r,i,s,o,l,c,u,d){super(e,n,r,i,s,o,l,u,d),this.spec=c}update(e,n,r,i){if(this.dirty==Li)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ZE(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=$x(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof Go){let c=r?r.previousSibling:t.lastChild;ZE(o.contentDOM,o.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=$x(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ac=function(t){t&&(this.nodeName=t)};ac.prototype=Object.create(null);const Ro=[new ac];function Zm(t,e,n){if(t.length==0)return Ro;let r=n?Ro[0]:new ac,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ac(o.nodeName));for(let l in o){let c=o[l];c!=null&&(n&&i.length==1&&i.push(r=new ac(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return i}function QE(t,e,n,r){if(n==Ro&&r==Ro)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let c;l&&l.nodeName==o.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),l=Ro[0]),i=c}fF(i,l||Ro[0],o)}return i}function fF(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function eA(t,e,n){return QE(t,t,Ro,Zm(e,n,t.nodeType!=1))}function fd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function $x(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class dF{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hF(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ur,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Go.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Li&&o.dom==o.contentDOM&&(o.dirty=Oo),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Js){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let d=c.dom,h,p=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Li&&fd(n,c.outerDeco));if(!p&&c.update(e,n,r,i))return this.destroyBetween(this.index,l),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(h=this.recreateWrapper(c,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Oo,h.updateChildren(i,o+1),h.dirty=Ur),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!fd(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Js.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Js.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new YE(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Go;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Dh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Kn||Dn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new XE(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hF(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof Go)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function pF(t,e){return t.type.side-e.type.side}function gF(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);r(d,i,e.forChild(s,d),u),s+=d.nodeSize}return}let o=0,l=[],c=null;for(let u=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let x=i[o++];x.widget&&(d?(h||(h=[d])).push(x):d=x)}if(d)if(h){h.sort(pF);for(let x=0;x<h.length;x++)n(h[x],u,!!c)}else n(d,u,!!c);let p,m;if(c)m=-1,p=c,c=null;else if(u<t.childCount)m=u,p=t.child(u++);else break;for(let x=0;x<l.length;x++)l[x].to<=s&&l.splice(x--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let y=s+p.nodeSize;if(p.isText){let x=y;o<i.length&&i[o].from<x&&(x=i[o].from);for(let C=0;C<l.length;C++)l[C].to<x&&(x=l[C].to);x<y&&(c=p.cut(x-s),p=p.cut(0,x-s),y=x,m=-1)}else for(;o<i.length&&i[o].to<y;)o++;let b=p.isInline&&!p.isLeaf?l.filter(x=>!x.inline):l.slice();r(p,b,e.forChild(s,p),m),s=y}}function mF(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function yF(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=n){if(s>=r&&c.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?c.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&c.length>=r+e.length-l&&c.slice(r-l,r-l+e.length)==e)return r}}return-1}function Qm(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let c=t[o],u=l,d=l+=c.size;u>=n||d<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,r)),i&&(s.push(i),i=void 0),d>n&&s.push(c.slice(n-u,c.size,r)))}return s}function _y(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,u;if(Nh(n)){for(c=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&$e.isSelectable(h)&&i.parent&&!(h.isInline&&UH(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;u=new $e(o==p?l:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=o,p=o;for(let m=0;m<n.rangeCount;m++){let y=n.getRangeAt(m);h=Math.min(h,t.docView.posFromDOM(y.startContainer,y.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(h<0)return null;[c,o]=p==t.state.selection.anchor?[p,h]:[h,p],l=r.resolve(o)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!u){let h=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=My(t,d,l,h)}return u}function tA(t){return t.editable?t.hasFocus():rA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ns(t,e=!1){let n=t.state.selection;if(nA(t,n),!!tA(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Dn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&qo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bF(t);else{let{anchor:r,head:i}=n,s,o;Hx&&!(n instanceof Be)&&(n.$from.parent.inlineContent||(s=Fx(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Fx(t,n.to))),t.docView.setSelection(r,i,t.root,e),Hx&&(s&&Vx(s),o&&Vx(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&vF(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Hx=Kn||Dn&&UE<63;function Fx(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Kn&&i&&i.contentEditable=="false")return zg(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return zg(i);if(s)return zg(s)}}function zg(t){return t.contentEditable="true",Kn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Vx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function vF(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!tA(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bF(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,En(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&nr&&Gs<=11&&(r.disabled=!0,r.disabled=!1)}function nA(t,e){if(e instanceof $e){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(zx(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else zx(t)}function zx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function My(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Be.between(e,n,r)}function Ux(t){return t.editable&&!t.hasFocus()?!1:rA(t)}function rA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function wF(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return qo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function e0(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&We.findFrom(s,e)}function Is(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Wx(t,e,n){let r=t.state.selection;if(r instanceof Be)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Is(t,new Be(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=e0(t.state,e);return i&&i instanceof $e?Is(t,i):!1}else if(!(Pr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?$e.isSelectable(s)?Is(t,new $e(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):eu?Is(t,new Be(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof $e&&r.node.isInline)return Is(t,new Be(e>0?r.$to:r.$from));{let i=e0(t.state,e);return i?Is(t,i):!1}}}function dd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function cc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Sl(t,e){return e<0?xF(t):CF(t)}function xF(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(ai&&n.nodeType==1&&r<dd(n)&&cc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(cc(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(iA(n))break;{let l=n.previousSibling;for(;l&&cc(l,-1);)i=n.parentNode,s=En(l),l=l.previousSibling;if(l)n=l,r=dd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?t0(t,n,r):i&&t0(t,i,s)}function CF(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=dd(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(cc(l,1))s=n,o=++r;else break}else{if(iA(n))break;{let l=n.nextSibling;for(;l&&cc(l,1);)s=l.parentNode,o=En(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=dd(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&t0(t,s,o)}function iA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function SF(t,e){for(;t&&e==t.childNodes.length&&!Qc(t);)e=En(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function kF(t,e){for(;t&&!e&&!Qc(t);)e=En(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function t0(t,e,n){if(e.nodeType!=3){let s,o;(o=SF(e,n))?(e=o,n=0):(s=kF(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Nh(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ns(t)},50)}function jx(t,e){let n=t.state.doc.resolve(e);if(!(Dn||KH)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Kx(t,e,n){let r=t.state.selection;if(r instanceof Be&&!r.empty||n.indexOf("s")>-1||Pr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=e0(t.state,e);if(o&&o instanceof $e)return Is(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof ii?We.near(o,e):We.findFrom(o,e);return l?Is(t,l):!1}return!1}function qx(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Gx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function EF(t){if(!Kn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Gx(t,r,"true"),setTimeout(()=>Gx(t,r,"false"),20)}return!1}function AF(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function TF(t,e){let n=e.keyCode,r=AF(e);if(n==8||Pr&&n==72&&r=="c")return qx(t,-1)||Sl(t,-1);if(n==46&&!e.shiftKey||Pr&&n==68&&r=="c")return qx(t,1)||Sl(t,1);if(n==13||n==27)return!0;if(n==37||Pr&&n==66&&r=="c"){let i=n==37?jx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Wx(t,i,r)||Sl(t,i)}else if(n==39||Pr&&n==70&&r=="c"){let i=n==39?jx(t,t.state.selection.from)=="ltr"?1:-1:1;return Wx(t,i,r)||Sl(t,i)}else{if(n==38||Pr&&n==80&&r=="c")return Kx(t,-1,r)||Sl(t,-1);if(n==40||Pr&&n==78&&r=="c")return EF(t)||Kx(t,1,r)||Sl(t,1);if(r==(Pr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function sA(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let o=t.someProp("clipboardSerializer")||rl.fromSchema(t.state.schema),l=fA(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let u=c.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=uA[u.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let y=l.createElement(d[m]);for(;c.firstChild;)y.appendChild(c.firstChild);c.appendChild(y),h++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:p,slice:e}}function oA(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let c=e&&(r||s||!n);if(c){if(t.someProp("transformPastedText",p=>{e=p(e,s||r,t)}),s)return e?new le(Y.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):le.empty;let h=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(h)l=h;else{let p=i.marks(),{schema:m}=t.state,y=rl.fromSchema(m);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let x=o.appendChild(document.createElement("p"));b&&x.appendChild(y.serializeNode(m.text(b,p)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=RF(n),eu&&LF(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||oc.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!_F.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)l=IF(Jx(l,+d[1],+d[2]),d[4]);else if(l=le.maxOpen(MF(l.content,i),!0),l.openStart||l.openEnd){let h=0,p=0;for(let m=l.content.firstChild;h<l.openStart&&!m.type.spec.isolating;h++,m=m.firstChild);for(let m=l.content.lastChild;p<l.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);l=Jx(l,h,p)}return t.someProp("transformPasted",h=>{l=h(l,t)}),l}const _F=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function MF(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let c=i.findWrapping(l.type),u;if(!c)return o=null;if(u=o.length&&s.length&&aA(c,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=cA(o[o.length-1],s.length));let d=lA(l,c);o.push(d),i=i.matchType(d.type),s=c}}),o)return Y.from(o)}return t}function lA(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Y.from(t));return t}function aA(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=aA(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Y.from(lA(n,t,i+1))))}}function cA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,cA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Y.empty,!0);return t.copy(n.append(r))}function n0(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=n0(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(Y.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function Jx(t,e,n){return e<t.openStart&&(t=new le(n0(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new le(n0(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const uA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Yx=null;function fA(){return Yx||(Yx=document.implementation.createHTMLDocument("title"))}function OF(t){let e=window.trustedTypes;return e?e.createPolicy("detachedDocument",{createHTML:n=>n}).createHTML(t):t}function RF(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=fA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&uA[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=OF(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function LF(t){let e=t.querySelectorAll(Dn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function IF(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;i=Y.from(c.create(r[l+1],i)),s++,o++}return new le(i,s,o)}const qn={},Gn={},NF={touchstart:!0,touchmove:!0};class DF{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function PF(t){for(let e in qn){let n=qn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{$F(t,r)&&!Oy(t,r)&&(t.editable||!(r.type in Gn))&&n(t,r)},NF[e]?{passive:!0}:void 0)}Kn&&t.dom.addEventListener("input",()=>null),r0(t)}function zs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function BF(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function r0(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Oy(t,r))})}function Oy(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function $F(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function HF(t,e){!Oy(t,e)&&qn[e.type]&&(t.editable||!(e.type in Gn))&&qn[e.type](t,e)}Gn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!hA(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Zr&&Dn&&n.keyCode==13)))if(t.domObserver.selectionChanged(t.domSelectionRange())?t.domObserver.flush():n.keyCode!=229&&t.domObserver.forceFlush(),Yl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Eo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||TF(t,n)?n.preventDefault():zs(t,"key")};Gn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Gn.keypress=(t,e)=>{let n=e;if(hA(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Pr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Ph(t){return{left:t.clientX,top:t.clientY}}function FF(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ry(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Fl(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function VF(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&$e.isSelectable(r)?(Fl(t,new $e(n)),!0):!1}function zF(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof $e&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if($e.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Fl(t,$e.create(t.state.doc,i)),!0):!1}function UF(t,e,n,r,i){return Ry(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?zF(t,n):VF(t,n))}function WF(t,e,n,r){return Ry(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function jF(t,e,n,r){return Ry(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||KF(t,n,r)}function KF(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Fl(t,Be.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Fl(t,Be.create(r,l+1,l+1+o.content.size));else if($e.isSelectable(o))Fl(t,$e.create(r,l));else continue;return!0}}function Ly(t){return hd(t)}const dA=Pr?"metaKey":"ctrlKey";qn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Ly(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&FF(n,t.input.lastClick)&&!n[dA]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Ph(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new qF(t,o,n,!!r)):(s=="doubleClick"?WF:jF)(t,o.pos,o.inside,n)?n.preventDefault():zs(t,"pointer"))};class qF{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[dA],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,o=d.depth?d.before():0}const l=i?null:r.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof $e&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ai&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),zs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ns(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ph(e))),this.updateAllowDefault(e),this.allowDefault||!n?zs(this.view,"pointer"):UF(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Kn&&this.mightDrag&&!this.mightDrag.node.isAtom||Dn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Fl(this.view,We.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):zs(this.view,"pointer")}move(e){this.updateAllowDefault(e),zs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}qn.touchstart=t=>{t.input.lastTouch=Date.now(),Ly(t),zs(t,"pointer")};qn.touchmove=t=>{t.input.lastTouch=Date.now(),zs(t,"pointer")};qn.contextmenu=t=>Ly(t);function hA(t,e){return t.composing?!0:Kn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const GF=Zr?5e3:-1;Gn.compositionstart=Gn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),hd(t,!0),t.markCursor=null;else if(hd(t,!e.selection.empty),ai&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}pA(t,GF)};Gn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,pA(t,20))};function pA(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>hd(t),e))}function gA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=YF());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function JF(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=VH(e.focusNode,e.focusOffset),r=zH(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function YF(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hd(t,e=!1){if(!(Zr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),gA(t),e||t.docView&&t.docView.dirty){let n=_y(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function XF(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Tc=nr&&Gs<15||Yl&&qH<604;qn.copy=Gn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Tc?null:n.clipboardData,o=r.content(),{dom:l,text:c}=sA(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):XF(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZF(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function QF(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?_c(t,r.value,null,i,e):_c(t,r.textContent,r.innerHTML,i,e)},50)}function _c(t,e,n,r,i){let s=oA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,s||le.empty)))return!0;if(!s)return!1;let o=ZF(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Gn.paste=(t,e)=>{let n=e;if(t.composing&&!Zr)return;let r=Tc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&_c(t,mA(r),r.getData("text/html"),i,n)?n.preventDefault():QF(t,n)};class yA{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const vA=Pr?"altKey":"ctrlKey";qn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Ph(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof $e?i.to-1:i.to))){if(r&&r.mightDrag)o=$e.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let h=t.docView.nearestDesc(n.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=$e.create(t.state.doc,h.posBefore))}}let l=(o||t.state.selection).content(),{dom:c,text:u,slice:d}=sA(t,l);(!n.dataTransfer.files.length||!Dn||UE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Tc?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Tc||n.dataTransfer.setData("text/plain",u),t.dragging=new yA(d,!n[vA],o)};qn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Gn.dragover=Gn.dragenter=(t,e)=>e.preventDefault();Gn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Ph(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",y=>{o=y(o,t)}):o=oA(t,mA(n.dataTransfer),Tc?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[vA]);if(t.someProp("handleDrop",y=>y(t,n,o||le.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let c=o?DE(t.state.doc,s.pos,o):s.pos;c==null&&(c=s.pos);let u=t.state.tr;if(l){let{node:y}=r;y?y.replace(u):u.deleteSelection()}let d=u.mapping.map(c),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=u.doc;if(h?u.replaceRangeWith(d,d,o.content.firstChild):u.replaceRange(d,d,o),u.doc.eq(p))return;let m=u.doc.resolve(d);if(h&&$e.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new $e(m));else{let y=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((b,x,C,M)=>y=M),u.setSelection(My(t,m,u.doc.resolve(y)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};qn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ns(t)},20))};qn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};qn.beforeinput=(t,e)=>{if(Dn&&Zr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Eo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Gn)qn[t]=Gn[t];function Mc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class pd{constructor(e,n){this.toDOM=e,this.spec=n||Fo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Pn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof pd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Mc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ys{constructor(e,n){this.attrs=e,this.spec=n||Fo}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Pn(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ys&&Mc(this.attrs,e.attrs)&&Mc(this.spec,e.spec)}static is(e){return e.type instanceof Ys}destroy(){}}class Iy{constructor(e,n){this.attrs=e,this.spec=n||Fo}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Pn(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Iy&&Mc(this.attrs,e.attrs)&&Mc(this.spec,e.spec)}destroy(){}}class Pn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Pn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Pn(e,e,new pd(n,r))}static inline(e,n,r,i){return new Pn(e,n,new Ys(r,i))}static node(e,n,r,i){return new Pn(e,n,new Iy(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ys}get widget(){return this.type instanceof pd}}const _l=[],Fo={};class It{constructor(e,n){this.local=e.length?e:_l,this.children=n.length?n:_l}static create(e,n){return n.length?gd(n,e,0,Fo):In}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==In||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Fo)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,r,i);c&&c.type.valid(n,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?e4(this.children,o||[],e,n,r,i,s):o?new It(o.sort(Vo),_l):In}add(e,n){return n.length?this==In?It.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,c)=>{let u=c+r,d;if(d=wA(n,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(l,d,u+1):i.splice(s,0,c,c+l.nodeSize,gd(d,l,u+1,Fo)),s+=3}});let o=bA(s?xA(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new It(o.length?this.local.concat(o).sort(Vo):this.local,i||this.children)}remove(e){return e.length==0||this==In?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,c=r[s+1]+n;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>l&&h.to<c&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,l+1);u!=In?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new It(i,r):In}forChild(e,n){if(this==In)return this;if(n.isLeaf)return It.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>s&&c.type instanceof Ys){let u=Math.max(s,c.from)-s,d=Math.min(o,c.to)-s;u<d&&(i||(i=[])).push(c.copy(u,d))}}if(i){let l=new It(i.sort(Vo),_l);return r?new Ps([l,r]):l}return r||In}eq(e){if(this==e)return!0;if(!(e instanceof It)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ny(this.localsInner(e))}localsInner(e){if(this==In)return _l;if(e.inlineContent||!this.local.some(Ys.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ys||n.push(this.local[r]);return n}forEachSet(e){e(this)}}It.empty=new It([],[]);It.removeOverlap=Ny;const In=It.empty;class Ps{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Fo));return Ps.from(r)}forChild(e,n){if(n.isLeaf)return It.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=In&&(s instanceof Ps?r=r.concat(s.members):r.push(s))}return Ps.from(r)}eq(e){if(!(e instanceof Ps)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Ny(r?n:n.sort(Vo)):_l}static from(e){switch(e.length){case 0:return In;case 1:return e[0];default:return new Ps(e.every(n=>n instanceof It)?e:e.reduce((n,r)=>n.concat(r instanceof It?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function e4(t,e,n,r,i,s,o){let l=t.slice();for(let u=0,d=s;u<n.maps.length;u++){let h=0;n.maps[u].forEach((p,m,y,b)=>{let x=b-y-(m-p);for(let C=0;C<l.length;C+=3){let M=l[C+1];if(M<0||p>M+d-h)continue;let L=l[C]+d-h;m>=L?l[C+1]=p<=L?-2:-1:p>=d&&x&&(l[C]+=x,l[C+1]+=x)}h+=x}),d=n.maps[u].map(d,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let d=n.map(t[u]+s),h=d-i;if(h<0||h>=r.content.size){c=!0;continue}let p=n.map(t[u+1]+s,-1),m=p-i,{index:y,offset:b}=r.content.findIndex(h),x=r.maybeChild(y);if(x&&b==h&&b+x.nodeSize==m){let C=l[u+2].mapInner(n,x,d+1,t[u]+s+1,o);C!=In?(l[u]=h,l[u+1]=m,l[u+2]=C):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=t4(l,t,e,n,i,s,o),d=gd(u,r,0,o);e=d.local;for(let h=0;h<l.length;h+=3)l[h+1]<0&&(l.splice(h,3),h-=3);for(let h=0,p=0;h<d.children.length;h+=3){let m=d.children[h];for(;p<l.length&&l[p]<m;)p+=3;l.splice(p,0,d.children[h],d.children[h+1],d.children[h+2])}}return new It(e.sort(Vo),l)}function bA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Pn(i.from+e,i.to+e,i.type))}return n}function t4(t,e,n,r,i,s,o){function l(c,u){for(let d=0;d<c.local.length;d++){let h=c.local[d].map(r,i,u);h?n.push(h):o.onRemove&&o.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)l(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+s+1);return n}function wA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function xA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function gd(t,e,n,r){let i=[],s=!1;e.forEach((l,c)=>{let u=wA(t,l,c+n);if(u){s=!0;let d=gd(u,l,n+c+1,r);d!=In&&i.push(c,c+l.nodeSize,d)}});let o=bA(s?xA(t):t,-n).sort(Vo);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new It(o,i):In}function Vo(t,e){return t.from-e.from||t.to-e.to}function Ny(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Xx(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Xx(e,i,r.copy(s.from,r.to)));break}}}return e}function Xx(t,e,n){for(;e<t.length&&Vo(n,t[e])>0;)e++;t.splice(e,0,n)}function Ug(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=In&&e.push(r)}),t.cursorWrapper&&e.push(It.create(t.state.doc,[t.cursorWrapper.deco])),Ps.from(e)}const n4={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},r4=nr&&Gs<=11;class i4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s4{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new i4,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);nr&&Gs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),r4&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,n4)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ux(this.view)){if(this.suppressingSelectionUpdates)return ns(this.view);if(nr&&Gs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&qo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ac(s))n.add(s);for(let s=e.anchorNode;s;s=Ac(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}selectionChanged(e){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Ux(this.view)&&!this.ignoreSelectionChange(e)}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=this.selectionChanged(r),s=-1,o=-1,l=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let h=this.registerMutation(n[d],c);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(l=!0))}if(ai&&c.length){let d=c.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,p]=d;h.parentNode&&h.parentNode.parentNode==p.parentNode?p.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let p of d){let m=p.parentNode;m&&m.nodeName=="LI"&&(!h||a4(e,h)!=m)&&p.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Nh(r)&&(u=_y(e))&&u.eq(We.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ns(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),o4(e)),this.handleDOMChange(s,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ns(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];n.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(nr&&Gs<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:p}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let o=i&&i.parentNode==e.target?En(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),c=s&&s.parentNode==e.target?En(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Zx=new WeakMap,Qx=!1;function o4(t){if(!Zx.has(t)&&(Zx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ai,Qx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Qx=!0}}function eC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return qo(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function l4(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return eC(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?eC(t,n):null}function a4(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function c4(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),u,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],Nh(c)||u.push({node:c.focusNode,offset:c.focusOffset})),Dn&&t.input.lastKeyCode===8)for(let x=s;x>i;x--){let C=r.childNodes[x-1],M=C.pmViewDesc;if(C.nodeName=="BR"&&!M){s=x;break}if(!M||M.size)break}let h=t.state.doc,p=t.someProp("domParser")||oc.fromSchema(t.state.schema),m=h.resolve(o),y=null,b=p.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:u4,context:m});if(u&&u[0].pos!=null){let x=u[0].pos,C=u[1]&&u[1].pos;C==null&&(C=x),y={anchor:x+o,head:C+o}}return{doc:b,sel:y,from:o,to:l}}function u4(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Kn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Kn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const f4=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function d4(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let ee=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,ve=_y(t,ee);if(ve&&!t.state.selection.eq(ve)){if(Dn&&Zr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",te=>te(t,Eo(13,"Enter"))))return;let Ce=t.state.tr.setSelection(ve);ee=="pointer"?Ce.setMeta("pointer",!0):ee=="key"&&Ce.scrollIntoView(),s&&Ce.setMeta("composition",s),t.dispatch(Ce)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c=t.state.selection,u=c4(t,e,n),d=t.state.doc,h=d.slice(u.from,u.to),p,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,m="end"):(p=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let y=g4(h.content,u.doc.content,u.from,p,m);if(y&&t.input.domChangeCount++,(Yl&&t.input.lastIOSEnter>Date.now()-225||Zr)&&i.some(ee=>ee.nodeType==1&&!f4.test(ee.nodeName))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",ee=>ee(t,Eo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!y)if(r&&c instanceof Be&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))y={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let ee=tC(t,t.state.doc,u.sel);if(ee&&!ee.eq(t.state.selection)){let ve=t.state.tr.setSelection(ee);s&&ve.setMeta("composition",s),t.dispatch(ve)}}return}t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof Be&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),nr&&Gs<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>u.from&&u.doc.textBetween(y.start-u.from-1,y.start-u.from+1)==" "&&(y.start--,y.endA--,y.endB--);let b=u.doc.resolveNoCache(y.start-u.from),x=u.doc.resolveNoCache(y.endB-u.from),C=d.resolve(y.start),M=b.sameParent(x)&&b.parent.inlineContent&&C.end()>=y.endA,L;if((Yl&&t.input.lastIOSEnter>Date.now()-225&&(!M||i.some(ee=>ee.nodeName=="DIV"||ee.nodeName=="P"))||!M&&b.pos<u.doc.content.size&&!b.sameParent(x)&&(L=We.findFrom(u.doc.resolve(b.pos+1),1,!0))&&L.head==x.pos)&&t.someProp("handleKeyDown",ee=>ee(t,Eo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>y.start&&p4(d,y.start,y.endA,b,x)&&t.someProp("handleKeyDown",ee=>ee(t,Eo(8,"Backspace")))){Zr&&Dn&&t.domObserver.suppressSelectionUpdates();return}Dn&&Zr&&y.endB==y.start&&(t.input.lastAndroidDelete=Date.now()),Zr&&!M&&b.start()!=x.start()&&x.parentOffset==0&&b.depth==x.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==y.endA&&(y.endB-=2,x=u.doc.resolveNoCache(y.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(ee){return ee(t,Eo(13,"Enter"))})},20));let A=y.start,F=y.endA,R,U,W;if(M){if(b.pos==x.pos)nr&&Gs<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ns(t),20)),R=t.state.tr.delete(A,F),U=d.resolve(y.start).marksAcross(d.resolve(y.endA));else if(y.endA==y.endB&&(W=h4(b.parent.content.cut(b.parentOffset,x.parentOffset),C.parent.content.cut(C.parentOffset,y.endA-C.start()))))R=t.state.tr,W.type=="add"?R.addMark(A,F,W.mark):R.removeMark(A,F,W.mark);else if(b.parent.child(b.index()).isText&&b.index()==x.index()-(x.textOffset?0:1)){let ee=b.parent.textBetween(b.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",ve=>ve(t,A,F,ee)))return;R=t.state.tr.insertText(ee,A,F)}}if(R||(R=t.state.tr.replace(A,F,u.doc.slice(y.start-u.from,y.endB-u.from))),u.sel){let ee=tC(t,R.doc,u.sel);ee&&!(Dn&&Zr&&t.composing&&ee.empty&&(y.start!=y.endB||t.input.lastAndroidDelete<Date.now()-100)&&(ee.head==A||ee.head==R.mapping.map(F)-1)||nr&&ee.empty&&ee.head==A)&&R.setSelection(ee)}U&&R.ensureMarks(U),s&&R.setMeta("composition",s),t.dispatch(R.scrollIntoView())}function tC(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:My(t,e.resolve(n.anchor),e.resolve(n.head))}function h4(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",c=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",c=d=>d.mark(l.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(Y.from(u).eq(t))return{mark:l,type:o}}function p4(t,e,n,r,i){if(n-e<=i.pos-r.pos||Wg(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Wg(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Wg(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Wg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function g4(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,l));r-=o+c-s}if(o<s&&t.size<e.size){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<e.size&&nC(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-o),o=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<t.size&&nC(t.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function nC(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class m4{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new DF,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(lC),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=sC(this),iC(this),this.nodeViews=oC(this),this.docView=Bx(this.state.doc,rC(this),Ug(this),this.dom,this),this.domObserver=new s4(this,(r,i,s,o)=>d4(this,r,i,s,o)),this.domObserver.start(),PF(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&r0(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(lC),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(gA(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=oC(this);v4(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&r0(this),this.editable=sC(this),iC(this);let c=Ug(this),u=rC(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,u,c);(h||!e.selection.eq(i.selection))&&(o=!0);let p=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&YH(this);if(o){this.domObserver.stop();let m=h&&(nr||Dn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&y4(i.selection,e.selection);if(h){let y=Dn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=JF(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Bx(e.doc,u,c,this.dom,this)),y&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&wF(this))?ns(this,m):(nA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&XH(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof $e){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Rx(this,n.getBoundingClientRect(),e)}else Rx(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new yA(e.slice,e.move,i<0?void 0:$e.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(nr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ZH(this.dom),ns(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rF(this,e)}coordsAtPos(e,n=1){return GE(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return aF(this,n||this.state,e)}pasteHTML(e,n){return _c(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return _c(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(BF(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ug(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,HH())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return HF(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Kn&&this.root.nodeType===11&&WH(this.dom.ownerDocument)==this.dom&&l4(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function rC(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Pn.node(0,t.state.doc.content.size,e)]}function iC(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Pn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function sC(t){return!t.someProp("editable",e=>e(t.state)===!1)}function y4(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function oC(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function v4(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function lC(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},md={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},b4=typeof navigator<"u"&&/Mac/.test(navigator.platform),w4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var An=0;An<10;An++)Zs[48+An]=Zs[96+An]=String(An);for(var An=1;An<=24;An++)Zs[An+111]="F"+An;for(var An=65;An<=90;An++)Zs[An]=String.fromCharCode(An+32),md[An]=String.fromCharCode(An);for(var jg in Zs)md.hasOwnProperty(jg)||(md[jg]=Zs[jg]);function x4(t){var e=b4&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||w4&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?md:Zs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const C4=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function S4(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))C4?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function k4(t){let e=Object.create(null);for(let n in t)e[S4(n)]=t[n];return e}function Kg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function E4(t){return new Ft({props:{handleKeyDown:Dy(t)}})}function Dy(t){let e=k4(t);return function(n,r){let i=x4(r),s,o=e[Kg(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Kg(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Zs[r.keyCode])&&s!=i){let l=e[Kg(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const A4=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const T4=(t,e,n)=>{let r=CA(t,n);if(!r)return!1;let i=Py(r);if(!i){let o=r.blockRange(),l=o&&fa(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(AA(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Xl(s,"end")||$e.isSelectable(s)))for(let o=r.depth;;o--){let l=Lh(t.doc,r.before(o),r.after(o),le.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(Xl(s,"end")?We.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):$e.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},_4=(t,e,n)=>{let r=CA(t,n);if(!r)return!1;let i=Py(r);return i?SA(t,i,e):!1},M4=(t,e,n)=>{let r=kA(t,n);if(!r)return!1;let i=By(r);return i?SA(t,i,e):!1};function SA(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let u=Lh(t.doc,s,c,le.empty);if(!u||u.from!=s||u instanceof vn&&u.slice.size>=c-s)return!1;if(n){let d=t.tr.step(u);d.setSelection(Be.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Xl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const O4=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Py(r)}let o=s&&s.nodeBefore;return!o||!$e.isSelectable(o)?!1:(e&&e(t.tr.setSelection($e.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Py(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function kA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const R4=(t,e,n)=>{let r=kA(t,n);if(!r)return!1;let i=By(r);if(!i)return!1;let s=i.nodeAfter;if(AA(t,i,e,1))return!0;if(r.parent.content.size==0&&(Xl(s,"start")||$e.isSelectable(s))){let o=Lh(t.doc,r.before(),r.after(),le.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(Xl(s,"start")?We.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):$e.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},L4=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=By(r)}let o=s&&s.nodeAfter;return!o||!$e.isSelectable(o)?!1:(e&&e(t.tr.setSelection($e.create(t.doc,s.pos)).scrollIntoView()),!0)};function By(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const I4=(t,e)=>{let n=t.selection,r=n instanceof $e,i;if(r){if(n.node.isTextblock||!no(t.doc,n.from))return!1;i=n.from}else if(i=Rh(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection($e.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},N4=(t,e)=>{let n=t.selection,r;if(n instanceof $e){if(n.node.isTextblock||!no(t.doc,n.to))return!1;r=n.to}else if(r=Rh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},D4=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&fa(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},P4=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function EA(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const B4=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=EA(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),c=t.tr.replaceWith(l,l,o.createAndFill());c.setSelection(We.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},$4=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof ii||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=EA(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Be.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},H4=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if($l(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&fa(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},F4=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection($e.create(t.doc,i))),!0)};function V4(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||no(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function AA(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&V4(t,e,n))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,y=Y.empty;for(let C=o.length-1;C>=0;C--)y=Y.from(o[C].create(null,y));y=Y.from(i.copy(y));let b=t.tr.step(new bn(e.pos-1,m,e.pos,m,new le(y,1,0),o.length,!0)),x=m+2*o.length;no(b.doc,x)&&b.join(x),n(b.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&c?null:We.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),p=h&&fa(h);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(h,p).scrollIntoView()),!0;if(u&&Xl(s,"start",!0)&&Xl(i,"end")){let m=i,y=[];for(;y.push(m),!m.isTextblock;)m=m.lastChild;let b=s,x=1;for(;!b.isTextblock;b=b.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let C=Y.empty;for(let L=y.length-1;L>=0;L--)C=Y.from(y[L].copy(C));let M=t.tr.step(new bn(e.pos-y.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new le(C,y.length,0),0,!0));n(M.scrollIntoView())}return!0}}return!1}function TA(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const z4=TA(-1),U4=TA(1);function W4(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&Sy(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function aC(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(u),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];s.setBlockType(l,c,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function j4(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=!1,c=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let d=n.doc.resolve(o.start-2);c=new kc(d,d,o.depth),o.endIndex<o.parent.childCount&&(o=new kc(i,n.doc.resolve(s.end(o.depth)),o.depth)),l=!0}let u=Sy(c,t,e,o);return u?(r&&r(K4(n.tr,o,u,l,t).scrollIntoView()),!0):!1}}function K4(t,e,n,r,i){let s=Y.empty;for(let d=n.length-1;d>=0;d--)s=Y.from(n[d].type.create(n[d].attrs,s));t.step(new bn(e.start-(r?2:0),e.end,e.start,e.end,new le(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let l=n.length-o,c=e.start+n.length-(r?2:0),u=e.parent;for(let d=e.startIndex,h=e.endIndex,p=!0;d<h;d++,p=!1)!p&&$l(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=u.child(d).nodeSize;return t}function q4(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?G4(e,n,t,s):J4(e,n,s):!0:!1}}function G4(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new bn(s-1,o,s,o,new le(Y.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new kc(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=fa(r);if(l==null)return!1;i.lift(r,l);let c=i.mapping.map(s,-1)-1;return no(i.doc,c)&&i.join(c),e(i.scrollIntoView()),!0}function J4(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,y=n.endIndex-1,b=n.startIndex;y>b;y--)m-=i.child(y).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(l?0:1),d+1,o.content.append(c?Y.empty:Y.from(i))))return!1;let h=s.pos,p=h+o.nodeSize;return r.step(new bn(h-(l?1:0),p+(c?1:0),h+1,p-1,new le((l?Y.empty:Y.from(i.copy(Y.empty))).append(c?Y.empty:Y.from(i.copy(Y.empty))),l?0:1,c?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Y4(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,c=l.child(o-1);if(c.type!=t)return!1;if(n){let u=c.lastChild&&c.lastChild.type==l.type,d=Y.from(u?t.create():null),h=new le(Y.from(t.create(null,Y.from(l.type.create(null,d)))),u?3:1,0),p=s.start,m=s.end;n(e.tr.step(new bn(p-(u?3:1),m,p,m,h,1,!0)).scrollIntoView())}return!0}}function Bh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class $h{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...d)=>{const h=c(...d)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],c=!!e,u=e||s.tr,d=()=>(!c&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),l.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(r).map(([p,m])=>[p,(...b)=>{const x=this.buildProps(u,n),C=m(...b)(x);return l.push(C),h}])),run:d};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([c,u])=>[c,(...d)=>u(...d)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:Bh({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,u])=>[c,(...d)=>u(...d)(l)]))}};return l}}class X4{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Ae(t,e,n){return t.config[e]===void 0&&t.parent?Ae(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ae(t.parent,e,n):null}):t.config[e]}function Hh(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function _A(t){const e=[],{nodeExtensions:n,markExtensions:r}=Hh(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},c=Ae(o,"addGlobalAttributes",l);if(!c)return;c().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([p,m])=>{e.push({type:h,name:p,attribute:{...s,...m}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=Ae(o,"addAttributes",l);if(!c)return;const u=c();Object.entries(u).forEach(([d,h])=>{const p={...s,...h};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:o.name,name:d,attribute:p})})}),e}function xn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function jt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?s.split(" "):[],c=r[i]?r[i].split(" "):[],u=l.filter(d=>!c.includes(d));r[i]=[...c,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[h,p]=d.split(":").map(m=>m.trim());u.set(h,p)}),l.forEach(d=>{const[h,p]=d.split(":").map(m=>m.trim());u.set(h,p)}),r[i]=Array.from(u.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else r[i]=s}),r},{})}function i0(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>jt(n,r),{})}function MA(t){return typeof t=="function"}function nt(t,e=void 0,...n){return MA(t)?e?t.bind(e)(...n):t(...n):t}function Z4(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Q4(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function cC(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):Q4(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function uC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Z4(n)?!1:n!=null))}function eV(t,e){var n;const r=_A(t),{nodeExtensions:i,markExtensions:s}=Hh(t),o=(n=i.find(u=>Ae(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const d=r.filter(C=>C.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((C,M)=>{const L=Ae(M,"extendNodeSchema",h);return{...C,...L?L(u):{}}},{}),m=uC({...p,content:nt(Ae(u,"content",h)),marks:nt(Ae(u,"marks",h)),group:nt(Ae(u,"group",h)),inline:nt(Ae(u,"inline",h)),atom:nt(Ae(u,"atom",h)),selectable:nt(Ae(u,"selectable",h)),draggable:nt(Ae(u,"draggable",h)),code:nt(Ae(u,"code",h)),whitespace:nt(Ae(u,"whitespace",h)),defining:nt(Ae(u,"defining",h)),isolating:nt(Ae(u,"isolating",h)),attrs:Object.fromEntries(d.map(C=>{var M;return[C.name,{default:(M=C==null?void 0:C.attribute)===null||M===void 0?void 0:M.default}]}))}),y=nt(Ae(u,"parseHTML",h));y&&(m.parseDOM=y.map(C=>cC(C,d)));const b=Ae(u,"renderHTML",h);b&&(m.toDOM=C=>b({node:C,HTMLAttributes:i0(C,d)}));const x=Ae(u,"renderText",h);return x&&(m.toText=x),[u.name,m]})),c=Object.fromEntries(s.map(u=>{const d=r.filter(x=>x.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((x,C)=>{const M=Ae(C,"extendMarkSchema",h);return{...x,...M?M(u):{}}},{}),m=uC({...p,inclusive:nt(Ae(u,"inclusive",h)),excludes:nt(Ae(u,"excludes",h)),group:nt(Ae(u,"group",h)),spanning:nt(Ae(u,"spanning",h)),code:nt(Ae(u,"code",h)),attrs:Object.fromEntries(d.map(x=>{var C;return[x.name,{default:(C=x==null?void 0:x.attribute)===null||C===void 0?void 0:C.default}]}))}),y=nt(Ae(u,"parseHTML",h));y&&(m.parseDOM=y.map(x=>cC(x,d)));const b=Ae(u,"renderHTML",h);return b&&(m.toDOM=x=>b({mark:x,HTMLAttributes:i0(x,d)})),[u.name,m]}));return new EE({topNode:o,nodes:l,marks:c})}function qg(t,e){return e.nodes[t]||e.marks[t]||null}function fC(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const tV=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var c,u;const d=((u=(c=i.type.spec).toText)===null||u===void 0?void 0:u.call(c,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function $y(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Fh{constructor(e){this.find=e.find,this.handler=e.handler}}const nV=(t,e)=>{if($y(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function df(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const h=tV(u)+s;return o.forEach(p=>{if(d)return;const m=nV(h,p.find);if(!m)return;const y=c.state.tr,b=Bh({state:c.state,transaction:y}),x={from:r-(m[0].length-s.length),to:i},{commands:C,chain:M,can:L}=new $h({editor:n,state:b});p.handler({state:b,range:x,match:m,commands:C,chain:M,can:L})===null||!y.steps.length||(y.setMeta(l,{transform:y,from:r,to:i,text:s}),c.dispatch(y),d=!0)}),d}function rV(t){const{editor:e,rules:n}=t,r=new Ft({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{const{from:u,text:d}=l,h=u+d.length;df({editor:e,from:u,to:h,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return df({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&df({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?df({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function iV(t){return Object.prototype.toString.call(t).slice(8,-1)}function hf(t){return iV(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Vh(t,e){const n={...t};return hf(t)&&hf(e)&&Object.keys(e).forEach(r=>{hf(e[r])&&hf(t[r])?n[r]=Vh(t[r],e[r]):n[r]=e[r]}),n}class Ii{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nt(Ae(this,"addOptions",{name:this.name}))),this.storage=nt(Ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ii(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Vh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ii(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nt(Ae(n,"addOptions",{name:n.name})),n.storage=nt(Ae(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const c=o.find(u=>(u==null?void 0:u.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function sV(t){return typeof t=="number"}class OA{constructor(e){this.find=e.find,this.handler=e.handler}}const oV=(t,e,n)=>{if($y(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function lV(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:c,chain:u,can:d}=new $h({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(m,y)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,y),x=Math.min(i,y+m.content.size),C=m.textBetween(b-y,x-y,void 0,"");oV(C,s.find,o).forEach(L=>{if(L.index===void 0)return;const A=b+L.index+1,F=A+L[0].length,R={from:n.tr.mapping.map(A),to:n.tr.mapping.map(F)},U=s.handler({state:n,range:R,match:L,commands:c,chain:u,can:d,pasteEvent:o,dropEvent:l});h.push(U)})}),h.every(m=>m!==null)}const aV=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function cV(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l=typeof DragEvent<"u"?new DragEvent("drop"):null;const c=({state:d,from:h,to:p,rule:m,pasteEvt:y})=>{const b=d.tr,x=Bh({state:d,transaction:b});if(!(!lV({editor:e,state:x,from:Math.max(h-1,0),to:p.b-1,rule:m,pasteEvent:y,dropEvent:l})||!b.steps.length))return l=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b};return n.map(d=>new Ft({view(h){const p=m=>{var y;r=!((y=h.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?h.dom.parentElement:null};return window.addEventListener("dragstart",p),{destroy(){window.removeEventListener("dragstart",p)}}},props:{handleDOMEvents:{drop:(h,p)=>(s=r===h.dom.parentElement,l=p,!1),paste:(h,p)=>{var m;const y=(m=p.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return o=p,i=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(h,p,m)=>{const y=h[0],b=y.getMeta("uiEvent")==="paste"&&!i,x=y.getMeta("uiEvent")==="drop"&&!s,C=y.getMeta("applyPasteRules"),M=!!C;if(!b&&!x&&!M)return;if(M){const{from:F,text:R}=C,U=F+R.length,W=aV(R);return c({rule:d,state:m,from:F,to:{b:U},pasteEvt:W})}const L=p.doc.content.findDiffStart(m.doc.content),A=p.doc.content.findDiffEnd(m.doc.content);if(!(!sV(L)||!A||L===A.b))return c({rule:d,state:m,from:L,to:A,pasteEvt:o})}}))}function uV(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Ll{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ll.resolve(e),this.schema=eV(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Ll.sort(Ll.flatten(e)),r=uV(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Ae(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Ae(r,"priority")||100,o=Ae(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:qg(n.name,this.schema)},i=Ae(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ll.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:qg(o.name,this.schema)},c=[],u=Ae(o,"addKeyboardShortcuts",l);let d={};if(o.type==="mark"&&Ae(o,"exitable",l)&&(d.ArrowRight=()=>Ii.handleExit({editor:e,mark:o})),u){const b=Object.fromEntries(Object.entries(u()).map(([x,C])=>[x,()=>C({editor:e})]));d={...d,...b}}const h=E4(d);c.push(h);const p=Ae(o,"addInputRules",l);fC(o,e.options.enableInputRules)&&p&&r.push(...p());const m=Ae(o,"addPasteRules",l);fC(o,e.options.enablePasteRules)&&m&&i.push(...m());const y=Ae(o,"addProseMirrorPlugins",l);if(y){const b=y();c.push(...b)}return c}).flat();return[rV({editor:e,rules:r}),...cV({editor:e,rules:i}),...s]}get attributes(){return _A(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Hh(this.extensions);return Object.fromEntries(n.filter(r=>!!Ae(r,"addNodeView")).map(r=>{const i=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:xn(r.name,this.schema)},o=Ae(r,"addNodeView",s);if(!o)return[];const l=(c,u,d,h,p)=>{const m=i0(c,i);return o()({node:c,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:qg(e.name,this.schema)};e.type==="mark"&&(!((n=nt(Ae(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=Ae(e,"onBeforeCreate",r),s=Ae(e,"onCreate",r),o=Ae(e,"onUpdate",r),l=Ae(e,"onSelectionUpdate",r),c=Ae(e,"onTransaction",r),u=Ae(e,"onFocus",r),d=Ae(e,"onBlur",r),h=Ae(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}}class on{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nt(Ae(this,"addOptions",{name:this.name}))),this.storage=nt(Ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new on(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Vh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new on({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nt(Ae(n,"addOptions",{name:n.name})),n.storage=nt(Ae(n,"addStorage",{name:n.name,options:n.options})),n}}function RA(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(c,u,d,h)=>{var p;c.isBlock&&u>r&&(l+=s);const m=o==null?void 0:o[c.type.name];if(m)return d&&(l+=m({node:c,pos:u,parent:d,index:h,range:e})),!1;c.isText&&(l+=(p=c==null?void 0:c.text)===null||p===void 0?void 0:p.slice(Math.max(r,u)-u,i-u))}),l}function LA(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const fV=on.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ft({key:new Kt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),l=Math.max(...s.map(d=>d.$to.pos)),c=LA(n);return RA(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),dV=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),hV=(t=!1)=>({commands:e})=>e.setContent("",t),pV=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:d}=e,h=u.resolve(d.map(c)),p=u.resolve(d.map(c+l.nodeSize)),m=h.blockRange(p);if(!m)return;const y=fa(m);if(l.type.isTextblock){const{defaultType:b}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(m.start,b)}(y||y===0)&&e.lift(m,y)})}),!0},gV=t=>e=>t(e),mV=()=>({state:t,dispatch:e})=>$4(t,e),yV=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Be(r.doc.resolve(o-1))),!0},vV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),c=i.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},bV=t=>({tr:e,state:n,dispatch:r})=>{const i=xn(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const c=s.before(o),u=s.after(o);e.delete(c,u).scrollIntoView()}return!0}return!1},wV=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},xV=()=>({state:t,dispatch:e})=>A4(t,e),CV=()=>({commands:t})=>t.keyboardShortcut("Enter"),SV=()=>({state:t,dispatch:e})=>B4(t,e);function yd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:$y(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function s0(t,e,n={}){return t.find(r=>r.type===e&&yd(r.attrs,n))}function kV(t,e,n={}){return!!s0(t,e,n)}function Hy(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=s0([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,l=s+1,c=o+r.node.nodeSize;for(s0([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&kV([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:c}}function io(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const EV=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=io(t,r.schema),{doc:o,selection:l}=n,{$from:c,from:u,to:d}=l;if(i){const h=Hy(c,s,e);if(h&&h.from<=u&&h.to>=d){const p=Be.create(o,h.from,h.to);n.setSelection(p)}}return!0},AV=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function IA(t){return t instanceof Be}function Lo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function NA(t,e=null){if(!e)return null;const n=We.atStart(t),r=We.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Be.create(t,Lo(0,i,s),Lo(t.content.size,i,s)):Be.create(t,Lo(e,i,s),Lo(e,i,s))}function Fy(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const TV=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Fy()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!IA(n.state.selection))return o(),!0;const l=NA(i.doc,t)||n.state.selection,c=n.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},_V=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),MV=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),DA=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&DA(r)}return t};function pf(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return DA(n)}function vd(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Y.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),vd("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const c=new EE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?oc.fromSchema(c).parseSlice(pf(t),n.parseOptions):oc.fromSchema(c).parse(pf(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=oc.fromSchema(e);return n.slice?s.parseSlice(pf(t),n.parseOptions).content:s.parse(pf(t),n.parseOptions)}return vd("",e,n)}function OV(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof vn||i instanceof bn))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,c,u,d)=>{o===0&&(o=d)}),t.setSelection(We.near(t.doc.resolve(o),n))}const RV=t=>!("type"in t),LV=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=vd(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(y){return s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:c,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,h=!0;if((RV(l)?l:[l]).forEach(y=>{y.check(),d=d?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),c===u&&h){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,u+=1)}let m;d?(Array.isArray(e)?m=e.map(y=>y.text||"").join(""):typeof e=="object"&&e&&e.text?m=e.text:m=e,r.insertText(m,c,u)):(m=l,r.replaceWith(c,u,m)),n.updateSelection&&OV(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},IV=()=>({state:t,dispatch:e})=>I4(t,e),NV=()=>({state:t,dispatch:e})=>N4(t,e),DV=()=>({state:t,dispatch:e})=>T4(t,e),PV=()=>({state:t,dispatch:e})=>R4(t,e),BV=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Rh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},$V=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Rh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},HV=()=>({state:t,dispatch:e})=>_4(t,e),FV=()=>({state:t,dispatch:e})=>M4(t,e);function PA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function VV(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Fy()||PA()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const zV=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=VV(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return c==null||c.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Oc(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?xn(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(h,p)=>{if(h.isText)return;const m=Math.max(r,p),y=Math.min(i,p+h.nodeSize);l.push({node:h,from:m,to:y})});const c=i-r,u=l.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>yd(h.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((h,p)=>h+p.to-p.from,0)>=c}const UV=(t,e={})=>({state:n,dispatch:r})=>{const i=xn(t,n.schema);return Oc(n,i,e)?D4(n,r):!1},WV=()=>({state:t,dispatch:e})=>H4(t,e),jV=t=>({state:e,dispatch:n})=>{const r=xn(t,e.schema);return q4(r)(e,n)},KV=()=>({state:t,dispatch:e})=>P4(t,e);function zh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function dC(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const qV=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=zh(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=xn(t,r.schema)),l==="mark"&&(o=io(t,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{s&&s===u.type&&n.setNodeMarkup(d,void 0,dC(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(h=>{o===h.type&&n.addMark(d,d+u.nodeSize,o.create(dC(h.attrs,e)))})})}),!0):!1},GV=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),JV=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),YV=()=>({state:t,dispatch:e})=>O4(t,e),XV=()=>({state:t,dispatch:e})=>L4(t,e),ZV=()=>({state:t,dispatch:e})=>F4(t,e),QV=()=>({state:t,dispatch:e})=>U4(t,e),ez=()=>({state:t,dispatch:e})=>z4(t,e);function o0(t,e,n={},r={}){return vd(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const tz=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var c,u;const{doc:d}=s;if(n.preserveWhitespace!=="full"){const h=o0(t,i.schema,n,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck});return o&&s.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function Vy(t,e){const n=io(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function nz(t,e){const n=new ky(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function rz(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function iz(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function BA(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function zy(t){return e=>BA(e.$from,t)}function sz(t,e){const n=rl.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function oz(t,e){const n={from:0,to:t.content.size};return RA(t,n,e)}function lz(t,e){const n=xn(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function $A(t,e){const n=zh(typeof e=="string"?e:e.name,t.schema);return n==="node"?lz(t,e):n==="mark"?Vy(t,e):{}}function az(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function cz(t){const e=az(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function uz(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=n[s];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const u=e.slice(s).map(l,-1),d=e.slice(s).map(c),h=e.invert().map(u,-1),p=e.invert().map(d);r.push({oldRange:{from:h,to:p},newRange:{from:u,to:d}})})}),cz(r)}function Uy(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=Hy(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Hf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function l0(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?io(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>yd(h.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:h,$to:p})=>{const m=h.pos,y=p.pos;t.doc.nodesBetween(m,y,(b,x)=>{if(!b.isText&&!b.marks.length)return;const C=Math.max(m,x),M=Math.min(y,x+b.nodeSize),L=M-C;o+=L,l.push(...b.marks.map(A=>({mark:A,from:C,to:M})))})}),o===0)return!1;const c=l.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>yd(h.mark.attrs,n,{strict:!1})).reduce((h,p)=>h+p.to-p.from,0),u=l.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,p)=>h+p.to-p.from,0);return(c>0?c+u:c)>=o}function fz(t,e,n={}){if(!e)return Oc(t,null,n)||l0(t,null,n);const r=zh(e,t.schema);return r==="node"?Oc(t,e,n):r==="mark"?l0(t,e,n):!1}function hC(t,e){const{nodeExtensions:n}=Hh(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=nt(Ae(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Uh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Uh(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function dz(t){return t instanceof $e}function hz(t,e,n){var r;const{selection:i}=e;let s=null;if(IA(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(c=>c.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:c})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,c.pos,(d,h,p)=>{if(u)return!1;if(d.isInline){const m=!p||p.type.allowsMarkType(n),y=!!n.isInSet(d.marks)||!d.marks.some(b=>b.type.excludes(n));u=m&&y}return!u}),u})}const pz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,c=io(t,r.schema);if(i)if(o){const u=Vy(r,c);n.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(d,h,(p,m)=>{const y=Math.max(m,d),b=Math.min(m+p.nodeSize,h);p.marks.find(C=>C.type===c)?p.marks.forEach(C=>{c===C.type&&n.addMark(y,b,c.create({...C.attrs,...e}))}):n.addMark(y,b,c.create(e))})});return hz(r,n,c)},gz=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),mz=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=xn(t,n.schema);return s.isTextblock?i().command(({commands:o})=>aC(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>aC(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},yz=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Lo(t,0,r.content.size),s=$e.create(r,i);e.setSelection(s)}return!0},vz=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(r).from,l=Be.atEnd(r).to,c=Lo(i,o,l),u=Lo(s,o,l),d=Be.create(r,c,u);e.setSelection(d)}return!0},bz=t=>({state:e,dispatch:n})=>{const r=xn(t,e.schema);return Y4(r)(e,n)};function pC(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const wz=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:c}=s,u=i.extensionManager.attributes,d=Hf(u,l.node().type.name,l.node().attrs);if(s instanceof $e&&s.node.isBlock)return!l.parentOffset||!$l(o,l.pos)?!1:(r&&(t&&pC(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const h=c.parentOffset===c.parent.content.size,p=l.depth===0?void 0:rz(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=h&&p?[{type:p,attrs:d}]:void 0,y=$l(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!y&&$l(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(y=!0,m=p?[{type:p,attrs:d}]:void 0),r){if(y&&(s instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),p&&!h&&!l.parentOffset&&l.parent.type!==p)){const b=e.mapping.map(l.before()),x=e.doc.resolve(b);l.node(-1).canReplaceWith(x.index(),x.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&pC(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return y},xz=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=xn(t,r.schema),{$from:c,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const h=c.node(-1);if(h.type!==l)return!1;const p=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let C=Y.empty;const M=c.index(-1)?1:c.index(-2)?2:3;for(let W=c.depth-M;W>=c.depth-3;W-=1)C=Y.from(c.node(W).copy(C));const L=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,A={...Hf(p,c.node().type.name,c.node().attrs),...e},F=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(A))||void 0;C=C.append(Y.from(l.createAndFill(null,F)||void 0));const R=c.before(c.depth-(M-1));n.replace(R,c.after(-L),new le(C,4-M,0));let U=-1;n.doc.nodesBetween(R,n.doc.content.size,(W,ee)=>{if(U>-1)return!1;W.isTextblock&&W.content.size===0&&(U=ee+1)}),U>-1&&n.setSelection(Be.near(n.doc.resolve(U))),n.scrollIntoView()}return!0}const m=u.pos===c.end()?h.contentMatchAt(0).defaultType:null,y={...Hf(p,h.type.name,h.attrs),...e},b={...Hf(p,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,u.pos);const x=m?[{type:l,attrs:y},{type:m,attrs:b}]:[{type:l,attrs:y}];if(!$l(n.doc,c.pos,2))return!1;if(i){const{selection:C,storedMarks:M}=r,{splittableMarks:L}=s.extensionManager,A=M||C.$to.parentOffset&&C.$from.marks();if(n.split(c.pos,2,x).scrollIntoView(),!A||!i)return!0;const F=A.filter(R=>L.includes(R.type.name));n.ensureMarks(F)}return!0},Gg=(t,e)=>{const n=zy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,n.pos)&&t.join(n.pos),!0},Jg=(t,e)=>{const n=zy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,r)&&t.join(r),!0},Cz=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:c,commands:u,can:d})=>{const{extensions:h,splittableMarks:p}=i.extensionManager,m=xn(t,o.schema),y=xn(e,o.schema),{selection:b,storedMarks:x}=o,{$from:C,$to:M}=b,L=C.blockRange(M),A=x||b.$to.parentOffset&&b.$from.marks();if(!L)return!1;const F=zy(R=>hC(R.type.name,h))(b);if(L.depth>=1&&F&&L.depth-F.depth<=1){if(F.node.type===m)return u.liftListItem(y);if(hC(F.node.type.name,h)&&m.validContent(F.node.content)&&l)return c().command(()=>(s.setNodeMarkup(F.pos,m),!0)).command(()=>Gg(s,m)).command(()=>Jg(s,m)).run()}return!n||!A||!l?c().command(()=>d().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>Gg(s,m)).command(()=>Jg(s,m)).run():c().command(()=>{const R=d().wrapInList(m,r),U=A.filter(W=>p.includes(W.type.name));return s.ensureMarks(U),R?!0:u.clearNodes()}).wrapInList(m,r).command(()=>Gg(s,m)).command(()=>Jg(s,m)).run()},Sz=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=io(t,r.schema);return l0(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},kz=(t,e,n={})=>({state:r,commands:i})=>{const s=xn(t,r.schema),o=xn(e,r.schema),l=Oc(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?i.setNode(o,c):i.setNode(s,{...c,...n})},Ez=(t,e={})=>({state:n,commands:r})=>{const i=xn(t,n.schema);return Oc(n,i,e)?r.lift(i):r.wrapIn(i,e)},Az=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},Tz=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},_z=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,c=io(t,r.schema),{$from:u,empty:d,ranges:h}=l;if(!i)return!0;if(d&&o){let{from:p,to:m}=l;const y=(s=u.marks().find(x=>x.type===c))===null||s===void 0?void 0:s.attrs,b=Hy(u,c,y);b&&(p=b.from,m=b.to),n.removeMark(p,m,c)}else h.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,c)});return n.removeStoredMark(c),!0},Mz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=zh(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=xn(t,r.schema)),l==="mark"&&(o=io(t,r.schema)),i&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{s&&s===h.type&&n.setNodeMarkup(p,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(m=>{if(o===m.type){const y=Math.max(p,u),b=Math.min(p+h.nodeSize,d);n.addMark(y,b,o.create({...m.attrs,...e}))}})})}),!0):!1},Oz=(t,e={})=>({state:n,dispatch:r})=>{const i=xn(t,n.schema);return W4(i,e)(n,r)},Rz=(t,e={})=>({state:n,dispatch:r})=>{const i=xn(t,n.schema);return j4(i,e)(n,r)};var Lz=Object.freeze({__proto__:null,blur:dV,clearContent:hV,clearNodes:pV,command:gV,createParagraphNear:mV,cut:yV,deleteCurrentNode:vV,deleteNode:bV,deleteRange:wV,deleteSelection:xV,enter:CV,exitCode:SV,extendMarkRange:EV,first:AV,focus:TV,forEach:_V,insertContent:MV,insertContentAt:LV,joinBackward:DV,joinDown:NV,joinForward:PV,joinItemBackward:BV,joinItemForward:$V,joinTextblockBackward:HV,joinTextblockForward:FV,joinUp:IV,keyboardShortcut:zV,lift:UV,liftEmptyBlock:WV,liftListItem:jV,newlineInCode:KV,resetAttributes:qV,scrollIntoView:GV,selectAll:JV,selectNodeBackward:YV,selectNodeForward:XV,selectParentNode:ZV,selectTextblockEnd:QV,selectTextblockStart:ez,setContent:tz,setMark:pz,setMeta:gz,setNode:mz,setNodeSelection:yz,setTextSelection:vz,sinkListItem:bz,splitBlock:wz,splitListItem:xz,toggleList:Cz,toggleMark:Sz,toggleNode:kz,toggleWrap:Ez,undoInputRule:Az,unsetAllMarks:Tz,unsetMark:_z,updateAttributes:Mz,wrapIn:Oz,wrapInList:Rz});const Iz=on.create({name:"commands",addCommands(){return{...Lz}}}),Nz=on.create({name:"drop",addProseMirrorPlugins(){return[new Ft({key:new Kt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Dz=on.create({name:"editable",addProseMirrorPlugins(){return[new Ft({key:new Kt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Pz=on.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ft({key:new Kt("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Bz=on.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:d,$anchor:h}=c,{pos:p,parent:m}=h,y=h.parent.isTextblock&&p>0?l.doc.resolve(p-1):h,b=y.parent.type.spec.isolating,x=h.pos-h.parentOffset,C=b&&y.parent.childCount===1?x===h.pos:We.atStart(u).from===p;return!d||!m.type.isTextblock||m.textContent.length||!C||C&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Fy()||PA()?s:i},addProseMirrorPlugins(){return[new Ft({key:new Kt("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),i=t.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,c=We.atStart(e.doc).from,u=We.atEnd(e.doc).to;if(s||!(o===c&&l===u)||!Uh(n.doc))return;const p=n.tr,m=Bh({state:n,transaction:p}),{commands:y}=new $h({editor:this.editor,state:m});if(y.clearNodes(),!!p.steps.length)return p}})]}}),$z=on.create({name:"paste",addProseMirrorPlugins(){return[new Ft({key:new Kt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Hz=on.create({name:"tabindex",addProseMirrorPlugins(){return[new Ft({key:new Kt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ao{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Ao(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ao(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ao(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const l=new Ao(o,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Ao(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const c=o[l];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(c=>n[c]===o.node.attrs[c])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const Fz=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Vz(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let zz=class extends X4{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Vz(Fz,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=MA(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});return this.view.updateState(r),r}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[Dz,fV.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Iz,Pz,Bz,Hz,Nz,$z].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ll(i,this)}createCommandManager(){this.commandManager=new $h({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=o0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=o0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=NA(e,this.options.autofocus);this.view=new m4(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Rl.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return $A(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return fz(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return sz(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return oz(this.state.doc,{blockSeparator:n,textSerializers:{...LA(this.schema),...r}})}get isEmpty(){return Uh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Ao(n,this)}get $doc(){return this.$pos(0)}};function Rc(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=nt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),u=n.from+l.indexOf(o),d=u+o.length;if(Uy(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u);const p=n.from+c+o.length;s.addMark(n.from+c,p,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function HA(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=nt(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const c=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=o+u;d>l?d=l:l=d+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(d,l,c)}else if(r[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function Uz(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=nt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Lc(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=nt(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),u=c&&Sy(c,t.type,s);if(!u)return null;if(o.wrap(c,u),t.keepMarks&&t.editor){const{selection:h,storedMarks:p}=e,{splittableMarks:m}=t.editor.extensionManager,y=p||h.$to.parentOffset&&h.$from.marks();if(y){const b=y.filter(x=>m.includes(x.type.name));o.ensureMarks(b)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&no(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&o.join(n.from-1)}})}let Mn=class a0{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nt(Ae(this,"addOptions",{name:this.name}))),this.storage=nt(Ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new a0(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Vh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new a0(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nt(Ae(n,"addOptions",{name:n.name})),n.storage=nt(Ae(n,"addStorage",{name:n.name,options:n.options})),n}};function Zl(t){return new OA({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=nt(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];let u=n.to;if(l){const d=c.search(/\S/),h=n.from+c.indexOf(l),p=h+l.length;if(Uy(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(x=>x===t.type&&x!==y.mark.type)).filter(y=>y.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+d,h),u=n.from+d+l.length,o.addMark(n.from+d,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function Wz(t){return new OA({find:t.find,handler({match:e,chain:n,range:r,pasteEvent:i}){const s=nt(t.getAttributes,void 0,e,i),o=nt(t.getContent,void 0,s);if(s===!1||s===null)return null;const l={type:t.type.name,attrs:s};o&&(l.content=o),e.input&&n().deleteRange(r).insertContentAt(r.from,l)}})}var rr="top",jr="bottom",Kr="right",ir="left",Wy="auto",nu=[rr,jr,Kr,ir],Ql="start",Ic="end",jz="clippingParents",FA="viewport",Ha="popper",Kz="reference",gC=nu.reduce(function(t,e){return t.concat([e+"-"+Ql,e+"-"+Ic])},[]),VA=[].concat(nu,[Wy]).reduce(function(t,e){return t.concat([e,e+"-"+Ql,e+"-"+Ic])},[]),qz="beforeRead",Gz="read",Jz="afterRead",Yz="beforeMain",Xz="main",Zz="afterMain",Qz="beforeWrite",e5="write",t5="afterWrite",n5=[qz,Gz,Jz,Yz,Xz,Zz,Qz,e5,t5];function Ni(t){return t?(t.nodeName||"").toLowerCase():null}function ui(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ea(t){var e=ui(t).Element;return t instanceof e||t instanceof Element}function Wr(t){var e=ui(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function jy(t){if(typeof ShadowRoot>"u")return!1;var e=ui(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function r5(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Wr(s)||!Ni(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var l=i[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function i5(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(c,u){return c[u]="",c},{});!Wr(i)||!Ni(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(c){i.removeAttribute(c)}))})}}var Ky={name:"applyStyles",enabled:!0,phase:"write",fn:r5,effect:i5,requires:["computeStyles"]};function _i(t){return t.split("-")[0]}var zo=Math.max,bd=Math.min,ta=Math.round;function na(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,i=1;if(Wr(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(r=ta(n.width)/o||1),s>0&&(i=ta(n.height)/s||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function qy(t){var e=na(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function zA(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&jy(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ls(t){return ui(t).getComputedStyle(t)}function s5(t){return["table","td","th"].indexOf(Ni(t))>=0}function so(t){return((ea(t)?t.ownerDocument:t.document)||window.document).documentElement}function Wh(t){return Ni(t)==="html"?t:t.assignedSlot||t.parentNode||(jy(t)?t.host:null)||so(t)}function mC(t){return!Wr(t)||ls(t).position==="fixed"?null:t.offsetParent}function o5(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Wr(t)){var r=ls(t);if(r.position==="fixed")return null}var i=Wh(t);for(jy(i)&&(i=i.host);Wr(i)&&["html","body"].indexOf(Ni(i))<0;){var s=ls(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function ru(t){for(var e=ui(t),n=mC(t);n&&s5(n)&&ls(n).position==="static";)n=mC(n);return n&&(Ni(n)==="html"||Ni(n)==="body"&&ls(n).position==="static")?e:n||o5(t)||e}function Gy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function uc(t,e,n){return zo(t,bd(e,n))}function l5(t,e,n){var r=uc(t,e,n);return r>n?n:r}function UA(){return{top:0,right:0,bottom:0,left:0}}function WA(t){return Object.assign({},UA(),t)}function jA(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var a5=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,WA(typeof t!="number"?t:jA(t,nu))};function c5(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,l=_i(n.placement),c=Gy(l),u=[ir,Kr].indexOf(l)>=0,d=u?"height":"width";if(!(!s||!o)){var h=a5(i.padding,n),p=qy(s),m=c==="y"?rr:ir,y=c==="y"?jr:Kr,b=n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d],x=o[c]-n.rects.reference[c],C=ru(s),M=C?c==="y"?C.clientHeight||0:C.clientWidth||0:0,L=b/2-x/2,A=h[m],F=M-p[d]-h[y],R=M/2-p[d]/2+L,U=uc(A,R,F),W=c;n.modifiersData[r]=(e={},e[W]=U,e.centerOffset=U-R,e)}}function u5(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!zA(e.elements.popper,i)||(e.elements.arrow=i))}var f5={name:"arrow",enabled:!0,phase:"main",fn:c5,effect:u5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ra(t){return t.split("-")[1]}var d5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function h5(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:ta(e*i)/i||0,y:ta(n*i)/i||0}}function yC(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,l=t.position,c=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,h=t.isFixed,p=o.x,m=p===void 0?0:p,y=o.y,b=y===void 0?0:y,x=typeof d=="function"?d({x:m,y:b}):{x:m,y:b};m=x.x,b=x.y;var C=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),L=ir,A=rr,F=window;if(u){var R=ru(n),U="clientHeight",W="clientWidth";if(R===ui(n)&&(R=so(n),ls(R).position!=="static"&&l==="absolute"&&(U="scrollHeight",W="scrollWidth")),R=R,i===rr||(i===ir||i===Kr)&&s===Ic){A=jr;var ee=h&&R===F&&F.visualViewport?F.visualViewport.height:R[U];b-=ee-r.height,b*=c?1:-1}if(i===ir||(i===rr||i===jr)&&s===Ic){L=Kr;var ve=h&&R===F&&F.visualViewport?F.visualViewport.width:R[W];m-=ve-r.width,m*=c?1:-1}}var Ce=Object.assign({position:l},u&&d5),te=d===!0?h5({x:m,y:b}):{x:m,y:b};if(m=te.x,b=te.y,c){var me;return Object.assign({},Ce,(me={},me[A]=M?"0":"",me[L]=C?"0":"",me.transform=(F.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",me))}return Object.assign({},Ce,(e={},e[A]=M?b+"px":"",e[L]=C?m+"px":"",e.transform="",e))}function p5(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,l=n.roundOffsets,c=l===void 0?!0:l,u={placement:_i(e.placement),variation:ra(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,yC(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,yC(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var KA={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:p5,data:{}},gf={passive:!0};function g5(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,l=o===void 0?!0:o,c=ui(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(d){d.addEventListener("scroll",n.update,gf)}),l&&c.addEventListener("resize",n.update,gf),function(){s&&u.forEach(function(d){d.removeEventListener("scroll",n.update,gf)}),l&&c.removeEventListener("resize",n.update,gf)}}var qA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:g5,data:{}},m5={left:"right",right:"left",bottom:"top",top:"bottom"};function Ff(t){return t.replace(/left|right|bottom|top/g,function(e){return m5[e]})}var y5={start:"end",end:"start"};function vC(t){return t.replace(/start|end/g,function(e){return y5[e]})}function Jy(t){var e=ui(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Yy(t){return na(so(t)).left+Jy(t).scrollLeft}function v5(t){var e=ui(t),n=so(t),r=e.visualViewport,i=n.clientWidth,s=n.clientHeight,o=0,l=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,l=r.offsetTop)),{width:i,height:s,x:o+Yy(t),y:l}}function b5(t){var e,n=so(t),r=Jy(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=zo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=zo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+Yy(t),c=-r.scrollTop;return ls(i||n).direction==="rtl"&&(l+=zo(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:l,y:c}}function Xy(t){var e=ls(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function GA(t){return["html","body","#document"].indexOf(Ni(t))>=0?t.ownerDocument.body:Wr(t)&&Xy(t)?t:GA(Wh(t))}function fc(t,e){var n;e===void 0&&(e=[]);var r=GA(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=ui(r),o=i?[s].concat(s.visualViewport||[],Xy(r)?r:[]):r,l=e.concat(o);return i?l:l.concat(fc(Wh(o)))}function c0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function w5(t){var e=na(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function bC(t,e){return e===FA?c0(v5(t)):ea(e)?w5(e):c0(b5(so(t)))}function x5(t){var e=fc(Wh(t)),n=["absolute","fixed"].indexOf(ls(t).position)>=0,r=n&&Wr(t)?ru(t):t;return ea(r)?e.filter(function(i){return ea(i)&&zA(i,r)&&Ni(i)!=="body"}):[]}function C5(t,e,n){var r=e==="clippingParents"?x5(t):[].concat(e),i=[].concat(r,[n]),s=i[0],o=i.reduce(function(l,c){var u=bC(t,c);return l.top=zo(u.top,l.top),l.right=bd(u.right,l.right),l.bottom=bd(u.bottom,l.bottom),l.left=zo(u.left,l.left),l},bC(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function JA(t){var e=t.reference,n=t.element,r=t.placement,i=r?_i(r):null,s=r?ra(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,c;switch(i){case rr:c={x:o,y:e.y-n.height};break;case jr:c={x:o,y:e.y+e.height};break;case Kr:c={x:e.x+e.width,y:l};break;case ir:c={x:e.x-n.width,y:l};break;default:c={x:e.x,y:e.y}}var u=i?Gy(i):null;if(u!=null){var d=u==="y"?"height":"width";switch(s){case Ql:c[u]=c[u]-(e[d]/2-n[d]/2);break;case Ic:c[u]=c[u]+(e[d]/2-n[d]/2);break}}return c}function Nc(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.boundary,o=s===void 0?jz:s,l=n.rootBoundary,c=l===void 0?FA:l,u=n.elementContext,d=u===void 0?Ha:u,h=n.altBoundary,p=h===void 0?!1:h,m=n.padding,y=m===void 0?0:m,b=WA(typeof y!="number"?y:jA(y,nu)),x=d===Ha?Kz:Ha,C=t.rects.popper,M=t.elements[p?x:d],L=C5(ea(M)?M:M.contextElement||so(t.elements.popper),o,c),A=na(t.elements.reference),F=JA({reference:A,element:C,strategy:"absolute",placement:i}),R=c0(Object.assign({},C,F)),U=d===Ha?R:A,W={top:L.top-U.top+b.top,bottom:U.bottom-L.bottom+b.bottom,left:L.left-U.left+b.left,right:U.right-L.right+b.right},ee=t.modifiersData.offset;if(d===Ha&&ee){var ve=ee[i];Object.keys(W).forEach(function(Ce){var te=[Kr,jr].indexOf(Ce)>=0?1:-1,me=[rr,jr].indexOf(Ce)>=0?"y":"x";W[Ce]+=ve[me]*te})}return W}function S5(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?VA:c,d=ra(r),h=d?l?gC:gC.filter(function(y){return ra(y)===d}):nu,p=h.filter(function(y){return u.indexOf(y)>=0});p.length===0&&(p=h);var m=p.reduce(function(y,b){return y[b]=Nc(t,{placement:b,boundary:i,rootBoundary:s,padding:o})[_i(b)],y},{});return Object.keys(m).sort(function(y,b){return m[y]-m[b]})}function k5(t){if(_i(t)===Wy)return[];var e=Ff(t);return[vC(t),e,vC(e)]}function E5(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,u=n.padding,d=n.boundary,h=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,y=m===void 0?!0:m,b=n.allowedAutoPlacements,x=e.options.placement,C=_i(x),M=C===x,L=c||(M||!y?[Ff(x)]:k5(x)),A=[x].concat(L).reduce(function(He,De){return He.concat(_i(De)===Wy?S5(e,{placement:De,boundary:d,rootBoundary:h,padding:u,flipVariations:y,allowedAutoPlacements:b}):De)},[]),F=e.rects.reference,R=e.rects.popper,U=new Map,W=!0,ee=A[0],ve=0;ve<A.length;ve++){var Ce=A[ve],te=_i(Ce),me=ra(Ce)===Ql,Qe=[rr,jr].indexOf(te)>=0,rt=Qe?"width":"height",Re=Nc(e,{placement:Ce,boundary:d,rootBoundary:h,altBoundary:p,padding:u}),be=Qe?me?Kr:ir:me?jr:rr;F[rt]>R[rt]&&(be=Ff(be));var j=Ff(be),de=[];if(s&&de.push(Re[te]<=0),l&&de.push(Re[be]<=0,Re[j]<=0),de.every(function(He){return He})){ee=Ce,W=!1;break}U.set(Ce,de)}if(W)for(var Ee=y?3:1,pe=function(He){var De=A.find(function(Le){var $=U.get(Le);if($)return $.slice(0,He).every(function(re){return re})});if(De)return ee=De,"break"},we=Ee;we>0;we--){var _e=pe(we);if(_e==="break")break}e.placement!==ee&&(e.modifiersData[r]._skip=!0,e.placement=ee,e.reset=!0)}}var A5={name:"flip",enabled:!0,phase:"main",fn:E5,requiresIfExists:["offset"],data:{_skip:!1}};function wC(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function xC(t){return[rr,Kr,jr,ir].some(function(e){return t[e]>=0})}function T5(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Nc(e,{elementContext:"reference"}),l=Nc(e,{altBoundary:!0}),c=wC(o,r),u=wC(l,i,s),d=xC(c),h=xC(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var _5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:T5};function M5(t,e,n){var r=_i(t),i=[ir,rr].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],l=s[1];return o=o||0,l=(l||0)*i,[ir,Kr].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function O5(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=VA.reduce(function(d,h){return d[h]=M5(h,e.rects,s),d},{}),l=o[e.placement],c=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}var R5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:O5};function L5(t){var e=t.state,n=t.name;e.modifiersData[n]=JA({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var YA={name:"popperOffsets",enabled:!0,phase:"read",fn:L5,data:{}};function I5(t){return t==="x"?"y":"x"}function N5(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,h=n.padding,p=n.tether,m=p===void 0?!0:p,y=n.tetherOffset,b=y===void 0?0:y,x=Nc(e,{boundary:c,rootBoundary:u,padding:h,altBoundary:d}),C=_i(e.placement),M=ra(e.placement),L=!M,A=Gy(C),F=I5(A),R=e.modifiersData.popperOffsets,U=e.rects.reference,W=e.rects.popper,ee=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,ve=typeof ee=="number"?{mainAxis:ee,altAxis:ee}:Object.assign({mainAxis:0,altAxis:0},ee),Ce=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,te={x:0,y:0};if(R){if(s){var me,Qe=A==="y"?rr:ir,rt=A==="y"?jr:Kr,Re=A==="y"?"height":"width",be=R[A],j=be+x[Qe],de=be-x[rt],Ee=m?-W[Re]/2:0,pe=M===Ql?U[Re]:W[Re],we=M===Ql?-W[Re]:-U[Re],_e=e.elements.arrow,He=m&&_e?qy(_e):{width:0,height:0},De=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:UA(),Le=De[Qe],$=De[rt],re=uc(0,U[Re],He[Re]),ie=L?U[Re]/2-Ee-re-Le-ve.mainAxis:pe-re-Le-ve.mainAxis,xe=L?-U[Re]/2+Ee+re+$+ve.mainAxis:we+re+$+ve.mainAxis,Xe=e.elements.arrow&&ru(e.elements.arrow),ft=Xe?A==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,E=(me=Ce==null?void 0:Ce[A])!=null?me:0,T=be+ie-E-ft,D=be+xe-E,z=uc(m?bd(j,T):j,be,m?zo(de,D):de);R[A]=z,te[A]=z-be}if(l){var H,ne=A==="x"?rr:ir,ae=A==="x"?jr:Kr,Z=R[F],G=F==="y"?"height":"width",X=Z+x[ne],ce=Z-x[ae],Te=[rr,ir].indexOf(C)!==-1,Se=(H=Ce==null?void 0:Ce[F])!=null?H:0,Pe=Te?X:Z-U[G]-W[G]-Se+ve.altAxis,je=Te?Z+U[G]+W[G]-Se-ve.altAxis:ce,Ge=m&&Te?l5(Pe,Z,je):uc(m?Pe:X,Z,m?je:ce);R[F]=Ge,te[F]=Ge-Z}e.modifiersData[r]=te}}var D5={name:"preventOverflow",enabled:!0,phase:"main",fn:N5,requiresIfExists:["offset"]};function P5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function B5(t){return t===ui(t)||!Wr(t)?Jy(t):P5(t)}function $5(t){var e=t.getBoundingClientRect(),n=ta(e.width)/t.offsetWidth||1,r=ta(e.height)/t.offsetHeight||1;return n!==1||r!==1}function H5(t,e,n){n===void 0&&(n=!1);var r=Wr(e),i=Wr(e)&&$5(e),s=so(e),o=na(t,i),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((Ni(e)!=="body"||Xy(s))&&(l=B5(e)),Wr(e)?(c=na(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=Yy(s))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function F5(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=e.get(l);c&&i(c)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function V5(t){var e=F5(t);return n5.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function z5(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function U5(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var CC={placement:"bottom",modifiers:[],strategy:"absolute"};function SC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Zy(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?CC:i;return function(o,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},CC,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(b){var x=typeof b=="function"?b(u.options):b;y(),u.options=Object.assign({},s,u.options,x),u.scrollParents={reference:ea(o)?fc(o):o.contextElement?fc(o.contextElement):[],popper:fc(l)};var C=V5(U5([].concat(r,u.options.modifiers)));return u.orderedModifiers=C.filter(function(M){return M.enabled}),m(),p.update()},forceUpdate:function(){if(!h){var b=u.elements,x=b.reference,C=b.popper;if(SC(x,C)){u.rects={reference:H5(x,ru(C),u.options.strategy==="fixed"),popper:qy(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(W){return u.modifiersData[W.name]=Object.assign({},W.data)});for(var M=0;M<u.orderedModifiers.length;M++){if(u.reset===!0){u.reset=!1,M=-1;continue}var L=u.orderedModifiers[M],A=L.fn,F=L.options,R=F===void 0?{}:F,U=L.name;typeof A=="function"&&(u=A({state:u,options:R,name:U,instance:p})||u)}}}},update:z5(function(){return new Promise(function(b){p.forceUpdate(),b(u)})}),destroy:function(){y(),h=!0}};if(!SC(o,l))return p;p.setOptions(c).then(function(b){!h&&c.onFirstUpdate&&c.onFirstUpdate(b)});function m(){u.orderedModifiers.forEach(function(b){var x=b.name,C=b.options,M=C===void 0?{}:C,L=b.effect;if(typeof L=="function"){var A=L({state:u,name:x,instance:p,options:M}),F=function(){};d.push(A||F)}})}function y(){d.forEach(function(b){return b()}),d=[]}return p}}Zy();var W5=[qA,YA,KA,Ky];Zy({defaultModifiers:W5});var j5=[qA,YA,KA,Ky,R5,A5,D5,f5,_5],K5=Zy({defaultModifiers:j5}),q5="tippy-box",XA="tippy-content",G5="tippy-backdrop",ZA="tippy-arrow",QA="tippy-svg-arrow",Co={passive:!0,capture:!0},eT=function(){return document.body};function Yg(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Qy(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function tT(t,e){return typeof t=="function"?t.apply(void 0,e):t}function kC(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function J5(t){return t.split(/\s+/).filter(Boolean)}function Ml(t){return[].concat(t)}function EC(t,e){t.indexOf(e)===-1&&t.push(e)}function Y5(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function X5(t){return t.split("-")[0]}function wd(t){return[].slice.call(t)}function AC(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function dc(){return document.createElement("div")}function jh(t){return["Element","Fragment"].some(function(e){return Qy(t,e)})}function Z5(t){return Qy(t,"NodeList")}function Q5(t){return Qy(t,"MouseEvent")}function e6(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function t6(t){return jh(t)?[t]:Z5(t)?wd(t):Array.isArray(t)?t:wd(document.querySelectorAll(t))}function Xg(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function TC(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function n6(t){var e,n=Ml(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function r6(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,l=i.props,c=l.interactiveBorder,u=X5(o.placement),d=o.modifiersData.offset;if(!d)return!0;var h=u==="bottom"?d.top.y:0,p=u==="top"?d.bottom.y:0,m=u==="right"?d.left.x:0,y=u==="left"?d.right.x:0,b=s.top-r+h>c,x=r-s.bottom-p>c,C=s.left-n+m>c,M=n-s.right-y>c;return b||x||C||M})}function Zg(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function _C(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var ki={isTouch:!1},MC=0;function i6(){ki.isTouch||(ki.isTouch=!0,window.performance&&document.addEventListener("mousemove",nT))}function nT(){var t=performance.now();t-MC<20&&(ki.isTouch=!1,document.removeEventListener("mousemove",nT)),MC=t}function s6(){var t=document.activeElement;if(e6(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function o6(){document.addEventListener("touchstart",i6,Co),window.addEventListener("blur",s6)}var l6=typeof window<"u"&&typeof document<"u",a6=l6?!!window.msCrypto:!1,c6={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},u6={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ni=Object.assign({appendTo:eT,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},c6,u6),f6=Object.keys(ni),d6=function(e){var n=Object.keys(e);n.forEach(function(r){ni[r]=e[r]})};function rT(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var l;r[s]=t[s]!==void 0?t[s]:(l=ni[s])!=null?l:o}return r},{});return Object.assign({},t,n)}function h6(t,e){var n=e?Object.keys(rT(Object.assign({},ni,{plugins:e}))):f6,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function OC(t,e){var n=Object.assign({},e,{content:tT(e.content,[t])},e.ignoreAttributes?{}:h6(t,e.plugins));return n.aria=Object.assign({},ni.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var p6=function(){return"innerHTML"};function u0(t,e){t[p6()]=e}function RC(t){var e=dc();return t===!0?e.className=ZA:(e.className=QA,jh(t)?e.appendChild(t):u0(e,t)),e}function LC(t,e){jh(e.content)?(u0(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?u0(t,e.content):t.textContent=e.content)}function f0(t){var e=t.firstElementChild,n=wd(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(XA)}),arrow:n.find(function(r){return r.classList.contains(ZA)||r.classList.contains(QA)}),backdrop:n.find(function(r){return r.classList.contains(G5)})}}function iT(t){var e=dc(),n=dc();n.className=q5,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=dc();r.className=XA,r.setAttribute("data-state","hidden"),LC(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var l=f0(e),c=l.box,u=l.content,d=l.arrow;o.theme?c.setAttribute("data-theme",o.theme):c.removeAttribute("data-theme"),typeof o.animation=="string"?c.setAttribute("data-animation",o.animation):c.removeAttribute("data-animation"),o.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?c.setAttribute("role",o.role):c.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&LC(u,t.props),o.arrow?d?s.arrow!==o.arrow&&(c.removeChild(d),c.appendChild(RC(o.arrow))):c.appendChild(RC(o.arrow)):d&&c.removeChild(d)}return{popper:e,onUpdate:i}}iT.$$tippy=!0;var g6=1,mf=[],Qg=[];function m6(t,e){var n=OC(t,Object.assign({},ni,rT(AC(e)))),r,i,s,o=!1,l=!1,c=!1,u=!1,d,h,p,m=[],y=kC(T,n.interactiveDebounce),b,x=g6++,C=null,M=Y5(n.plugins),L={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},A={id:x,reference:t,popper:dc(),popperInstance:C,props:n,state:L,plugins:M,clearDelayTimeouts:Pe,setProps:je,setContent:Ge,show:gt,hide:St,hideWithInteractivity:qt,enable:Te,disable:Se,unmount:oe,destroy:Fe};if(!n.render)return A;var F=n.render(A),R=F.popper,U=F.onUpdate;R.setAttribute("data-tippy-root",""),R.id="tippy-"+A.id,A.popper=R,t._tippy=A,R._tippy=A;var W=M.map(function(P){return P.fn(A)}),ee=t.hasAttribute("aria-expanded");return Xe(),Ee(),be(),j("onCreate",[A]),n.showOnCreate&&X(),R.addEventListener("mouseenter",function(){A.props.interactive&&A.state.isVisible&&A.clearDelayTimeouts()}),R.addEventListener("mouseleave",function(){A.props.interactive&&A.props.trigger.indexOf("mouseenter")>=0&&Qe().addEventListener("mousemove",y)}),A;function ve(){var P=A.props.touch;return Array.isArray(P)?P:[P,0]}function Ce(){return ve()[0]==="hold"}function te(){var P;return!!((P=A.props.render)!=null&&P.$$tippy)}function me(){return b||t}function Qe(){var P=me().parentNode;return P?n6(P):document}function rt(){return f0(R)}function Re(P){return A.state.isMounted&&!A.state.isVisible||ki.isTouch||d&&d.type==="focus"?0:Yg(A.props.delay,P?0:1,ni.delay)}function be(P){P===void 0&&(P=!1),R.style.pointerEvents=A.props.interactive&&!P?"":"none",R.style.zIndex=""+A.props.zIndex}function j(P,se,ue){if(ue===void 0&&(ue=!0),W.forEach(function(Ke){Ke[P]&&Ke[P].apply(Ke,se)}),ue){var Me;(Me=A.props)[P].apply(Me,se)}}function de(){var P=A.props.aria;if(P.content){var se="aria-"+P.content,ue=R.id,Me=Ml(A.props.triggerTarget||t);Me.forEach(function(Ke){var kt=Ke.getAttribute(se);if(A.state.isVisible)Ke.setAttribute(se,kt?kt+" "+ue:ue);else{var Vt=kt&&kt.replace(ue,"").trim();Vt?Ke.setAttribute(se,Vt):Ke.removeAttribute(se)}})}}function Ee(){if(!(ee||!A.props.aria.expanded)){var P=Ml(A.props.triggerTarget||t);P.forEach(function(se){A.props.interactive?se.setAttribute("aria-expanded",A.state.isVisible&&se===me()?"true":"false"):se.removeAttribute("aria-expanded")})}}function pe(){Qe().removeEventListener("mousemove",y),mf=mf.filter(function(P){return P!==y})}function we(P){if(!(ki.isTouch&&(c||P.type==="mousedown"))){var se=P.composedPath&&P.composedPath()[0]||P.target;if(!(A.props.interactive&&_C(R,se))){if(Ml(A.props.triggerTarget||t).some(function(ue){return _C(ue,se)})){if(ki.isTouch||A.state.isVisible&&A.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[A,P]);A.props.hideOnClick===!0&&(A.clearDelayTimeouts(),A.hide(),l=!0,setTimeout(function(){l=!1}),A.state.isMounted||Le())}}}function _e(){c=!0}function He(){c=!1}function De(){var P=Qe();P.addEventListener("mousedown",we,!0),P.addEventListener("touchend",we,Co),P.addEventListener("touchstart",He,Co),P.addEventListener("touchmove",_e,Co)}function Le(){var P=Qe();P.removeEventListener("mousedown",we,!0),P.removeEventListener("touchend",we,Co),P.removeEventListener("touchstart",He,Co),P.removeEventListener("touchmove",_e,Co)}function $(P,se){ie(P,function(){!A.state.isVisible&&R.parentNode&&R.parentNode.contains(R)&&se()})}function re(P,se){ie(P,se)}function ie(P,se){var ue=rt().box;function Me(Ke){Ke.target===ue&&(Zg(ue,"remove",Me),se())}if(P===0)return se();Zg(ue,"remove",h),Zg(ue,"add",Me),h=Me}function xe(P,se,ue){ue===void 0&&(ue=!1);var Me=Ml(A.props.triggerTarget||t);Me.forEach(function(Ke){Ke.addEventListener(P,se,ue),m.push({node:Ke,eventType:P,handler:se,options:ue})})}function Xe(){Ce()&&(xe("touchstart",E,{passive:!0}),xe("touchend",D,{passive:!0})),J5(A.props.trigger).forEach(function(P){if(P!=="manual")switch(xe(P,E),P){case"mouseenter":xe("mouseleave",D);break;case"focus":xe(a6?"focusout":"blur",z);break;case"focusin":xe("focusout",z);break}})}function ft(){m.forEach(function(P){var se=P.node,ue=P.eventType,Me=P.handler,Ke=P.options;se.removeEventListener(ue,Me,Ke)}),m=[]}function E(P){var se,ue=!1;if(!(!A.state.isEnabled||H(P)||l)){var Me=((se=d)==null?void 0:se.type)==="focus";d=P,b=P.currentTarget,Ee(),!A.state.isVisible&&Q5(P)&&mf.forEach(function(Ke){return Ke(P)}),P.type==="click"&&(A.props.trigger.indexOf("mouseenter")<0||o)&&A.props.hideOnClick!==!1&&A.state.isVisible?ue=!0:X(P),P.type==="click"&&(o=!ue),ue&&!Me&&ce(P)}}function T(P){var se=P.target,ue=me().contains(se)||R.contains(se);if(!(P.type==="mousemove"&&ue)){var Me=G().concat(R).map(function(Ke){var kt,Vt=Ke._tippy,cn=(kt=Vt.popperInstance)==null?void 0:kt.state;return cn?{popperRect:Ke.getBoundingClientRect(),popperState:cn,props:n}:null}).filter(Boolean);r6(Me,P)&&(pe(),ce(P))}}function D(P){var se=H(P)||A.props.trigger.indexOf("click")>=0&&o;if(!se){if(A.props.interactive){A.hideWithInteractivity(P);return}ce(P)}}function z(P){A.props.trigger.indexOf("focusin")<0&&P.target!==me()||A.props.interactive&&P.relatedTarget&&R.contains(P.relatedTarget)||ce(P)}function H(P){return ki.isTouch?Ce()!==P.type.indexOf("touch")>=0:!1}function ne(){ae();var P=A.props,se=P.popperOptions,ue=P.placement,Me=P.offset,Ke=P.getReferenceClientRect,kt=P.moveTransition,Vt=te()?f0(R).arrow:null,cn=Ke?{getBoundingClientRect:Ke,contextElement:Ke.contextElement||me()}:t,lr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ol){var fs=ol.state;if(te()){var fu=rt(),wa=fu.box;["placement","reference-hidden","escaped"].forEach(function(ll){ll==="placement"?wa.setAttribute("data-placement",fs.placement):fs.attributes.popper["data-popper-"+ll]?wa.setAttribute("data-"+ll,""):wa.removeAttribute("data-"+ll)}),fs.attributes.popper={}}}},On=[{name:"offset",options:{offset:Me}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!kt}},lr];te()&&Vt&&On.push({name:"arrow",options:{element:Vt,padding:3}}),On.push.apply(On,(se==null?void 0:se.modifiers)||[]),A.popperInstance=K5(cn,R,Object.assign({},se,{placement:ue,onFirstUpdate:p,modifiers:On}))}function ae(){A.popperInstance&&(A.popperInstance.destroy(),A.popperInstance=null)}function Z(){var P=A.props.appendTo,se,ue=me();A.props.interactive&&P===eT||P==="parent"?se=ue.parentNode:se=tT(P,[ue]),se.contains(R)||se.appendChild(R),A.state.isMounted=!0,ne()}function G(){return wd(R.querySelectorAll("[data-tippy-root]"))}function X(P){A.clearDelayTimeouts(),P&&j("onTrigger",[A,P]),De();var se=Re(!0),ue=ve(),Me=ue[0],Ke=ue[1];ki.isTouch&&Me==="hold"&&Ke&&(se=Ke),se?r=setTimeout(function(){A.show()},se):A.show()}function ce(P){if(A.clearDelayTimeouts(),j("onUntrigger",[A,P]),!A.state.isVisible){Le();return}if(!(A.props.trigger.indexOf("mouseenter")>=0&&A.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(P.type)>=0&&o)){var se=Re(!1);se?i=setTimeout(function(){A.state.isVisible&&A.hide()},se):s=requestAnimationFrame(function(){A.hide()})}}function Te(){A.state.isEnabled=!0}function Se(){A.hide(),A.state.isEnabled=!1}function Pe(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function je(P){if(!A.state.isDestroyed){j("onBeforeUpdate",[A,P]),ft();var se=A.props,ue=OC(t,Object.assign({},se,AC(P),{ignoreAttributes:!0}));A.props=ue,Xe(),se.interactiveDebounce!==ue.interactiveDebounce&&(pe(),y=kC(T,ue.interactiveDebounce)),se.triggerTarget&&!ue.triggerTarget?Ml(se.triggerTarget).forEach(function(Me){Me.removeAttribute("aria-expanded")}):ue.triggerTarget&&t.removeAttribute("aria-expanded"),Ee(),be(),U&&U(se,ue),A.popperInstance&&(ne(),G().forEach(function(Me){requestAnimationFrame(Me._tippy.popperInstance.forceUpdate)})),j("onAfterUpdate",[A,P])}}function Ge(P){A.setProps({content:P})}function gt(){var P=A.state.isVisible,se=A.state.isDestroyed,ue=!A.state.isEnabled,Me=ki.isTouch&&!A.props.touch,Ke=Yg(A.props.duration,0,ni.duration);if(!(P||se||ue||Me)&&!me().hasAttribute("disabled")&&(j("onShow",[A],!1),A.props.onShow(A)!==!1)){if(A.state.isVisible=!0,te()&&(R.style.visibility="visible"),be(),De(),A.state.isMounted||(R.style.transition="none"),te()){var kt=rt(),Vt=kt.box,cn=kt.content;Xg([Vt,cn],0)}p=function(){var On;if(!(!A.state.isVisible||u)){if(u=!0,R.offsetHeight,R.style.transition=A.props.moveTransition,te()&&A.props.animation){var gn=rt(),ol=gn.box,fs=gn.content;Xg([ol,fs],Ke),TC([ol,fs],"visible")}de(),Ee(),EC(Qg,A),(On=A.popperInstance)==null||On.forceUpdate(),j("onMount",[A]),A.props.animation&&te()&&re(Ke,function(){A.state.isShown=!0,j("onShown",[A])})}},Z()}}function St(){var P=!A.state.isVisible,se=A.state.isDestroyed,ue=!A.state.isEnabled,Me=Yg(A.props.duration,1,ni.duration);if(!(P||se||ue)&&(j("onHide",[A],!1),A.props.onHide(A)!==!1)){if(A.state.isVisible=!1,A.state.isShown=!1,u=!1,o=!1,te()&&(R.style.visibility="hidden"),pe(),Le(),be(!0),te()){var Ke=rt(),kt=Ke.box,Vt=Ke.content;A.props.animation&&(Xg([kt,Vt],Me),TC([kt,Vt],"hidden"))}de(),Ee(),A.props.animation?te()&&$(Me,A.unmount):A.unmount()}}function qt(P){Qe().addEventListener("mousemove",y),EC(mf,y),y(P)}function oe(){A.state.isVisible&&A.hide(),A.state.isMounted&&(ae(),G().forEach(function(P){P._tippy.unmount()}),R.parentNode&&R.parentNode.removeChild(R),Qg=Qg.filter(function(P){return P!==A}),A.state.isMounted=!1,j("onHidden",[A]))}function Fe(){A.state.isDestroyed||(A.clearDelayTimeouts(),A.unmount(),ft(),delete t._tippy,A.state.isDestroyed=!0,j("onDestroy",[A]))}}function iu(t,e){e===void 0&&(e={});var n=ni.plugins.concat(e.plugins||[]);o6();var r=Object.assign({},e,{plugins:n}),i=t6(t),s=i.reduce(function(o,l){var c=l&&m6(l,r);return c&&o.push(c),o},[]);return jh(t)?s[0]:s}iu.defaultProps=ni;iu.setDefaultProps=d6;iu.currentInput=ki;Object.assign({},Ky,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});iu.setDefaultProps({render:iT});function IC(t){return iP((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class y6 extends zz{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=IC(this.view.state),this.reactiveExtensionStorage=IC(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),yh(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const v6=bt({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=Ie(),n=by();return wr(()=>{const r=t.editor;r&&r.options.element&&e.value&&bh(()=>{if(!e.value||!r.options.element.firstChild)return;const i=at(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:i}),r.createNodeViews()})}),py(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,r.appContext=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){return $t("div",{ref:t=>{this.rootEl=t}})}}),si=()=>new Map,d0=t=>{const e=si();return t.forEach((n,r)=>{e.set(r,n)}),e},oo=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},b6=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},w6=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Jo=()=>new Set,em=t=>t[t.length-1],x6=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Yo=Array.from,C6=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},h0=Array.isArray;class sT{constructor(){this._observers=si()}on(e,n){return oo(this._observers,e,Jo).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Yo((this._observers.get(e)||si()).values()).forEach(r=>r(...n))}destroy(){this._observers=si()}}const as=Math.floor,Vf=Math.abs,Kh=(t,e)=>t<e?t:e,da=(t,e)=>t>e?t:e,oT=t=>t!==0?t<0:1/t<0,NC=1,DC=2,tm=4,nm=8,Dc=32,rs=64,vr=128,qh=31,p0=63,Uo=127,S6=2147483647,lT=Number.MAX_SAFE_INTEGER,k6=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&as(t)===t),E6=t=>t.toLowerCase(),A6=/^\s*/g,T6=t=>t.replace(A6,""),_6=/([A-Z])/g,PC=(t,e)=>T6(t.replace(_6,n=>`${e}${E6(n)}`)),M6=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},Pc=typeof TextEncoder<"u"?new TextEncoder:null,O6=t=>Pc.encode(t),R6=Pc?O6:M6;let hc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});hc&&hc.decode(new Uint8Array).length===1&&(hc=null);class su{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Gh=()=>new su,L6=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Ti=t=>{const e=new Uint8Array(L6(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},I6=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(da(n,e)*2),t.cpos=0)},yn=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},g0=yn,pt=(t,e)=>{for(;e>Uo;)yn(t,vr|Uo&e),e=as(e/128);yn(t,Uo&e)},e1=(t,e)=>{const n=oT(e);for(n&&(e=-e),yn(t,(e>p0?vr:0)|(n?rs:0)|p0&e),e=as(e/64);e>0;)yn(t,(e>Uo?vr:0)|Uo&e),e=as(e/128)},m0=new Uint8Array(3e4),N6=m0.length/3,D6=(t,e)=>{if(e.length<N6){const n=Pc.encodeInto(e,m0).written||0;pt(t,n);for(let r=0;r<n;r++)yn(t,m0[r])}else pr(t,R6(e))},P6=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;pt(t,r);for(let i=0;i<r;i++)yn(t,n.codePointAt(i))},Vl=Pc&&Pc.encodeInto?D6:P6,Jh=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=Kh(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(da(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},pr=(t,e)=>{pt(t,e.byteLength),Jh(t,e)},t1=(t,e)=>{I6(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},B6=(t,e)=>t1(t,4).setFloat32(0,e,!1),$6=(t,e)=>t1(t,8).setFloat64(0,e,!1),H6=(t,e)=>t1(t,8).setBigInt64(0,e,!1),BC=new DataView(new ArrayBuffer(4)),F6=t=>(BC.setFloat32(0,t),BC.getFloat32(0)===t),Bc=(t,e)=>{switch(typeof e){case"string":yn(t,119),Vl(t,e);break;case"number":k6(e)&&Vf(e)<=S6?(yn(t,125),e1(t,e)):F6(e)?(yn(t,124),B6(t,e)):(yn(t,123),$6(t,e));break;case"bigint":yn(t,122),H6(t,e);break;case"object":if(e===null)yn(t,126);else if(h0(e)){yn(t,117),pt(t,e.length);for(let n=0;n<e.length;n++)Bc(t,e[n])}else if(e instanceof Uint8Array)yn(t,116),pr(t,e);else{yn(t,118);const n=Object.keys(e);pt(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];Vl(t,i),Bc(t,e[i])}}break;case"boolean":yn(t,e?120:121);break;default:yn(t,127)}};class $C extends su{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&pt(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const HC=t=>{t.count>0&&(e1(t.encoder,t.count===1?t.s:-t.s),t.count>1&&pt(t.encoder,t.count-2))};class zf{constructor(){this.encoder=new su,this.s=0,this.count=0}write(e){this.s===e?this.count++:(HC(this),this.count=1,this.s=e)}toUint8Array(){return HC(this),Ti(this.encoder)}}const FC=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);e1(t.encoder,e),t.count>1&&pt(t.encoder,t.count-2)}};class rm{constructor(){this.encoder=new su,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(FC(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return FC(this),Ti(this.encoder)}}class V6{constructor(){this.sarr=[],this.s="",this.lensE=new zf}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new su;return this.sarr.push(this.s),this.s="",Vl(e,this.sarr.join("")),Jh(e,this.lensE.toUint8Array()),Ti(e)}}const Qs=t=>new Error(t),oi=()=>{throw Qs("Method unimplemented")},Cr=()=>{throw Qs("Unexpected case")},aT=Qs("Unexpected end of array"),cT=Qs("Integer out of Range");class Yh{constructor(e){this.arr=e,this.pos=0}}const n1=t=>new Yh(t),z6=t=>t.pos!==t.arr.length,U6=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Dr=t=>U6(t,Dt(t)),$c=t=>t.arr[t.pos++],Dt=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Uo)*n,n*=128,i<vr)return e;if(e>lT)throw cT}throw aT},r1=t=>{let e=t.arr[t.pos++],n=e&p0,r=64;const i=(e&rs)>0?-1:1;if(!(e&vr))return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&Uo)*r,r*=128,e<vr)return i*n;if(n>lT)throw cT}throw aT},W6=t=>{let e=Dt(t);if(e===0)return"";{let n=String.fromCodePoint($c(t));if(--e<100)for(;e--;)n+=String.fromCodePoint($c(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},j6=t=>hc.decode(Dr(t)),y0=hc?j6:W6,i1=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},K6=t=>i1(t,4).getFloat32(0,!1),q6=t=>i1(t,8).getFloat64(0,!1),G6=t=>i1(t,8).getBigInt64(0,!1),J6=[t=>{},t=>null,r1,K6,q6,G6,t=>!1,t=>!0,y0,t=>{const e=Dt(t),n={};for(let r=0;r<e;r++){const i=y0(t);n[i]=xd(t)}return n},t=>{const e=Dt(t),n=[];for(let r=0;r<e;r++)n.push(xd(t));return n},Dr],xd=t=>J6[127-$c(t)](t);class VC extends Yh{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),z6(this)?this.count=Dt(this)+1:this.count=-1),this.count--,this.s}}class Uf extends Yh{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=r1(this);const e=oT(this.s);this.count=1,e&&(this.s=-this.s,this.count=Dt(this)+2)}return this.count--,this.s}}class im extends Yh{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=r1(this),n=e&1;this.diff=as(e/2),this.count=1,n&&(this.count=Dt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Y6{constructor(e){this.decoder=new Uf(e),this.str=y0(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const X6=crypto.getRandomValues.bind(crypto),Z6=Math.random,uT=()=>X6(new Uint32Array(1))[0],Q6=t=>t[as(Z6()*t.length)],eU="10000000-1000-4000-8000"+-1e11,tU=()=>eU.replace(/[018]/g,t=>(t^uT()&15>>t/4).toString(16)),nU=Date.now,zC=t=>new Promise(t);Promise.all.bind(Promise);const UC=t=>t===void 0?null:t;class rU{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let fT=new rU,iU=!0;try{typeof localStorage<"u"&&localStorage&&(fT=localStorage,iU=!1)}catch{}const sU=fT,oU=Object.assign,dT=Object.keys,lU=(t,e)=>{for(const n in t)e(t[n],n)},WC=t=>dT(t).length,aU=t=>{for(const e in t)return!1;return!0},cU=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},uU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),fU=(t,e)=>t===e||WC(t)===WC(e)&&cU(t,(n,r)=>(n!==void 0||uU(e,r))&&e[r]===n),s1=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&s1(t,e,n+1)}},dU=(t,e)=>e.includes(t);var hT={};const ia=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",hU=typeof window<"u"&&typeof document<"u"&&!ia;let yi;const pU=()=>{if(yi===void 0)if(ia){yi=si();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&yi.set(e,""),e=r):e!==null&&(yi.set(e,r),e=null)}e!==null&&yi.set(e,"")}else typeof location=="object"?(yi=si(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");yi.set(`--${PC(e,"-")}`,n),yi.set(`-${PC(e,"-")}`,n)}})):yi=si();return yi},v0=t=>pU().has(t),b0=t=>UC(ia?hT[t.toUpperCase().replaceAll("-","_")]:sU.getItem(t)),pT=t=>v0("--"+t)||b0(t)!==null;pT("production");const gU=ia&&dU(hT.FORCE_COLOR,["true","1","2"]),mU=gU||!v0("--no-colors")&&!pT("no-color")&&(!ia||process.stdout.isTTY)&&(!ia||v0("--color")||b0("COLORTERM")!==null||(b0("TERM")||"").includes("color"));class yU{constructor(e,n){this.left=e,this.right=n}}const Xi=(t,e)=>new yU(t,e),vU=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const bU=t=>b6(t,(e,n)=>`${n}:${e};`).join(""),wU=t=>class{constructor(n){this._=n}destroy(){t(this._)}},xU=wU(clearTimeout),gT=(t,e)=>new xU(setTimeout(e,t)),us=Symbol,mT=us(),yT=us(),CU=us(),SU=us(),kU=us(),vT=us(),EU=us(),o1=us(),AU=us(),TU=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},_U={[mT]:Xi("font-weight","bold"),[yT]:Xi("font-weight","normal"),[CU]:Xi("color","blue"),[kU]:Xi("color","green"),[SU]:Xi("color","grey"),[vT]:Xi("color","red"),[EU]:Xi("color","purple"),[o1]:Xi("color","orange"),[AU]:Xi("color","black")},MU=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[],r=si();let i=[],s=0;for(;s<t.length;s++){const l=t[s],c=_U[l];if(c!==void 0)r.set(c.left,c.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const u=bU(r);s>0||u.length>0?(e.push("%c"+l),n.push(u)):e.push(l)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const l=t[s];l instanceof Symbol||i.push(l)}return i},bT=mU?MU:TU,OU=(...t)=>{console.log(...bT(t)),wT.forEach(e=>e.print(t))},RU=(...t)=>{console.warn(...bT(t)),t.unshift(o1),wT.forEach(e=>e.print(t))},wT=Jo(),xT=t=>({[Symbol.iterator](){return this},next:t}),LU=(t,e)=>xT(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),sm=(t,e)=>xT(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class l1{constructor(e,n){this.clock=e,this.len=n}}class ha{constructor(){this.clients=new Map}}const eo=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);for(let o=0;o<r.length;o++){const l=r[o];MT(t,s,l.clock,l.len,n)}}),IU=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=as((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},pa=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&IU(n,e.clock)!==null},a1=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=da(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},w0=t=>{const e=new ha;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)x6(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return a1(e),e},Hc=(t,e,n,r)=>{oo(t.clients,e,()=>[]).push(new l1(n,r))},CT=()=>new ha,NU=t=>{const e=CT();return t.clients.forEach((n,r)=>{const i=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const l=o.id.clock;let c=o.length;if(s+1<n.length)for(let u=n[s+1];s+1<n.length&&u.deleted;u=n[++s+1])c+=u.length;i.push(new l1(l,c))}}i.length>0&&e.clients.set(r,i)}),e},c1=(t,e)=>{pt(t.restEncoder,e.clients.size),Yo(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),pt(t.restEncoder,n);const i=r.length;pt(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},DU=t=>{const e=new ha,n=Dt(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=Dt(t.restDecoder),s=Dt(t.restDecoder);if(s>0){const o=oo(e.clients,i,()=>[]);for(let l=0;l<s;l++)o.push(new l1(t.readDsClock(),t.readDsLen()))}}return e},jC=(t,e,n)=>{const r=new ha,i=Dt(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=Dt(t.restDecoder),l=Dt(t.restDecoder),c=n.clients.get(o)||[],u=tn(n,o);for(let d=0;d<l;d++){const h=t.readDsClock(),p=h+t.readDsLen();if(h<u){u<p&&Hc(r,o,u,p-u);let m=Di(c,h),y=c[m];for(!y.deleted&&y.id.clock<h&&(c.splice(m+1,0,_d(e,y,h-y.id.clock)),m++);m<c.length&&(y=c[m++],y.id.clock<p);)y.deleted||(p<y.id.clock+y.length&&c.splice(m,0,_d(e,y,p-y.id.clock)),y.delete(e))}else Hc(r,o,h,p-h)}}if(r.clients.size>0){const s=new Xh;return pt(s.restEncoder,0),c1(s,r),s.toUint8Array()}return null},ST=uT;class ga extends sT{constructor({guid:e=tU(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=ST(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new TT,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=zC(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const c=()=>zC(u=>{const d=h=>{(h===void 0||h===!0)&&(this.off("sync",d),u())};this.on("sync",d)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const e=this._item;e!==null&&!this.shouldLoad&&At(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Yo(this.subdocs).map(e=>e.guid))}transact(e,n=null){return At(this,e,n)}get(e,n=_n){const r=oo(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==_n&&i!==n)if(i===_n){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Wl)}getText(e=""){return this.get(e,to)}getMap(e=""){return this.get(e,sa)}getXmlElement(e=""){return this.get(e,jn)}getXmlFragment(e=""){return this.get(e,Xo)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Yo(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new ga({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,At(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class PU{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Dt(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Dt(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Cd extends PU{constructor(e){super(e),this.keys=[],Dt(e),this.keyClockDecoder=new im(Dr(e)),this.clientDecoder=new Uf(Dr(e)),this.leftClockDecoder=new im(Dr(e)),this.rightClockDecoder=new im(Dr(e)),this.infoDecoder=new VC(Dr(e),$c),this.stringDecoder=new Y6(Dr(e)),this.parentInfoDecoder=new VC(Dr(e),$c),this.typeRefDecoder=new Uf(Dr(e)),this.lenDecoder=new Uf(Dr(e))}readLeftID(){return new zl(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new zl(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return xd(this.restDecoder)}readBuf(){return Dr(this.restDecoder)}readJSON(){return xd(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class BU{constructor(){this.restEncoder=Gh()}toUint8Array(){return Ti(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){pt(this.restEncoder,e)}writeDsLen(e){pt(this.restEncoder,e)}}class $U extends BU{writeLeftID(e){pt(this.restEncoder,e.client),pt(this.restEncoder,e.clock)}writeRightID(e){pt(this.restEncoder,e.client),pt(this.restEncoder,e.clock)}writeClient(e){pt(this.restEncoder,e)}writeInfo(e){g0(this.restEncoder,e)}writeString(e){Vl(this.restEncoder,e)}writeParentInfo(e){pt(this.restEncoder,e?1:0)}writeTypeRef(e){pt(this.restEncoder,e)}writeLen(e){pt(this.restEncoder,e)}writeAny(e){Bc(this.restEncoder,e)}writeBuf(e){pr(this.restEncoder,e)}writeJSON(e){Vl(this.restEncoder,JSON.stringify(e))}writeKey(e){Vl(this.restEncoder,e)}}class HU{constructor(){this.restEncoder=Gh(),this.dsCurrVal=0}toUint8Array(){return Ti(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,pt(this.restEncoder,n)}writeDsLen(e){e===0&&Cr(),pt(this.restEncoder,e-1),this.dsCurrVal+=e}}class Xh extends HU{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new rm,this.clientEncoder=new zf,this.leftClockEncoder=new rm,this.rightClockEncoder=new rm,this.infoEncoder=new $C(g0),this.stringEncoder=new V6,this.parentInfoEncoder=new $C(g0),this.typeRefEncoder=new zf,this.lenEncoder=new zf}toUint8Array(){const e=Gh();return pt(e,0),pr(e,this.keyClockEncoder.toUint8Array()),pr(e,this.clientEncoder.toUint8Array()),pr(e,this.leftClockEncoder.toUint8Array()),pr(e,this.rightClockEncoder.toUint8Array()),pr(e,Ti(this.infoEncoder)),pr(e,this.stringEncoder.toUint8Array()),pr(e,Ti(this.parentInfoEncoder)),pr(e,this.typeRefEncoder.toUint8Array()),pr(e,this.lenEncoder.toUint8Array()),Jh(e,Ti(this.restEncoder)),Ti(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Bc(this.restEncoder,e)}writeBuf(e){pr(this.restEncoder,e)}writeJSON(e){Bc(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const FU=(t,e,n,r)=>{r=da(r,e[0].id.clock);const i=Di(e,r);pt(t.restEncoder,e.length-i),t.writeClient(n),pt(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},kT=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{tn(e,s)>i&&r.set(s,i)}),Zh(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),pt(t.restEncoder,r.size),Yo(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{FU(t,e.clients.get(i),i,s)})},VU=(t,e)=>{const n=si(),r=Dt(t.restDecoder);for(let i=0;i<r;i++){const s=Dt(t.restDecoder),o=new Array(s),l=t.readClient();let c=Dt(t.restDecoder);n.set(l,{i:0,refs:o});for(let u=0;u<s;u++){const d=t.readInfo();switch(qh&d){case 0:{const h=t.readLen();o[u]=new $r(lt(l,c),h),c+=h;break}case 10:{const h=Dt(t.restDecoder);o[u]=new Qr(lt(l,c),h),c+=h;break}default:{const h=(d&(rs|vr))===0,p=new Mt(lt(l,c),null,(d&vr)===vr?t.readLeftID():null,null,(d&rs)===rs?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(d&Dc)===Dc?t.readString():null,XT(t,d));o[u]=p,c+=p.length}}}}return n},zU=(t,e,n)=>{const r=[];let i=Yo(n.keys()).sort((m,y)=>m-y);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let m=n.get(i[i.length-1]);for(;m.refs.length===m.i;)if(i.pop(),i.length>0)m=n.get(i[i.length-1]);else return null;return m};let o=s();if(o===null)return null;const l=new TT,c=new Map,u=(m,y)=>{const b=c.get(m);(b==null||b>y)&&c.set(m,y)};let d=o.refs[o.i++];const h=new Map,p=()=>{for(const m of r){const y=m.id.client,b=n.get(y);b?(b.i--,l.clients.set(y,b.refs.slice(b.i)),n.delete(y),b.i=0,b.refs=[]):l.clients.set(y,[m]),i=i.filter(x=>x!==y)}r.length=0};for(;;){if(d.constructor!==Qr){const y=oo(h,d.id.client,()=>tn(e,d.id.client))-d.id.clock;if(y<0)r.push(d),u(d.id.client,d.id.clock-1),p();else{const b=d.getMissing(t,e);if(b!==null){r.push(d);const x=n.get(b)||{refs:[],i:0};if(x.refs.length===x.i)u(b,tn(e,b)),p();else{d=x.refs[x.i++];continue}}else(y===0||y<d.length)&&(d.integrate(t,y),h.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(o!==null&&o.i<o.refs.length)d=o.refs[o.i++];else{if(o=s(),o===null)break;d=o.refs[o.i++]}}if(l.clients.size>0){const m=new Xh;return kT(m,l,new Map),pt(m.restEncoder,0),{missing:c,update:m.toUint8Array()}}return null},UU=(t,e)=>kT(t,e.doc.store,e.beforeState),WU=(t,e,n,r=new Cd(t))=>At(e,i=>{i.local=!1;let s=!1;const o=i.doc,l=o.store,c=VU(r,o),u=zU(i,l,c),d=l.pendingStructs;if(d){for(const[p,m]of d.missing)if(m<tn(l,p)){s=!0;break}if(u){for(const[p,m]of u.missing){const y=d.missing.get(p);(y==null||y>m)&&d.missing.set(p,m)}d.update=eS([d.update,u.update])}}else l.pendingStructs=u;const h=jC(r,i,l);if(l.pendingDs){const p=new Cd(n1(l.pendingDs));Dt(p.restDecoder);const m=jC(p,i,l);h&&m?l.pendingDs=eS([h,m]):l.pendingDs=h||m}else l.pendingDs=h;if(s){const p=l.pendingStructs.update;l.pendingStructs=null,x0(i.doc,p)}},n,!1),x0=(t,e,n,r=Cd)=>{const i=n1(e);WU(i,t,n,new r(i))};class jU{constructor(){this.l=[]}}const KC=()=>new jU,qC=(t,e)=>t.l.push(e),GC=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ET=(t,e,n)=>s1(t.l,[e,n]);class zl{constructor(e,n){this.client=e,this.clock=n}}const yf=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,lt=(t,e)=>new zl(t,e),Fc=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Cr()},Vc=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Sd{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}}class KU{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const qU=(t,e,n=0)=>new KU(t,e,n),vf=(t,e,n)=>{let r=null,i=null;return t._item===null?i=Fc(t):r=lt(t._item.id.client,t._item.id.clock),new Sd(r,i,e,n)},om=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return vf(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return vf(t,lt(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return vf(t,r.lastId,n);r=r.right}return vf(t,null,n)},GU=(t,e,n=!0)=>{const r=e.store,i=t.item,s=t.type,o=t.tname,l=t.assoc;let c=null,u=0;if(i!==null){if(tn(r,i.client)<=i.clock)return null;const d=n?E0(r,i):{item:Ul(r,i),diff:0},h=d.item;if(!(h instanceof Mt))return null;if(c=h.parent,c._item===null||!c._item.deleted){u=h.deleted||!h.countable?0:d.diff+(l>=0?0:1);let p=h.left;for(;p!==null;)!p.deleted&&p.countable&&(u+=p.length),p=p.left}}else{if(o!==null)c=e.get(o);else if(s!==null){if(tn(r,s.client)<=s.clock)return null;const{item:d}=n?E0(r,s):{item:Ul(r,s)};if(d instanceof Mt&&d.content instanceof fi)c=d.content.type;else return null}else throw Cr();l>=0?u=c._length:u=0}return qU(c,u,t.assoc)};class u1{constructor(e,n){this.ds=e,this.sv=n}}const AT=(t,e)=>new u1(t,e),lm=t=>AT(NU(t.store),Zh(t.store)),To=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!pa(e.ds,t.id),C0=(t,e)=>{const n=oo(t.meta,C0,Jo),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<tn(r,s)&&tr(t,lt(s,i))}),eo(t,e.ds,i=>{}),n.add(e))};class TT{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Zh=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},tn=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},_T=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Cr()}n.push(e)},Di=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=as(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=as((n+r)/2)}throw Cr()},JU=(t,e)=>{const n=t.clients.get(e.client);return n[Di(n,e.clock)]},Ul=JU,S0=(t,e,n)=>{const r=Di(e,n),i=e[r];return i.id.clock<n&&i instanceof Mt?(e.splice(r+1,0,_d(t,i,n-i.id.clock)),r+1):r},tr=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[S0(t,n,e.clock)]},JC=(t,e,n)=>{const r=e.clients.get(n.client),i=Di(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==$r&&r.splice(i+1,0,_d(t,s,n.clock-s.id.clock+1)),s},YU=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Di(r,e.id.clock)]=n},MT=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=S0(t,e,n),l;do l=e[o++],s<l.id.clock+l.length&&S0(t,e,s),i(l);while(o<e.length&&e[o].id.clock<s)};class XU{constructor(e,n,r){this.doc=e,this.deleteSet=new ha,this.beforeState=Zh(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const YC=(t,e)=>e.deleteSet.clients.size===0&&!w6(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(a1(e.deleteSet),UU(t,e),c1(t,e.deleteSet),!0),XC=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&oo(t.changed,e,Jo).add(n)},Wf=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Mt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},ZU=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const l=i[o],c=l.clock+l.len;for(let u=Di(s,l.clock),d=s[u];u<s.length&&d.id.clock<c;d=s[++u]){const h=s[u];if(l.clock+l.len<=h.id.clock)break;h instanceof Mt&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},QU=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],l=Kh(i.length-1,1+Di(i,o.clock+o.len-1));for(let c=l,u=i[c];c>0&&u.id.clock>=o.clock;u=i[c])c-=1+Wf(i,c)}})},OT=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{a1(s),n.afterState=Zh(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((c,u)=>l.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(n,c)})),l.push(()=>{n.changedParentTypes.forEach((c,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(c=c.filter(d=>d.target._item===null||!d.target._item.deleted),c.forEach(d=>{d.currentTarget=u,d._path=null}),c.sort((d,h)=>d.path.length-h.path.length),ET(u._dEH,c,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),s1(l,[]),n._needFormattingCleanup&&bW(n)}finally{r.gc&&ZU(s,i,r.gcFilter),QU(s,i),n.afterState.forEach((d,h)=>{const p=n.beforeState.get(h)||0;if(p!==d){const m=i.clients.get(h),y=da(Di(m,p),1);for(let b=m.length-1;b>=y;)b-=1+Wf(m,b)}});for(let d=o.length-1;d>=0;d--){const{client:h,clock:p}=o[d].id,m=i.clients.get(h),y=Di(m,p);y+1<m.length&&Wf(m,y+1)>1||y>0&&Wf(m,y)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(OU(o1,mT,"[yjs] ",yT,vT,"Changed the client-id because another client seems to be using it."),r.clientID=ST()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new $U;YC(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Xh;YC(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:u}=n;(l.size>0||u.size>0||c.size>0)&&(l.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),u.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:c,added:l,removed:u},r,n]),u.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):OT(t,e+1)}}},At=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new XU(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const l=t._transaction===i[0];t._transaction=null,l&&OT(i,0)}}return o};class eW{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const ZC=(t,e,n)=>{eo(t,n.deletions,r=>{r instanceof Mt&&e.scope.some(i=>Vc(i,r))&&g1(r,!1)})},QC=(t,e,n)=>{let r=null;const i=t.doc,s=t.scope;At(i,l=>{for(;e.length>0&&t.currStackItem===null;){const c=i.store,u=e.pop(),d=new Set,h=[];let p=!1;eo(l,u.insertions,m=>{if(m instanceof Mt){if(m.redone!==null){let{item:y,diff:b}=E0(c,m.id);b>0&&(y=tr(l,lt(y.id.client,y.id.clock+b))),m=y}!m.deleted&&s.some(y=>Vc(y,m))&&h.push(m)}}),eo(l,u.deletions,m=>{m instanceof Mt&&s.some(y=>Vc(y,m))&&!pa(u.insertions,m.id)&&d.add(m)}),d.forEach(m=>{p=YT(l,m,d,u.insertions,t.ignoreRemoteMapChanges,t)!==null||p});for(let m=h.length-1;m>=0;m--){const y=h[m];t.deleteFilter(y)&&(y.delete(l),p=!0)}t.currStackItem=p?u:null}l.changed.forEach((c,u)=>{c.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),r=l},t);const o=t.currStackItem;if(o!=null){const l=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:o,type:n,changedParentTypes:l,origin:t},t]),t.currStackItem=null}return o};class RT extends sT{constructor(e,{captureTimeout:n=500,captureTransaction:r=c=>!0,deleteFilter:i=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:l=h0(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.doc=l,this.addToScope(e),this.deleteFilter=i,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=n,this.afterTransactionHandler=c=>{if(!this.captureTransaction(c)||!this.scope.some(x=>c.changedParentTypes.has(x))||!this.trackedOrigins.has(c.origin)&&(!c.origin||!this.trackedOrigins.has(c.origin.constructor)))return;const u=this.undoing,d=this.redoing,h=u?this.redoStack:this.undoStack;u?this.stopCapturing():d||this.clear(!1,!0);const p=new ha;c.afterState.forEach((x,C)=>{const M=c.beforeState.get(C)||0,L=x-M;L>0&&Hc(p,C,M,L)});const m=nU();let y=!1;if(this.lastChange>0&&m-this.lastChange<this.captureTimeout&&h.length>0&&!u&&!d){const x=h[h.length-1];x.deletions=w0([x.deletions,c.deleteSet]),x.insertions=w0([x.insertions,p])}else h.push(new eW(c.deleteSet,p)),y=!0;!u&&!d&&(this.lastChange=m),eo(c,c.deleteSet,x=>{x instanceof Mt&&this.scope.some(C=>Vc(C,x))&&g1(x,!0)});const b=[{stackItem:h[h.length-1],origin:c.origin,type:u?"redo":"undo",changedParentTypes:c.changedParentTypes},this];y?this.emit("stack-item-added",b):this.emit("stack-item-updated",b)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=h0(e)?e:[e],e.forEach(n=>{this.scope.every(r=>r!==n)&&(n.doc!==this.doc&&RU("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>ZC(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>ZC(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=QC(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=QC(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*tW(t){const e=Dt(t.restDecoder);for(let n=0;n<e;n++){const r=Dt(t.restDecoder),i=t.readClient();let s=Dt(t.restDecoder);for(let o=0;o<r;o++){const l=t.readInfo();if(l===10){const c=Dt(t.restDecoder);yield new Qr(lt(i,s),c),s+=c}else if(qh&l){const c=(l&(rs|vr))===0,u=new Mt(lt(i,s),null,(l&vr)===vr?t.readLeftID():null,null,(l&rs)===rs?t.readRightID():null,c?t.readParentInfo()?t.readString():t.readLeftID():null,c&&(l&Dc)===Dc?t.readString():null,XT(t,l));yield u,s+=u.length}else{const c=t.readLen();yield new $r(lt(i,s),c),s+=c}}}}class nW{constructor(e,n){this.gen=tW(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Qr);return this.curr}}class rW{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const iW=(t,e)=>{if(t.constructor===$r){const{client:n,clock:r}=t.id;return new $r(lt(n,r+e),t.length-e)}else if(t.constructor===Qr){const{client:n,clock:r}=t.id;return new Qr(lt(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Mt(lt(r,i+e),null,lt(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},eS=(t,e=Cd,n=Xh)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(n1(d)));let i=r.map(d=>new nW(d,!0)),s=null;const o=new n,l=new rW(o);for(;i=i.filter(p=>p.curr!==null),i.sort((p,m)=>{if(p.curr.id.client===m.curr.id.client){const y=p.curr.id.clock-m.curr.id.clock;return y===0?p.curr.constructor===m.curr.constructor?0:p.curr.constructor===Qr?1:-1:y}else return m.curr.id.client-p.curr.id.client}),i.length!==0;){const d=i[0],h=d.curr.id.client;if(s!==null){let p=d.curr,m=!1;for(;p!==null&&p.id.clock+p.length<=s.struct.id.clock+s.struct.length&&p.id.client>=s.struct.id.client;)p=d.next(),m=!0;if(p===null||p.id.client!==h||m&&p.id.clock>s.struct.id.clock+s.struct.length)continue;if(h!==s.struct.id.client)Fa(l,s.struct,s.offset),s={struct:p,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<p.id.clock)if(s.struct.constructor===Qr)s.struct.length=p.id.clock+p.length-s.struct.id.clock;else{Fa(l,s.struct,s.offset);const y=p.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Qr(lt(h,s.struct.id.clock+s.struct.length),y),offset:0}}else{const y=s.struct.id.clock+s.struct.length-p.id.clock;y>0&&(s.struct.constructor===Qr?s.struct.length-=y:p=iW(p,y)),s.struct.mergeWith(p)||(Fa(l,s.struct,s.offset),s={struct:p,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let p=d.curr;p!==null&&p.id.client===h&&p.id.clock===s.struct.id.clock+s.struct.length&&p.constructor!==Qr;p=d.next())Fa(l,s.struct,s.offset),s={struct:p,offset:0}}s!==null&&(Fa(l,s.struct,s.offset),s=null),sW(l);const c=r.map(d=>DU(d)),u=w0(c);return c1(o,u),o.toUint8Array()},LT=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Ti(t.encoder.restEncoder)}),t.encoder.restEncoder=Gh(),t.written=0)},Fa=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&LT(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),pt(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},sW=t=>{LT(t);const e=t.encoder.restEncoder;pt(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];pt(e,r.written),Jh(e,r.restEncoder)}},tS="You must not compute changes after the event-handler fired.";class Qh{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=oW(this.currentTarget,this.target))}deletes(e){return pa(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Qs(tS);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,l;if(this.adds(s)){let c=s.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(s))if(c!==null&&this.deletes(c))o="delete",l=em(c.content.getContent());else return;else c!==null&&this.deletes(c)?(o="update",l=em(c.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=em(s.content.getContent());else return;e.set(i,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Qs(tS);const n=this.target,r=Jo(),i=Jo(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const c=()=>{l&&s.push(l)};for(let u=n._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((l===null||l.delete===void 0)&&(c(),l={delete:0}),l.delete+=u.length,i.add(u)):this.adds(u)?((l===null||l.insert===void 0)&&(c(),l={insert:[]}),l.insert=l.insert.concat(u.content.getContent()),r.add(u)):((l===null||l.retain===void 0)&&(c(),l={retain:0}),l.retain+=u.length);l!==null&&l.retain===void 0&&c()}this._changes=e}return e}}const oW=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},IT=80;let f1=0;class lW{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=f1++}}const aW=t=>{t.timestamp=f1++},NT=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=f1++},cW=(t,e,n)=>{if(t.length>=IT){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return NT(r,e,n),r}else{const r=new lW(e,n);return t.push(r),r}},ep=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>Vf(e-s.index)<Vf(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,aW(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Vf(n.index-i)<r.parent.length/IT?(NT(n,r,i),n):cW(t._searchMarker,r,i)},zc=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=da(e,i.index+n))}},tp=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;oo(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;ET(r._eH,n,e)};class _n{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=KC(),this._dEH=KC(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw oi()}clone(){throw oi()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){qC(this._eH,e)}observeDeep(e){qC(this._dEH,e)}unobserve(e){GC(this._eH,e)}unobserveDeep(e){GC(this._dEH,e)}toJSON(){}}const DT=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&r>0;l++)i.push(o[l]),r--;e=0}}s=s.right}return i},PT=t=>{const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},BT=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&To(r,e)){const i=r.content.getContent();for(let s=0;s<i.length;s++)n.push(i[s])}r=r.right}return n},Uc=(t,e)=>{let n=0,r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},$T=(t,e)=>{const n=[];return Uc(t,(r,i)=>{n.push(e(r,i,t))}),n},uW=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},HT=(t,e)=>{const n=ep(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},kd=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,l=s.store,c=n===null?e._start:n.right;let u=[];const d=()=>{u.length>0&&(i=new Mt(lt(o,tn(l,o)),i,i&&i.lastId,c,c&&c.id,e,null,new Zo(u)),i.integrate(t,0),u=[])};r.forEach(h=>{if(h===null)u.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(h);break;default:switch(d(),h.constructor){case Uint8Array:case ArrayBuffer:i=new Mt(lt(o,tn(l,o)),i,i&&i.lastId,c,c&&c.id,e,null,new ou(new Uint8Array(h))),i.integrate(t,0);break;case ga:i=new Mt(lt(o,tn(l,o)),i,i&&i.lastId,c,c&&c.id,e,null,new lu(h)),i.integrate(t,0);break;default:if(h instanceof _n)i=new Mt(lt(o,tn(l,o)),i,i&&i.lastId,c,c&&c.id,e,null,new fi(h)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},FT=()=>Qs("Length exceeded!"),VT=(t,e,n,r)=>{if(n>e._length)throw FT();if(n===0)return e._searchMarker&&zc(e._searchMarker,n,r.length),kd(t,e,null,r);const i=n,s=ep(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&tr(t,lt(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&zc(e._searchMarker,i,r.length),kd(t,e,o,r)},fW=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return kd(t,e,i,n)},zT=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=ep(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&tr(t,lt(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&tr(t,lt(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw FT();e._searchMarker&&zc(e._searchMarker,i,-s+r)},Ed=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},d1=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let l;if(r==null)l=new Zo([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:l=new Zo([r]);break;case Uint8Array:l=new ou(r);break;case ga:l=new lu(r);break;default:if(r instanceof _n)l=new fi(r);else throw new Error("Unexpected content type")}new Mt(lt(o,tn(s.store,o)),i,i&&i.lastId,null,null,e,n,l).integrate(t,0)},h1=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},UT=t=>{const e={};return t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},WT=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted},dW=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&To(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},bf=t=>LU(t.entries(),e=>!e[1].deleted);class hW extends Qh{}class Wl extends _n{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Wl;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Wl}clone(){const e=new Wl;return e.insert(0,this.toArray().map(n=>n instanceof _n?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),tp(this,e,new hW(this,e))}insert(e,n){this.doc!==null?At(this.doc,r=>{VT(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?At(this.doc,n=>{fW(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?At(this.doc,r=>{zT(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return HT(this,e)}toArray(){return PT(this)}slice(e=0,n=this.length){return DT(this,e,n)}toJSON(){return this.map(e=>e instanceof _n?e.toJSON():e)}map(e){return $T(this,e)}forEach(e){Uc(this,e)}[Symbol.iterator](){return uW(this)}_write(e){e.writeTypeRef(BW)}}const pW=t=>new Wl;class gW extends Qh{constructor(e,n,r){super(e,n),this.keysChanged=r}}class sa extends _n{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new sa}clone(){const e=new sa;return this.forEach((n,r)=>{e.set(r,n instanceof _n?n.clone():n)}),e}_callObserver(e,n){tp(this,e,new gW(this,e,n))}toJSON(){const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof _n?i.toJSON():i}}),e}get size(){return[...bf(this._map)].length}keys(){return sm(bf(this._map),e=>e[0])}values(){return sm(bf(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return sm(bf(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?At(this.doc,n=>{Ed(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?At(this.doc,r=>{d1(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return h1(this,e)}has(e){return WT(this,e)}clear(){this.doc!==null?At(this.doc,e=>{this.forEach(function(n,r,i){Ed(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef($W)}}const mW=t=>new sa,Us=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&fU(t,e);class k0{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Cr(),this.right.content.constructor){case ln:this.right.deleted||ma(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const nS=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case ln:e.right.deleted||ma(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&tr(t,lt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},wf=(t,e,n,r)=>{const i=new Map,s=r?ep(e,n):null;if(s){const o=new k0(s.p.left,s.p,s.index,i);return nS(t,o,n-s.index)}else{const o=new k0(null,e._start,0,i);return nS(t,o,n)}},jT=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===ln&&Us(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,l)=>{const c=n.left,u=n.right,d=new Mt(lt(s,tn(i.store,s)),c,c&&c.lastId,u,u&&u.id,e,null,new ln(l,o));d.integrate(t,0),n.right=d,n.forward()})},ma=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},KT=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===ln&&Us(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},qT=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const l in r){const c=r[l],u=n.currentAttributes.get(l)??null;if(!Us(u,c)){o.set(l,u);const{left:d,right:h}=n;n.right=new Mt(lt(s,tn(i.store,s)),d,d&&d.lastId,h,h&&h.id,e,null,new ln(l,c)),n.right.integrate(t,0),n.forward()}}return o},am=(t,e,n,r,i)=>{n.currentAttributes.forEach((p,m)=>{i[m]===void 0&&(i[m]=null)});const s=t.doc,o=s.clientID;KT(n,i);const l=qT(t,e,n,i),c=r.constructor===String?new ci(r):r instanceof _n?new fi(r):new il(r);let{left:u,right:d,index:h}=n;e._searchMarker&&zc(e._searchMarker,n.index,c.getLength()),d=new Mt(lt(o,tn(s.store,o)),u,u&&u.lastId,d,d&&d.id,e,null,c),d.integrate(t,0),n.right=d,n.index=h,n.forward(),jT(t,e,n,l)},rS=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;KT(n,i);const l=qT(t,e,n,i);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===ln));){if(!n.right.deleted)switch(n.right.content.constructor){case ln:{const{key:c,value:u}=n.right.content,d=i[c];if(d!==void 0){if(Us(d,u))l.delete(c);else{if(r===0)break e;l.set(c,u)}n.right.delete(t)}else n.currentAttributes.set(c,u);break}default:r<n.right.length&&tr(t,lt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new Mt(lt(o,tn(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new ci(c)),n.right.integrate(t,0),n.forward()}jT(t,e,n,l)},GT=(t,e,n,r,i)=>{let s=e;const o=si();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===ln){const u=s.content;o.set(u.key,u)}s=s.right}let l=0,c=!1;for(;e!==s;){if(n===e&&(c=!0),!e.deleted){const u=e.content;switch(u.constructor){case ln:{const{key:d,value:h}=u,p=r.get(d)??null;(o.get(d)!==u||p===h)&&(e.delete(t),l++,!c&&(i.get(d)??null)===h&&p!==h&&(p===null?i.delete(d):i.set(d,p))),!c&&!e.deleted&&ma(i,u);break}}}e=e.right}return l},yW=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===ln){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},vW=t=>{let e=0;return At(t.doc,n=>{let r=t._start,i=t._start,s=si();const o=d0(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case ln:ma(o,i.content);break;default:e+=GT(n,r,i,s,o),s=d0(o),r=i;break}i=i.right}}),e},bW=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&MT(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===ln&&o.constructor!==$r&&e.add(o.parent)})}At(n,r=>{eo(t,t.deleteSet,i=>{if(i instanceof $r||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===ln?e.add(s):yW(r,i)});for(const i of e)vW(i)})},iS=(t,e,n)=>{const r=n,i=d0(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case fi:case il:case ci:n<e.right.length&&tr(t,lt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&GT(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&zc(o._searchMarker,e.index,-r+n),e};class wW extends Qh{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];At(e,r=>{const i=new Map,s=new Map;let o=this.target._start,l=null;const c={};let u="",d=0,h=0;const p=()=>{if(l!==null){let m=null;switch(l){case"delete":h>0&&(m={delete:h}),h=0;break;case"insert":(typeof u=="object"||u.length>0)&&(m={insert:u},i.size>0&&(m.attributes={},i.forEach((y,b)=>{y!==null&&(m.attributes[b]=y)}))),u="";break;case"retain":d>0&&(m={retain:d},aU(c)||(m.attributes=oU({},c))),d=0;break}m&&n.push(m),l=null}};for(;o!==null;){switch(o.content.constructor){case fi:case il:this.adds(o)?this.deletes(o)||(p(),l="insert",u=o.content.getContent()[0],p()):this.deletes(o)?(l!=="delete"&&(p(),l="delete"),h+=1):o.deleted||(l!=="retain"&&(p(),l="retain"),d+=1);break;case ci:this.adds(o)?this.deletes(o)||(l!=="insert"&&(p(),l="insert"),u+=o.content.str):this.deletes(o)?(l!=="delete"&&(p(),l="delete"),h+=o.length):o.deleted||(l!=="retain"&&(p(),l="retain"),d+=o.length);break;case ln:{const{key:m,value:y}=o.content;if(this.adds(o)){if(!this.deletes(o)){const b=i.get(m)??null;Us(b,y)?y!==null&&o.delete(r):(l==="retain"&&p(),Us(y,s.get(m)??null)?delete c[m]:c[m]=y)}}else if(this.deletes(o)){s.set(m,y);const b=i.get(m)??null;Us(b,y)||(l==="retain"&&p(),c[m]=b)}else if(!o.deleted){s.set(m,y);const b=c[m];b!==void 0&&(Us(b,y)?b!==null&&o.delete(r):(l==="retain"&&p(),y===null?delete c[m]:c[m]=y))}o.deleted||(l==="insert"&&p(),ma(i,o.content));break}}o=o.right}for(p();n.length>0;){const m=n[n.length-1];if(m.retain!==void 0&&m.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class to extends _n{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new to}clone(){const e=new to;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new wW(this,e,n);tp(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===ci&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?At(this.doc,r=>{const i=new k0(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&am(r,this,i,l,o.attributes||{})}else o.retain!==void 0?rS(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&iS(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){const i=[],s=new Map,o=this.doc;let l="",c=this._start;function u(){if(l.length>0){const h={};let p=!1;s.forEach((y,b)=>{p=!0,h[b]=y});const m={insert:l};p&&(m.attributes=h),i.push(m),l=""}}const d=()=>{for(;c!==null;){if(To(c,e)||n!==void 0&&To(c,n))switch(c.content.constructor){case ci:{const h=s.get("ychange");e!==void 0&&!To(c,e)?(h===void 0||h.user!==c.id.client||h.type!=="removed")&&(u(),s.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!To(c,n)?(h===void 0||h.user!==c.id.client||h.type!=="added")&&(u(),s.set("ychange",r?r("added",c.id):{type:"added"})):h!==void 0&&(u(),s.delete("ychange")),l+=c.content.str;break}case fi:case il:{u();const h={insert:c.content.getContent()[0]};if(s.size>0){const p={};h.attributes=p,s.forEach((m,y)=>{p[y]=m})}i.push(h);break}case ln:To(c,e)&&(u(),ma(s,c.content));break}c=c.right}u()};return e||n?At(o,h=>{e&&C0(h,e),n&&C0(h,n),d()},"cleanup"):d(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?At(i,s=>{const o=wf(s,this,e,!r);r||(r={},o.currentAttributes.forEach((l,c)=>{r[c]=l})),am(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?At(i,s=>{const o=wf(s,this,e,!r);am(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?At(r,i=>{iS(i,wf(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?At(i,s=>{const o=wf(s,this,e,!1);o.right!==null&&rS(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?At(this.doc,n=>{Ed(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?At(this.doc,r=>{d1(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return h1(this,e)}getAttributes(){return UT(this)}_write(e){e.writeTypeRef(HW)}}const xW=t=>new to;class cm{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===jn||n.constructor===Xo)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Xo extends _n{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Xo}clone(){const e=new Xo;return e.insert(0,this.toArray().map(n=>n instanceof _n?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new cm(this,e)}querySelector(e){e=e.toUpperCase();const r=new cm(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Yo(new cm(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){tp(this,e,new kW(this,n,e))}toString(){return $T(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Uc(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?At(this.doc,r=>{VT(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)At(this.doc,r=>{const i=e&&e instanceof _n?e._item:e;kd(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Qs("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?At(this.doc,r=>{zT(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return PT(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return HT(this,e)}slice(e=0,n=this.length){return DT(this,e,n)}forEach(e){Uc(this,e)}_write(e){e.writeTypeRef(VW)}}const CW=t=>new Xo;class jn extends Xo{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new jn(this.nodeName)}clone(){const e=new jn(this.nodeName),n=this.getAttributes();return lU(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof _n?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const i=r.length;for(let l=0;l<i;l++){const c=r[l];n.push(c+'="'+e[c]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?At(this.doc,n=>{Ed(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?At(this.doc,r=>{d1(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return h1(this,e)}hasAttribute(e){return WT(this,e)}getAttributes(e){return e?dW(this,e):UT(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const l=s[o];typeof l=="string"&&i.setAttribute(o,l)}return Uc(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(FW),e.writeKey(this.nodeName)}}const SW=t=>new jn(t.readKey());class kW extends Qh{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class Ad extends sa{constructor(e){super(),this.hookName=e}_copy(){return new Ad(this.hookName)}clone(){const e=new Ad(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(zW),e.writeKey(this.hookName)}}const EW=t=>new Ad(t.readKey());class br extends to{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new br}clone(){const e=new br;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const l=s.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(UW)}}const AW=t=>new br;class p1{constructor(e,n){this.id=e,this.length=n}get deleted(){throw oi()}mergeWith(e){return!1}write(e,n,r){throw oi()}integrate(e,n){throw oi()}}const TW=0;class $r extends p1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),_T(e.doc.store,this)}write(e,n){e.writeInfo(TW),e.writeLen(this.length-n)}getMissing(e,n){return null}}class ou{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ou(this.content)}splice(e){throw oi()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const _W=t=>new ou(t.readBuf());class Wc{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Wc(this.len)}splice(e){const n=new Wc(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Hc(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const MW=t=>new Wc(t.readLen()),JT=(t,e)=>new ga({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class lu{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new lu(JT(this.doc.guid,this.opts))}splice(e){throw oi()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const OW=t=>new lu(JT(t.readString(),t.readAny()));class il{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new il(this.embed)}splice(e){throw oi()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const RW=t=>new il(t.readJSON());class ln{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ln(this.key,this.value)}splice(e){throw oi()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const LW=t=>new ln(t.readKey(),t.readJSON());class Td{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Td(this.arr)}splice(e){const n=new Td(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const IW=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new Td(n)};class Zo{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Zo(this.arr)}splice(e){const n=new Zo(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const NW=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Zo(n)};class ci{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ci(this.str)}splice(e){const n=new ci(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const DW=t=>new ci(t.readString()),PW=[pW,mW,xW,SW,CW,EW,AW],BW=0,$W=1,HW=2,FW=3,VW=4,zW=5,UW=6;class fi{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new fi(this.type._copy())}splice(e){throw oi()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const WW=t=>new fi(PW[t.readTypeRef()](t)),E0=(t,e)=>{let n=e,r=0,i;do r>0&&(n=lt(n.client,n.clock+r)),i=Ul(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof Mt);return{item:i,diff:r}},g1=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},_d=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new Mt(lt(r,i+n),e,lt(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=lt(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},sS=(t,e)=>C6(t,n=>pa(n.deletions,e)),YT=(t,e,n,r,i,s)=>{const o=t.doc,l=o.store,c=o.clientID,u=e.redone;if(u!==null)return tr(t,u);let d=e.parent._item,h=null,p;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||YT(t,d,n,r,i,s)===null))return null;for(;d.redone!==null;)d=tr(t,d.redone)}const m=d===null?e.parent:d.content.type;if(e.parentSub===null){for(h=e.left,p=e;h!==null;){let C=h;for(;C!==null&&C.parent._item!==d;)C=C.redone===null?null:tr(t,C.redone);if(C!==null&&C.parent._item===d){h=C;break}h=h.left}for(;p!==null;){let C=p;for(;C!==null&&C.parent._item!==d;)C=C.redone===null?null:tr(t,C.redone);if(C!==null&&C.parent._item===d){p=C;break}p=p.right}}else if(p=null,e.right&&!i){for(h=e;h!==null&&h.right!==null&&(h.right.redone||pa(r,h.right.id)||sS(s.undoStack,h.right.id)||sS(s.redoStack,h.right.id));)for(h=h.right;h.redone;)h=tr(t,h.redone);if(h&&h.right!==null)return null}else h=m._map.get(e.parentSub)||null;const y=tn(l,c),b=lt(c,y),x=new Mt(b,h,h&&h.lastId,p,p&&p.id,m,e.parentSub,e.content.copy());return e.redone=b,g1(x,!0),x.integrate(t,0),x};let Mt=class A0 extends p1{constructor(e,n,r,i,s,o,l,c){super(e,c.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=c,this.info=this.content.isCountable()?DC:0}set marker(e){(this.info&nm)>0!==e&&(this.info^=nm)}get marker(){return(this.info&nm)>0}get keep(){return(this.info&NC)>0}set keep(e){this.keep!==e&&(this.info^=NC)}get countable(){return(this.info&DC)>0}get deleted(){return(this.info&tm)>0}set deleted(e){this.deleted!==e&&(this.info^=tm)}markDeleted(){this.info|=tm}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=tn(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=tn(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===zl&&this.id.client!==this.parent.client&&this.parent.clock>=tn(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=JC(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=tr(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===$r||this.right&&this.right.constructor===$r)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===A0&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===A0&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===zl){const r=Ul(n,this.parent);r.constructor===$r?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=JC(e,e.doc.store,lt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),yf(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(yf(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(Ul(e.doc.store,i.origin)))s.has(Ul(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),_T(e.doc.store,this),this.content.integrate(e,this),XC(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new $r(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:lt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&yf(e.origin,this.lastId)&&this.right===e&&yf(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Hc(e.deleteSet,this.id.client,this.id.clock,this.length),XC(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Cr();this.content.gc(e),n?YU(e,this,new $r(this.id,this.length)):this.content=new Wc(this.length)}write(e,n){const r=n>0?lt(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&qh|(r===null?0:vr)|(i===null?0:rs)|(s===null?0:Dc);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const l=this.parent;if(l._item!==void 0){const c=l._item;if(c===null){const u=Fc(l);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(c.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===zl?(e.writeParentInfo(!1),e.writeLeftID(l)):Cr();s!==null&&e.writeString(s)}this.content.write(e,n)}};const XT=(t,e)=>jW[e&qh](t),jW=[()=>{Cr()},MW,IW,_W,DW,RW,LW,WW,NW,OW,()=>{Cr()}],KW=10;class Qr extends p1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Cr()}write(e,n){e.writeInfo(KW),pt(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},QT="__ $YJS$ __";ZT[QT]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");ZT[QT]=!0;const qW=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},GW=/[\uD800-\uDBFF]/,JW=/[\uDC00-\uDFFF]/,YW=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&GW.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&JW.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},XW=YW,Jt=new Kt("y-sync"),is=new Kt("y-undo");new Kt("yjs-cursor");const Md=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!pa(e.ds,t.id),ZW=[{light:"#ecd44433",dark:"#ecd444"}],QW=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Jo();t.forEach(i=>r.add(i)),e=e.filter(i=>!r.has(i))}t.set(n,Q6(e))}return t.get(n)},e8=(t,{colors:e=ZW,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:s}={})=>{let o=!1;const l=new n8(t,s),c=new Ft({props:{editable:u=>{const d=Jt.getState(u);return d.snapshot==null&&d.prevSnapshot==null}},key:Jt,state:{init:(u,d)=>({type:t,doc:t.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(u,d)=>{const h=u.getMeta(Jt);if(h!==void 0){d=Object.assign({},d);for(const p in h)d[p]=h[p]}return d.addToHistory=u.getMeta("addToHistory")!==!1,d.isChangeOrigin=h!==void 0&&!!h.isChangeOrigin,d.isUndoRedoOperation=h!==void 0&&!!h.isChangeOrigin&&!!h.isUndoRedoOperation,l.prosemirrorView!==null&&h!==void 0&&(h.snapshot!=null||h.prevSnapshot!=null)&&gT(0,()=>{l.prosemirrorView!=null&&(h.restore==null?l._renderSnapshot(h.snapshot,h.prevSnapshot,d):(l._renderSnapshot(h.snapshot,h.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))}),d}},view:u=>(l.initView(u),s==null&&l._forceRerender(),i(),{update:()=>{const d=c.getState(u.state);if(d.snapshot==null&&d.prevSnapshot==null&&(o||u.state.doc.content.findDiffStart(u.state.doc.type.createAndFill().content)!==null)){if(o=!0,d.addToHistory===!1&&!d.isChangeOrigin){const h=is.getState(u.state),p=h&&h.undoManager;p&&p.stopCapturing()}l.mux(()=>{d.doc.transact(h=>{h.meta.set("addToHistory",d.addToHistory),l._prosemirrorChanged(u.state.doc)},Jt)})}},destroy:()=>{l.destroy()}})});return c},t8=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null){const r=L0(n.doc,n.type,e.anchor,n.mapping),i=L0(n.doc,n.type,e.head,n.mapping);r!==null&&i!==null&&(t=t.setSelection(Be.create(t.doc,r,i)))}},T0=(t,e)=>({anchor:R0(e.selection.anchor,t.type,t.mapping),head:R0(e.selection.head,t.type,t.mapping)});class n8{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=qW(),this.mapping=n,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=T0(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(hU&&this._domSelectionInView===null&&(gT(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),s=vU.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||s.clientWidth||0)&&i.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=AT(CT(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Jt,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>jf(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Y.from(e),0,0));n.setMeta(Jt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(i=>jf(i,this.prosemirrorView.state.schema,this.mapping)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Y.from(n),0,0));e&&r.setSelection(Be.create(r.doc,e.anchor,e.head)),this.prosemirrorView.dispatch(r.setMeta(Jt,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let i=this.doc;e||(e=lm(this.doc)),(e instanceof Uint8Array||n instanceof Uint8Array)&&((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Cr(),i=new ga({gc:!1}),x0(i,n),n=lm(i),x0(i,e),e=lm(i)),this.mapping.clear(),this.mux(()=>{i.transact(s=>{const o=r.permanentUserData;o&&o.dss.forEach(d=>{eo(s,d,h=>{})});const l=(d,h)=>{const p=d==="added"?o.getUserByClientId(h.client):o.getUserByDeletedId(h);return{user:p,type:d,color:QW(r.colorMapping,r.colors,p)}},c=BT(this.type,new u1(n.ds,e.sv)).map(d=>!d._item.deleted||Md(d._item,e)||Md(d._item,n)?jf(d,this.prosemirrorView.state.schema,new Map,e,n,l):null).filter(d=>d!==null),u=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Y.from(c),0,0));this.prosemirrorView.dispatch(u.setMeta(Jt,{isChangeOrigin:!0}))},Jt)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Jt.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(l,c)=>this.mapping.delete(c);eo(n,n.deleteSet,l=>{if(l.constructor===Mt){const c=l.content.type;c&&this.mapping.delete(c)}}),n.changed.forEach(i),n.changedParentTypes.forEach(i);const s=this.type.toArray().map(l=>e_(l,this.prosemirrorView.state.schema,this.mapping)).filter(l=>l!==null);let o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(Y.from(s),0,0));t8(o,this.beforeTransactionSelection,this),o=o.setMeta(Jt,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof RT}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)})}_prosemirrorChanged(e){this.doc.transact(()=>{M0(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=T0(this,this.prosemirrorView.state)},Jt)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const e_=(t,e,n,r,i,s)=>{const o=n.get(t);if(o===void 0){if(t instanceof jn)return jf(t,e,n,r,i,s);throw oi()}return o},jf=(t,e,n,r,i,s)=>{const o=[],l=c=>{var u;if(c.constructor===jn){const d=e_(c,e,n,r,i,s);d!==null&&o.push(d)}else{const d=(u=c._item.right)==null?void 0:u.content.type;d instanceof to&&!d._item.deleted&&d._item.id.client===d.doc.clientID&&(c.applyDelta([{retain:c.length},...d.toDelta()]),d.doc.transact(p=>{d._item.delete(p)}));const h=r8(c,e,n,r,i,s);h!==null&&h.forEach(p=>{p!==null&&o.push(p)})}};r===void 0||i===void 0?t.toArray().forEach(l):BT(t,new u1(i.ds,r.sv)).forEach(l);try{const c=t.getAttributes(r);r!==void 0&&(Md(t._item,r)?Md(t._item,i)||(c.ychange=s?s("added",t._item.id):{type:"added"}):c.ychange=s?s("removed",t._item.id):{type:"removed"});const u=e.node(t.nodeName,c,o);return n.set(t,u),u}catch{return t.doc.transact(u=>{t._item.delete(u)},Jt),n.delete(t),null}},r8=(t,e,n,r,i,s)=>{const o=[],l=t.toDelta(r,i,s);try{for(let c=0;c<l.length;c++){const u=l[c],d=[];for(const h in u.attributes)d.push(e.mark(h,u.attributes[h]));o.push(e.text(u.insert,d))}}catch{return t.doc.transact(u=>{t._item.delete(u)},Jt),null}return o},i8=(t,e)=>{const n=new br,r=t.map(i=>({insert:i.text,attributes:n_(i.marks)}));return n.applyDelta(r),e.set(n,t),n},s8=(t,e)=>{const n=new jn(t.type.name);for(const r in t.attrs){const i=t.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,np(t).map(r=>_0(r,e))),e.set(n,t),n},_0=(t,e)=>t instanceof Array?i8(t,e):s8(t,e),oS=t=>typeof t=="object"&&t!==null,m1=(t,e)=>{const n=Object.keys(t).filter(i=>t[i]!==null);let r=n.length===Object.keys(e).filter(i=>e[i]!==null).length;for(let i=0;i<n.length&&r;i++){const s=n[i],o=t[s],l=e[s];r=s==="ychange"||o===l||oS(o)&&oS(l)&&m1(o,l)}return r},np=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.isText){const s=[];for(let o=e[r];r<e.length&&o.isText;o=e[++r])s.push(o);r--,n.push(s)}else n.push(i)}return n},t_=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,i)=>r.insert===e[i].text&&dT(r.attributes||{}).length===e[i].marks.length&&e[i].marks.every(s=>m1(r.attributes[s.type.name]||{},s.attrs)))},jc=(t,e)=>{if(t instanceof jn&&!(e instanceof Array)&&O0(t,e)){const n=np(e);return t._length===n.length&&m1(t.getAttributes(),e.attrs)&&t.toArray().every((r,i)=>jc(r,n[i]))}return t instanceof br&&e instanceof Array&&t_(t,e)},Od=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),lS=(t,e,n)=>{const r=t.toArray(),i=np(e),s=i.length,o=r.length,l=Kh(o,s);let c=0,u=0,d=!1;for(;c<l;c++){const h=r[c],p=i[c];if(Od(n.get(h),p))d=!0;else if(!jc(h,p))break}for(;c+u<l;u++){const h=r[o-u-1],p=i[s-u-1];if(Od(n.get(h),p))d=!0;else if(!jc(h,p))break}return{equalityFactor:c+u,foundMappedChild:d}},o8=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof ci?e+=n.content.str:n.content instanceof ln&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},l8=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=o8(t),s=e.map(u=>({insert:u.text,attributes:Object.assign({},r,n_(u.marks))})),{insert:o,remove:l,index:c}=XW(i,s.map(u=>u.insert).join(""));t.delete(c,l),t.insert(c,o),t.applyDelta(s.map(u=>({retain:u.insert.length,attributes:u.attributes})))},n_=t=>{const e={};return t.forEach(n=>{n.type.name!=="ychange"&&(e[n.type.name]=n.attrs)}),e},M0=(t,e,n,r)=>{if(e instanceof jn&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof jn){const h=e.getAttributes(),p=n.attrs;for(const m in p)p[m]!==null?h[m]!==p[m]&&m!=="ychange"&&e.setAttribute(m,p[m]):e.removeAttribute(m);for(const m in h)p[m]===void 0&&e.removeAttribute(m)}const i=np(n),s=i.length,o=e.toArray(),l=o.length,c=Kh(s,l);let u=0,d=0;for(;u<c;u++){const h=o[u],p=i[u];if(!Od(r.get(h),p))if(jc(h,p))r.set(h,p);else break}for(;d+u+1<c;d++){const h=o[l-d-1],p=i[s-d-1];if(!Od(r.get(h),p))if(jc(h,p))r.set(h,p);else break}t.transact(()=>{for(;l-u-d>0&&s-u-d>0;){const p=o[u],m=i[u],y=o[l-d-1],b=i[s-d-1];if(p instanceof br&&m instanceof Array)t_(p,m)||l8(p,m,r),u+=1;else{let x=p instanceof jn&&O0(p,m),C=y instanceof jn&&O0(y,b);if(x&&C){const M=lS(p,m,r),L=lS(y,b,r);M.foundMappedChild&&!L.foundMappedChild?C=!1:!M.foundMappedChild&&L.foundMappedChild||M.equalityFactor<L.equalityFactor?x=!1:C=!1}x?(M0(t,p,m,r),u+=1):C?(M0(t,y,b,r),d+=1):(r.delete(e.get(u)),e.delete(u,1),e.insert(u,[_0(m,r)]),u+=1)}}const h=l-u-d;if(l===1&&s===0&&o[0]instanceof br?(r.delete(o[0]),o[0].delete(0,o[0].length)):h>0&&(e.slice(u,u+h).forEach(p=>r.delete(p)),e.delete(u,h)),u+d<s){const p=[];for(let m=u;m<s-d;m++)p.push(_0(i[m],r));e.insert(u,p)}},Jt)},O0=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name,R0=(t,e,n)=>{if(t===0)return om(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof br){if(r._length>=t)return om(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<i)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&i>1)return new Sd(r._item===null?null:r._item.id,r._item===null?Fc(r):null,null);if(t-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Sd(r._item===null?null:r._item.id,r._item===null?Fc(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Cr();if(t===0&&r.constructor!==br&&r!==e)return a8(r._item.parent,r._item)}return om(e,e._length,-1)},a8=(t,e)=>{let n=null,r=null;return t._item===null?r=Fc(t):n=lt(t._item.id.client,t._item.id.clock),new Sd(n,r,e.id)},L0=(t,e,n,r)=>{const i=GU(n,t);if(i===null||i.type!==e&&!Vc(e,i.type._item))return null;let s=i.type,o=0;if(s.constructor===br)o=i.index;else if(s._item===null||!s._item.deleted){let l=s._first,c=0;for(;c<s._length&&c<i.index&&l!==null;){if(!l.deleted){const u=l.content.type;c++,u instanceof br?o+=u._length:o+=r.get(u).nodeSize}l=l.right}o+=1}for(;s!==e&&s._item!==null;){const l=s._item.parent;if(l._item===null||!l._item.deleted){o+=1;let c=l._first;for(;c!==null;){const u=c.content.type;if(u===s)break;c.deleted||(u instanceof br?o+=u._length:o+=r.get(u).nodeSize),c=c.right}}s=l}return o-1},c8=t=>{const e=is.getState(t).undoManager;if(e!=null)return e.undo(),!0},u8=t=>{const e=is.getState(t).undoManager;if(e!=null)return e.redo(),!0},f8=new Set(["paragraph"]),d8=(t,e)=>!(t instanceof Mt)||!(t.content instanceof fi)||!(t.content.type instanceof to||t.content.type instanceof jn&&e.has(t.content.type.nodeName))||t.content.type._length===0,h8=({protectedNodes:t=f8,trackedOrigins:e=[],undoManager:n=null}={})=>new Ft({key:is,state:{init:(r,i)=>{const s=Jt.getState(i),o=n||new RT(s.type,{trackedOrigins:new Set([Jt].concat(e)),deleteFilter:l=>d8(l,t),captureTransaction:l=>l.meta.get("addToHistory")!==!1});return{undoManager:o,prevSel:null,hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}},apply:(r,i,s,o)=>{const l=Jt.getState(o).binding,c=i.undoManager,u=c.undoStack.length>0,d=c.redoStack.length>0;return l?{undoManager:c,prevSel:T0(l,s),hasUndoOps:u,hasRedoOps:d}:u!==i.hasUndoOps||d!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:c.undoStack.length>0,hasRedoOps:c.redoStack.length>0}):i}},view:r=>{const i=Jt.getState(r.state),s=is.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:o})=>{const l=i.binding;l&&o.meta.set(l,is.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:o})=>{const l=i.binding;l&&(l.beforeTransactionSelection=o.meta.get(l)||l.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}});on.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},onCreate(){this.editor.extensionManager.extensions.find(t=>t.name==="history")&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>(t.setMeta("preventDispatch",!0),is.getState(e).undoManager.undoStack.length===0?!1:n?c8(e):!0),redo:()=>({tr:t,state:e,dispatch:n})=>(t.setMeta("preventDispatch",!0),is.getState(e).undoManager.redoStack.length===0?!1:n?u8(e):!0)}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),e=h8(),n=e.spec.view;e.spec.view=s=>{const{undoManager:o}=is.getState(s.state);o.restore&&(o.restore(),o.restore=()=>{});const l=n?n(s):void 0;return{destroy:()=>{const c=o.trackedOrigins.has(o),u=o._observers;o.restore=()=>{c&&o.trackedOrigins.add(o),o.doc.on("afterTransaction",o.afterTransactionHandler),o._observers=u},l!=null&&l.destroy&&l.destroy()}}};const r={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender};return[e8(t,r),e]}});function p8(t){return!!t.getMeta(Jt)}function aS(t){if(!t.length)return It.empty;const e=[],n=t[0].$from.node(0);return t.forEach(r=>{const i=r.$from.pos,s=r.$from.nodeAfter;s&&e.push(Pn.node(i,i+s.nodeSize,{class:"ProseMirror-selectednoderange"}))}),It.create(n,e)}function rp(t,e,n){const r=[],i=t.node(0);n=typeof n=="number"&&n>=0?n:t.sameParent(e)?Math.max(0,t.sharedDepth(e.pos)-1):t.sharedDepth(e.pos);const s=new kc(t,e,n),o=s.depth===0?0:i.resolve(s.start).posAtIndex(0);return s.parent.forEach((l,c)=>{const u=o+c,d=u+l.nodeSize;if(u<s.start||u>=s.end)return;const h=new Ey(i.resolve(u),i.resolve(d));r.push(h)}),r}let g8=class r_{constructor(e,n){this.anchor=e,this.head=n}map(e){return new r_(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return new Ws(n,r)}},Ws=class Ts extends We{constructor(e,n,r,i=1){const{doc:s}=e,o=e===n,l=e.pos===s.content.size&&n.pos===s.content.size,c=o&&!l?s.resolve(n.pos+(i>0?1:-1)):n,u=o&&l?s.resolve(e.pos-(i>0?1:-1)):e,d=rp(u.min(c),u.max(c),r);super(c.pos>=e.pos?d[0].$from:d[d.length-1].$to,c.pos>=e.pos?d[d.length-1].$to:d[0].$from,d),this.depth=r}get $to(){return this.ranges[this.ranges.length-1].$to}eq(e){return e instanceof Ts&&e.$from.pos===this.$from.pos&&e.$to.pos===this.$to.pos}map(e,n){const r=e.resolve(n.map(this.anchor)),i=e.resolve(n.map(this.head));return new Ts(r,i)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){const{doc:e}=this.$from;if(this.isForwards&&this.ranges.length>1){const i=this.ranges.slice(0,-1),s=i[0].$from,o=i[i.length-1].$to;return new Ts(s,o,this.depth)}const n=this.ranges[0],r=e.resolve(Math.max(0,n.$from.pos-1));return new Ts(this.$anchor,r,this.depth)}extendForwards(){const{doc:e}=this.$from;if(this.isBackwards&&this.ranges.length>1){const i=this.ranges.slice(1),s=i[0].$from,o=i[i.length-1].$to;return new Ts(o,s,this.depth)}const n=this.ranges[this.ranges.length-1],r=e.resolve(Math.min(e.content.size,n.$to.pos+1));return new Ts(this.$anchor,r,this.depth)}static fromJSON(e,n){return new Ts(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r,i,s=1){return new this(e.resolve(n),e.resolve(r),i,s)}getBookmark(){return new g8(this.anchor,this.head)}};function xf(t){return t instanceof Ws}Ws.prototype.visible=!1;const m8=on.create({name:"nodeRange",addOptions:()=>({depth:void 0,key:"Mod"}),addKeyboardShortcuts(){return{"Shift-ArrowUp":({editor:t})=>{const{depth:e}=this.options,{view:n,state:r}=t,{doc:i,selection:s,tr:o}=r,{anchor:l,head:c}=s;if(!xf(s)){const d=Ws.create(i,l,c,e,-1);return o.setSelection(d),n.dispatch(o),!0}const u=s.extendBackwards();return o.setSelection(u),n.dispatch(o),!0},"Shift-ArrowDown":({editor:t})=>{const{depth:e}=this.options,{view:n,state:r}=t,{doc:i,selection:s,tr:o}=r,{anchor:l,head:c}=s;if(!xf(s)){const d=Ws.create(i,l,c,e);return o.setSelection(d),n.dispatch(o),!0}const u=s.extendForwards();return o.setSelection(u),n.dispatch(o),!0},"Mod-a":({editor:t})=>{const{depth:e}=this.options,{view:n,state:r}=t,{doc:i,tr:s}=r,o=Ws.create(i,0,i.content.size,e);return s.setSelection(o),n.dispatch(s),!0}}},onSelectionUpdate(){const{selection:t}=this.editor.state;xf(t)&&this.editor.view.dom.classList.add("ProseMirror-noderangeselection")},addProseMirrorPlugins(){let t=!1,e=!1;return[new Ft({key:new Kt("nodeRange"),props:{attributes:()=>t?{class:"ProseMirror-noderangeselection"}:{class:""},handleDOMEvents:{mousedown:(n,r)=>{const{key:i}=this.options,s=/Mac/.test(navigator.platform),o=!!r.shiftKey,l=!!r.ctrlKey,c=!!r.altKey,u=!!r.metaKey;return(i==null||i==="Shift"&&o||i==="Control"&&l||i==="Alt"&&c||i==="Meta"&&u||i==="Mod"&&(s?u:l))&&(e=!0),!!e&&(document.addEventListener("mouseup",()=>{e=!1;const{state:d}=n,{doc:h,selection:p,tr:m}=d,{$anchor:y,$head:b}=p;if(y.sameParent(b))return;const x=Ws.create(h,y.pos,b.pos,this.options.depth);m.setSelection(x),n.dispatch(m)},{once:!0}),!1)}},decorations:n=>{const{selection:r}=n,i=xf(r);if(t=!1,!e)return i?(t=!0,aS(r.ranges)):null;const{$from:s,$to:o}=r;if(!i&&s.sameParent(o))return null;const l=rp(s,o,this.options.depth);return l.length?(t=!0,aS(l)):null}}})]}});function y8(t){const e=t.cloneNode(!0),n=[t,...Array.from(t.getElementsByTagName("*"))],r=[e,...Array.from(e.getElementsByTagName("*"))];return n.forEach((i,s)=>{r[s].style.cssText=function(o){let l="";const c=getComputedStyle(o);for(let u=0;u<c.length;u+=1)l+=`${c[u]}:${c.getPropertyValue(c[u])};`;return l}(i)}),e}const i_=t=>{const{x:e,y:n,direction:r,editor:i}=t;let s=null,o=null,l=null,c=e;for(;o===null&&c<window.innerWidth&&c>0;){const u=document.elementsFromPoint(c,n),d=u.findIndex(p=>p.classList.contains("ProseMirror")),h=u.slice(0,d);if(h.length>0){const p=h[0];if(s=p,l=i.view.posAtDOM(p,0),l>=0){o=i.state.doc.nodeAt(Math.max(l-1,0)),o!=null&&o.isText&&(o=i.state.doc.nodeAt(Math.max(l-1,0))),o||(o=i.state.doc.nodeAt(Math.max(l,0)));break}}r==="left"?c-=1:c+=1}return{resultElement:s,resultNode:o,pos:l??null}};function Cf(t,e){return window.getComputedStyle(t)[e]}function v8(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function cS(t){var e;(e=t.parentNode)===null||e===void 0||e.removeChild(t)}function b8(t,e){const{doc:n}=e.view.state,r=i_({editor:e,x:t.clientX,y:t.clientY,direction:"right"});if(!r.resultNode||r.pos===null)return[];const i=t.clientX,s=function(d,h,p){const m=parseInt(Cf(d.dom,"paddingLeft"),10),y=parseInt(Cf(d.dom,"paddingRight"),10),b=parseInt(Cf(d.dom,"borderLeftWidth"),10),x=parseInt(Cf(d.dom,"borderLeftWidth"),10),C=d.dom.getBoundingClientRect();return{left:v8(h,C.left+m+b,C.right-y-x),top:p}}(e.view,i,t.clientY),o=e.view.posAtCoords(s);if(!o)return[];const{pos:l}=o;if(!n.resolve(l).parent)return[];const c=n.resolve(r.pos),u=n.resolve(r.pos+1);return rp(c,u,0)}const uS=(t,e)=>{const n=t.resolve(e),{depth:r}=n;return r===0?e:n.pos-n.parentOffset-1},fS=(t,e)=>{const n=t.nodeAt(e),r=t.resolve(e);let{depth:i}=r,s=n;for(;i>0;){const o=r.node(i);i-=1,i===0&&(s=o)}return s},um=(t,e)=>{const n=Jt.getState(t);return n?R0(e,n.type,n.binding.mapping):null},dS=(t,e)=>{let n=e;for(;n&&n.parentNode&&n.parentNode!==t.dom;)n=n.parentNode;return n},w8=new Kt("dragHandle"),x8=({pluginKey:t=w8,element:e,editor:n,tippyOptions:r,onNodeChange:i})=>{const s=document.createElement("div");let o,l=null,c=!1,u=null,d=-1;return e.addEventListener("dragstart",h=>{(function(p,m){const{view:y}=m;if(!p.dataTransfer)return;const{empty:b,$from:x,$to:C}=y.state.selection,M=b8(p,m),L=rp(x,C,0),A=L.some(te=>M.find(me=>me.$from===te.$from&&me.$to===te.$to)),F=b||!A?M:L;if(!F.length)return;const{tr:R}=y.state,U=document.createElement("div"),W=F[0].$from.pos,ee=F[F.length-1].$to.pos,ve=Ws.create(y.state.doc,W,ee),Ce=ve.content();F.forEach(te=>{const me=y8(y.nodeDOM(te.$from.pos));U.append(me)}),U.style.position="absolute",U.style.top="-10000px",document.body.append(U),p.dataTransfer.clearData(),p.dataTransfer.setDragImage(U,0,0),y.dragging={slice:Ce,move:!0},R.setSelection(ve),y.dispatch(R),document.addEventListener("drop",()=>cS(U),{once:!0})})(h,n),setTimeout(()=>{e&&(e.style.pointerEvents="none")},0)}),e.addEventListener("dragend",()=>{e&&(e.style.pointerEvents="auto")}),new Ft({key:typeof t=="string"?new Kt(t):t,state:{init:()=>({locked:!1}),apply(h,p,m,y){const b=h.getMeta("lockDragHandle"),x=h.getMeta("hideDragHandle");if(b!==void 0&&(c=b),x&&l)return l.hide(),c=!1,u=null,d=-1,i==null||i({editor:n,node:null,pos:-1}),p;if(h.docChanged&&d!==-1&&e&&l)if(p8(h)){const C=((M,L)=>{const A=Jt.getState(M);return A?L0(A.doc,A.type,L,A.binding.mapping)||0:-1})(y,o);C!==d&&(d=C)}else{const C=h.mapping.map(d);C!==d&&(d=C,o=um(y,d))}return p}},view:h=>{var p;return e.draggable=!0,e.style.pointerEvents="auto",(p=n.view.dom.parentElement)===null||p===void 0||p.appendChild(s),s.appendChild(e),s.style.pointerEvents="none",s.style.position="absolute",s.style.top="0",s.style.left="0",l=iu(h.dom,{getReferenceClientRect:null,interactive:!0,trigger:"manual",placement:"left-start",hideOnClick:!1,duration:100,popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{rootBoundary:"document",mainAxis:!1}}]},...r,appendTo:s,content:e}),{update(m,y){if(!e||!l||(e.draggable=!c,h.state.doc.eq(y.doc)||d===-1))return;let b=h.nodeDOM(d);if(b=dS(h,b),b===h.dom||(b==null?void 0:b.nodeType)!==1)return;const x=h.posAtDOM(b,0),C=fS(n.state.doc,x),M=uS(n.state.doc,x);u=C,d=M,o=um(h.state,d),i==null||i({editor:n,node:u,pos:d}),l.setProps({getReferenceClientRect:()=>b.getBoundingClientRect()})},destroy(){l==null||l.destroy(),e&&cS(s)}}},props:{handleDOMEvents:{mouseleave:(h,p)=>(c||p.target&&!s.contains(p.relatedTarget)&&(l==null||l.hide(),u=null,d=-1,i==null||i({editor:n,node:null,pos:-1})),!1),mousemove(h,p){if(!e||!l||c)return!1;const m=i_({x:p.clientX,y:p.clientY,direction:"right",editor:n});if(!m.resultElement)return!1;let y=m.resultElement;if(y=dS(h,y),y===h.dom||(y==null?void 0:y.nodeType)!==1)return!1;const b=h.posAtDOM(y,0),x=fS(n.state.doc,b);if(x!==u){const C=uS(n.state.doc,b);u=x,d=C,o=um(h.state,d),i==null||i({editor:n,node:u,pos:d}),l.setProps({getReferenceClientRect:()=>y.getBoundingClientRect()}),l.show()}return!1}}}})},C8=on.create({name:"dragHandle",addOptions:()=>({render(){const t=document.createElement("div");return t.classList.add("drag-handle"),t},tippyOptions:{},locked:!1,onNodeChange:()=>null}),addCommands(){return{lockDragHandle:()=>({editor:t})=>(this.options.locked=!0,t.commands.setMeta("lockDragHandle",this.options.locked)),unlockDragHandle:()=>({editor:t})=>(this.options.locked=!1,t.commands.setMeta("lockDragHandle",this.options.locked)),toggleDragHandle:()=>({editor:t})=>(this.options.locked=!this.options.locked,t.commands.setMeta("lockDragHandle",this.options.locked))}},addProseMirrorPlugins(){const t=this.options.render();return[x8({tippyOptions:this.options.tippyOptions,element:t,editor:this.editor,onNodeChange:this.options.onNodeChange})]}}),S8=Mn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),k8=Mn.create({name:"doc",topNode:!0,content:"block+"});var Rd=200,wn=function(){};wn.prototype.append=function(e){return e.length?(e=wn.from(e),!this.length&&e||e.length<Rd&&this.leafAppend(e)||this.length<Rd&&e.leafPrepend(this)||this.appendInner(e)):this};wn.prototype.prepend=function(e){return e.length?wn.from(e).append(this):this};wn.prototype.appendInner=function(e){return new E8(this,e)};wn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?wn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};wn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};wn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};wn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};wn.from=function(e){return e instanceof wn?e:e&&e.length?new s_(e):wn.empty};var s_=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var c=s;c<o;c++)if(i(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var c=s-1;c>=o;c--)if(i(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Rd)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Rd)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(wn);wn.empty=new s_([]);var E8=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(wn);const A8=500;class ei{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,c,u=[],d=[];return this.items.forEach((h,p)=>{if(!h.step){i||(i=this.remapping(r,p+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new bi(h.map));let m=h.step.map(i.slice(s)),y;m&&o.maybeStep(m).doc&&(y=o.mapping.maps[o.mapping.maps.length-1],u.push(new bi(y,void 0,void 0,u.length+d.length))),s--,y&&i.appendMap(y,s)}else o.maybeStep(h.step);if(h.selection)return l=i?h.selection.map(i.slice(s)):h.selection,c=new ei(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,c=!i&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),p=new bi(e.mapping.maps[d],h,n),m;(m=c&&c.merge(p))&&(p=m,d?s.pop():l=l.slice(0,l.length-1)),s.push(p),n&&(o++,n=void 0),i||(c=p)}let u=o-r.depth;return u>_8&&(l=T8(l,u),o-=u),new ei(l.append(s),o)}remapping(e,n){let r=new Bl;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new ei(this.items.append(e.map(n=>new bi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let c=n;this.items.forEach(p=>{let m=s.getMirror(--c);if(m==null)return;o=Math.min(o,m);let y=s.maps[m];if(p.step){let b=e.steps[m].invert(e.docs[m]),x=p.selection&&p.selection.map(s.slice(c+1,m));x&&l++,r.push(new bi(y,b,x))}else r.push(new bi(y))},i);let u=[];for(let p=n;p<o;p++)u.push(new bi(s.maps[p]));let d=this.items.slice(0,i).append(u).append(r),h=new ei(d,l);return h.emptyItemCount()>A8&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let d=o.selection&&o.selection.map(n.slice(r));d&&s++;let h=new bi(u.invert(),c,d),p,m=i.length-1;(p=i.length&&i[m].merge(h))?i[m]=p:i.push(h)}}else o.map&&r--},this.items.length,0),new ei(wn.from(i.reverse()),s)}}ei.empty=new ei(wn.empty,0);function T8(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class bi{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new bi(n.getMap().invert(),n,this.selection)}}}class Ns{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const _8=20;function M8(t,e,n,r){let i=n.getMeta(Wo),s;if(i)return i.historyState;n.getMeta(L8)&&(t=new Ns(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Wo))return o.getMeta(Wo).redo?new Ns(t.done.addTransform(n,void 0,r,Kf(e)),t.undone,hS(n.mapping.maps),t.prevTime,t.prevComposition):new Ns(t.done,t.undone.addTransform(n,void 0,r,Kf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!O8(n,t.prevRanges)),u=o?fm(t.prevRanges,n.mapping):hS(n.mapping.maps);return new Ns(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,Kf(e)),ei.empty,u,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ns(t.done.rebased(n,s),t.undone.rebased(n,s),fm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ns(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),fm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function O8(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function hS(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function fm(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function R8(t,e,n){let r=Kf(e),i=Wo.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new Ns(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Wo,{redo:n,historyState:c})}let dm=!1,pS=null;function Kf(t){let e=t.plugins;if(pS!=e){dm=!1,pS=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){dm=!0;break}}return dm}const Wo=new Kt("history"),L8=new Kt("closeHistory");function I8(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ft({key:Wo,state:{init(){return new Ns(ei.empty,ei.empty,null,0,-1)},apply(e,n,r){return M8(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?l_:r=="historyRedo"?a_:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function o_(t,e){return(n,r)=>{let i=Wo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=R8(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const l_=o_(!1,!0),a_=o_(!0,!0),N8=on.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>l_(t,e),redo:()=>({state:t,dispatch:e})=>a_(t,e)}},addProseMirrorPlugins(){return[I8(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),D8=Mn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Uz({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),P8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,B8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,$8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,H8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,F8=Ii.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Rc({find:P8,type:this.type}),Rc({find:$8,type:this.type})]},addPasteRules(){return[Zl({find:B8,type:this.type}),Zl({find:H8,type:this.type})]}}),V8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,z8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,U8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,W8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,j8=Ii.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Rc({find:V8,type:this.type}),Rc({find:U8,type:this.type})]},addPasteRules(){return[Zl({find:z8,type:this.type}),Zl({find:W8,type:this.type})]}}),K8=Ii.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),q8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,G8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,J8=Ii.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Rc({find:q8,type:this.type})]},addPasteRules(){return[Zl({find:G8,type:this.type})]}}),y1=Mn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",jt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ld=Ii.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Vy(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),gS=/^\s*([-+*])\s$/,Y8=Mn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(y1.name,this.editor.getAttributes(Ld.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Lc({find:gS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Lc({find:gS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ld.name),editor:this.editor})),[t]}}),mS=/^(\d+)\.\s$/,X8=Mn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",jt(this.options.HTMLAttributes,n),0]:["ol",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(y1.name,this.editor.getAttributes(Ld.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Lc({find:mS,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Lc({find:mS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ld.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Z8="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Q8="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",oa=(t,e)=>{for(const n in e)t[n]=e[n];return t},I0="numeric",N0="ascii",D0="alpha",qf="asciinumeric",Sf="alphanumeric",P0="domain",c_="emoji",ej="scheme",tj="slashscheme",yS="whitespace";function nj(t,e){return t in e||(e[t]=[]),e[t]}function Io(t,e,n){e[I0]&&(e[qf]=!0,e[Sf]=!0),e[N0]&&(e[qf]=!0,e[D0]=!0),e[qf]&&(e[Sf]=!0),e[D0]&&(e[Sf]=!0),e[Sf]&&(e[P0]=!0),e[c_]&&(e[P0]=!0);for(const r in e){const i=nj(r,n);i.indexOf(t)<0&&i.push(t)}}function rj(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function er(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}er.groups={};er.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||er.groups;let i;return e&&e.j?i=e:(i=new er(e),n&&r&&Io(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||er.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new er,oa(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new er,s){if(r)if(o.t&&typeof o.t=="string"){const c=oa(rj(o.t,r),n);Io(s,c,r)}else n&&Io(s,n,r);o.t=s}return i.j[t]=o,o}};const st=(t,e,n,r,i)=>t.ta(e,n,r,i),Ir=(t,e,n,r,i)=>t.tr(e,n,r,i),vS=(t,e,n,r,i)=>t.ts(e,n,r,i),fe=(t,e,n,r,i)=>t.tt(e,n,r,i),Zi="WORD",B0="UWORD",Kc="LOCALHOST",$0="TLD",H0="UTLD",Gf="SCHEME",Ol="SLASH_SCHEME",v1="NUM",u_="WS",b1="NL",pc="OPENBRACE",gc="CLOSEBRACE",Id="OPENBRACKET",Nd="CLOSEBRACKET",Dd="OPENPAREN",Pd="CLOSEPAREN",Bd="OPENANGLEBRACKET",$d="CLOSEANGLEBRACKET",Hd="FULLWIDTHLEFTPAREN",Fd="FULLWIDTHRIGHTPAREN",Vd="LEFTCORNERBRACKET",zd="RIGHTCORNERBRACKET",Ud="LEFTWHITECORNERBRACKET",Wd="RIGHTWHITECORNERBRACKET",jd="FULLWIDTHLESSTHAN",Kd="FULLWIDTHGREATERTHAN",qd="AMPERSAND",Gd="APOSTROPHE",Jd="ASTERISK",Ds="AT",Yd="BACKSLASH",Xd="BACKTICK",Zd="CARET",Bs="COLON",w1="COMMA",Qd="DOLLAR",wi="DOT",eh="EQUALS",x1="EXCLAMATION",xi="HYPHEN",th="PERCENT",nh="PIPE",rh="PLUS",ih="POUND",sh="QUERY",C1="QUOTE",S1="SEMI",Ci="SLASH",mc="TILDE",oh="UNDERSCORE",f_="EMOJI",lh="SYM";var d_=Object.freeze({__proto__:null,WORD:Zi,UWORD:B0,LOCALHOST:Kc,TLD:$0,UTLD:H0,SCHEME:Gf,SLASH_SCHEME:Ol,NUM:v1,WS:u_,NL:b1,OPENBRACE:pc,CLOSEBRACE:gc,OPENBRACKET:Id,CLOSEBRACKET:Nd,OPENPAREN:Dd,CLOSEPAREN:Pd,OPENANGLEBRACKET:Bd,CLOSEANGLEBRACKET:$d,FULLWIDTHLEFTPAREN:Hd,FULLWIDTHRIGHTPAREN:Fd,LEFTCORNERBRACKET:Vd,RIGHTCORNERBRACKET:zd,LEFTWHITECORNERBRACKET:Ud,RIGHTWHITECORNERBRACKET:Wd,FULLWIDTHLESSTHAN:jd,FULLWIDTHGREATERTHAN:Kd,AMPERSAND:qd,APOSTROPHE:Gd,ASTERISK:Jd,AT:Ds,BACKSLASH:Yd,BACKTICK:Xd,CARET:Zd,COLON:Bs,COMMA:w1,DOLLAR:Qd,DOT:wi,EQUALS:eh,EXCLAMATION:x1,HYPHEN:xi,PERCENT:th,PIPE:nh,PLUS:rh,POUND:ih,QUERY:sh,QUOTE:C1,SEMI:S1,SLASH:Ci,TILDE:mc,UNDERSCORE:oh,EMOJI:f_,SYM:lh});const kl=/[a-z]/,hm=new RegExp("\\p{L}","u"),pm=new RegExp("\\p{Emoji}","u"),gm=/\d/,bS=/\s/,wS=`
`,ij="",sj="";let kf=null,Ef=null;function oj(t){t===void 0&&(t=[]);const e={};er.groups=e;const n=new er;kf==null&&(kf=xS(Z8)),Ef==null&&(Ef=xS(Q8)),fe(n,"'",Gd),fe(n,"{",pc),fe(n,"}",gc),fe(n,"[",Id),fe(n,"]",Nd),fe(n,"(",Dd),fe(n,")",Pd),fe(n,"<",Bd),fe(n,">",$d),fe(n,"",Hd),fe(n,"",Fd),fe(n,"",Vd),fe(n,"",zd),fe(n,"",Ud),fe(n,"",Wd),fe(n,"",jd),fe(n,"",Kd),fe(n,"&",qd),fe(n,"*",Jd),fe(n,"@",Ds),fe(n,"`",Xd),fe(n,"^",Zd),fe(n,":",Bs),fe(n,",",w1),fe(n,"$",Qd),fe(n,".",wi),fe(n,"=",eh),fe(n,"!",x1),fe(n,"-",xi),fe(n,"%",th),fe(n,"|",nh),fe(n,"+",rh),fe(n,"#",ih),fe(n,"?",sh),fe(n,'"',C1),fe(n,"/",Ci),fe(n,";",S1),fe(n,"~",mc),fe(n,"_",oh),fe(n,"\\",Yd);const r=Ir(n,gm,v1,{[I0]:!0});Ir(r,gm,r);const i=Ir(n,kl,Zi,{[N0]:!0});Ir(i,kl,i);const s=Ir(n,hm,B0,{[D0]:!0});Ir(s,kl),Ir(s,hm,s);const o=Ir(n,bS,u_,{[yS]:!0});fe(n,wS,b1,{[yS]:!0}),fe(o,wS),Ir(o,bS,o);const l=Ir(n,pm,f_,{[c_]:!0});Ir(l,pm,l),fe(l,ij,l);const c=fe(l,sj);Ir(c,pm,l);const u=[[kl,i]],d=[[kl,null],[hm,s]];for(let h=0;h<kf.length;h++)Es(n,kf[h],$0,Zi,u);for(let h=0;h<Ef.length;h++)Es(n,Ef[h],H0,B0,d);Io($0,{tld:!0,ascii:!0},e),Io(H0,{utld:!0,alpha:!0},e),Es(n,"file",Gf,Zi,u),Es(n,"mailto",Gf,Zi,u),Es(n,"http",Ol,Zi,u),Es(n,"https",Ol,Zi,u),Es(n,"ftp",Ol,Zi,u),Es(n,"ftps",Ol,Zi,u),Io(Gf,{scheme:!0,ascii:!0},e),Io(Ol,{slashscheme:!0,ascii:!0},e),t=t.sort((h,p)=>h[0]>p[0]?1:-1);for(let h=0;h<t.length;h++){const p=t[h][0],y=t[h][1]?{[ej]:!0}:{[tj]:!0};p.indexOf("-")>=0?y[P0]=!0:kl.test(p)?gm.test(p)?y[qf]=!0:y[N0]=!0:y[I0]=!0,vS(n,p,p,y)}return vS(n,"localhost",Kc,{ascii:!0}),n.jd=new er(lh),{start:n,tokens:oa({groups:e},d_)}}function lj(t,e){const n=aj(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,c=null,u=0,d=null,h=-1,p=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(h=0,p=0,d=l):h>=0&&(h+=n[o].length,p++),u+=n[o].length,s+=n[o].length,o++;s-=h,o-=p,u-=h,i.push({t:d.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function aj(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Es(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?s=t.j[c]:(s=new er(r),s.jr=i.slice(),t.j[c]=s),t=s}return s=new er(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function xS(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const qc={defaultProtocol:"http",events:null,format:CS,formatHref:CS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function k1(t,e){e===void 0&&(e=null);let n=oa({},qc);t&&(n=oa(n,t instanceof k1?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}k1.prototype={o:qc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:qc[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function CS(t){return t}function h_(t,e){this.t="token",this.v=t,this.tk=e}h_.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=qc.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),c=t.get("target",n,e),u=t.get("rel",n,e),d=t.getObj("attributes",n,e),h=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),c&&(o.target=c),u&&(o.rel=u),d&&oa(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function ip(t,e){class n extends h_{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const SS=ip("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),kS=ip("text"),cj=ip("nl"),Af=ip("url",{isLink:!0,toHref(t){return t===void 0&&(t=qc.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Kc&&t[1].t===Bs}}),Nr=t=>new er(t);function uj(t){let{groups:e}=t;const n=e.domain.concat([qd,Jd,Ds,Yd,Xd,Zd,Qd,eh,xi,v1,th,nh,rh,ih,Ci,lh,mc,oh]),r=[Gd,Bs,w1,wi,x1,sh,C1,S1,Bd,$d,pc,gc,Nd,Id,Dd,Pd,Hd,Fd,Vd,zd,Ud,Wd,jd,Kd],i=[qd,Gd,Jd,Yd,Xd,Zd,Qd,eh,xi,pc,gc,th,nh,rh,ih,sh,Ci,lh,mc,oh],s=Nr(),o=fe(s,mc);st(o,i,o),st(o,e.domain,o);const l=Nr(),c=Nr(),u=Nr();st(s,e.domain,l),st(s,e.scheme,c),st(s,e.slashscheme,u),st(l,i,o),st(l,e.domain,l);const d=fe(l,Ds);fe(o,Ds,d),fe(c,Ds,d),fe(u,Ds,d);const h=fe(o,wi);st(h,i,o),st(h,e.domain,o);const p=Nr();st(d,e.domain,p),st(p,e.domain,p);const m=fe(p,wi);st(m,e.domain,p);const y=Nr(SS);st(m,e.tld,y),st(m,e.utld,y),fe(d,Kc,y);const b=fe(p,xi);st(b,e.domain,p),st(y,e.domain,p),fe(y,wi,m),fe(y,xi,b);const x=fe(y,Bs);st(x,e.numeric,SS);const C=fe(l,xi),M=fe(l,wi);st(C,e.domain,l),st(M,i,o),st(M,e.domain,l);const L=Nr(Af);st(M,e.tld,L),st(M,e.utld,L),st(L,e.domain,l),st(L,i,o),fe(L,wi,M),fe(L,xi,C),fe(L,Ds,d);const A=fe(L,Bs),F=Nr(Af);st(A,e.numeric,F);const R=Nr(Af),U=Nr();st(R,n,R),st(R,r,U),st(U,n,R),st(U,r,U),fe(L,Ci,R),fe(F,Ci,R);const W=fe(c,Bs),ee=fe(u,Bs),ve=fe(ee,Ci),Ce=fe(ve,Ci);st(c,e.domain,l),fe(c,wi,M),fe(c,xi,C),st(u,e.domain,l),fe(u,wi,M),fe(u,xi,C),st(W,e.domain,R),fe(W,Ci,R),st(Ce,e.domain,R),st(Ce,n,R),fe(Ce,Ci,R);const te=[[pc,gc],[Id,Nd],[Dd,Pd],[Bd,$d],[Hd,Fd],[Vd,zd],[Ud,Wd],[jd,Kd]];for(let me=0;me<te.length;me++){const[Qe,rt]=te[me],Re=fe(R,Qe);fe(U,Qe,Re),fe(Re,rt,R);const be=Nr(Af);st(Re,n,be);const j=Nr();st(Re,r),st(be,n,be),st(be,r,j),st(j,n,be),st(j,r,j),fe(be,rt,R),fe(j,rt,R)}return fe(s,Kc,L),fe(s,b1,cj),{start:s,tokens:d_}}function fj(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,c=null,u=null,d=0,h=null,p=-1;for(;i<r&&!(c=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=c||l.go(n[i].t));)c=null,l=u,l.accepts()?(p=0,h=l):p>=0&&p++,i++,d++;if(p<0)i-=d,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(mm(kS,e,o)),o=[]),i-=p,d-=p;const m=h.t,y=n.slice(i-d,i);s.push(mm(m,e,y))}}return o.length>0&&s.push(mm(kS,e,o)),s}function mm(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const dj=typeof console<"u"&&console&&console.warn||(()=>{}),hj="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ut={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function pj(){er.groups={},Ut.scanner=null,Ut.parser=null,Ut.tokenQueue=[],Ut.pluginQueue=[],Ut.customSchemes=[],Ut.initialized=!1}function ES(t,e){if(e===void 0&&(e=!1),Ut.initialized&&dj(`linkifyjs: already initialized - will not register custom scheme "${t}" ${hj}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ut.customSchemes.push([t,e])}function gj(){Ut.scanner=oj(Ut.customSchemes);for(let t=0;t<Ut.tokenQueue.length;t++)Ut.tokenQueue[t][1]({scanner:Ut.scanner});Ut.parser=uj(Ut.scanner.tokens);for(let t=0;t<Ut.pluginQueue.length;t++)Ut.pluginQueue[t][1]({scanner:Ut.scanner,parser:Ut.parser});Ut.initialized=!0}function p_(t){return Ut.initialized||gj(),fj(Ut.parser.start,t,lj(Ut.scanner.start,t))}function g_(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new k1(n),i=p_(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}function mj(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function yj(t){return new Ft({key:new Kt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=nz(n.doc,[...e]);if(uz(l).forEach(({newRange:u})=>{const d=iz(r.doc,u,m=>m.isTextblock);let h,p;if(d.length>1?(h=d[0],p=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(u.from,u.to," "," ").endsWith(" ")&&(h=d[0],p=r.doc.textBetween(h.pos,u.to,void 0," ")),h&&p){const m=p.split(" ").filter(C=>C!=="");if(m.length<=0)return!1;const y=m[m.length-1],b=h.pos+p.lastIndexOf(y);if(!y)return!1;const x=p_(y).map(C=>C.toObject(t.defaultProtocol));if(!mj(x))return!1;x.filter(C=>C.isLink).map(C=>({...C,from:b+C.start+1,to:b+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>t.validate(C.value)).forEach(C=>{Uy(C.from,C.to,r.doc).some(M=>M.mark.type===t.type)||o.addMark(C.from,C.to,t.type.create({href:C.href}))})}}),!!o.steps.length)return o}})}function vj(t){return new Ft({key:new Kt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=r.target;const l=[];for(;o.nodeName!=="DIV";)l.push(o),o=o.parentNode;if(!l.find(p=>p.nodeName==="A"))return!1;const c=$A(e.state,t.type.name),u=r.target,d=(i=u==null?void 0:u.href)!==null&&i!==void 0?i:c.href,h=(s=u==null?void 0:u.target)!==null&&s!==void 0?s:c.target;return u&&d?(window.open(d,h),!0):!1}}})}function bj(t){return new Ft({key:new Kt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=g_(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c?!1:(t.editor.commands.setMark(t.type,{href:c.href}),!0)}}})}const wj=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function AS(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(wj,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const xj=Ii.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){ES(t);return}ES(t.scheme,t.optionalSlashes)})},onDestroy(){pj()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!AS(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:t}){return AS(t.href,this.options.protocols)?["a",jt(this.options.HTMLAttributes,t),0]:["a",jt(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Zl({find:t=>{const e=[];if(t){const{validate:n}=this.options,r=g_(t).filter(i=>i.isLink&&n(i.value));r.length&&r.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(yj({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&t.push(vj({type:this.type})),this.options.linkOnPaste&&t.push(bj({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Cj=Mn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",jt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&o){const h=c.filter(p=>l.includes(p.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Sj=/^\s*>\s$/,kj=Mn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Lc({find:Sj,type:this.type})]}}),Ej=on.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;return((t==null?void 0:t.mode)||this.options.mode)==="textSize"?e.textBetween(0,e.content.size,void 0," ").length:e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;return e.textBetween(0,e.content.size," "," ").split(" ").filter(i=>i!=="").length}},addProseMirrorPlugins(){return[new Ft({key:new Kt("characterCount"),filterTransaction:(t,e)=>{const n=this.options.limit;if(!t.docChanged||n===0||n===null||n===void 0)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=n||r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,l=i-n,c=o-l,u=o;return t.deleteRange(c,u),!(this.storage.characters({node:t.doc})>n)}})]}}),Aj=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(?!channel\/)(?!@)(.+)?$/,Tj=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)\/(?!channel\/)(?!@)(.+)?$/g,m_=t=>t.match(Aj),TS=t=>t?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",_j=t=>{const{url:e,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:l,enableIFrameApi:c,endTime:u,interfaceLanguage:d,ivLoadPolicy:h,loop:p,modestBranding:m,nocookie:y,origin:b,playlist:x,progressBarColor:C,startAt:M}=t;if(!m_(e))return null;if(e.includes("/embed/"))return e;if(e.includes("youtu.be")){const U=e.split("/").pop();return U?`${TS(y)}${U}`:null}const A=/(?:v=|shorts\/)([-\w]+)/gm.exec(e);if(!A||!A[1])return null;let F=`${TS(y)}${A[1]}`;const R=[];return n===!1&&R.push("fs=0"),r&&R.push("autoplay=1"),i&&R.push(`cc_lang_pref=${i}`),s&&R.push("cc_load_policy=1"),o||R.push("controls=0"),l&&R.push("disablekb=1"),c&&R.push("enablejsapi=1"),u&&R.push(`end=${u}`),d&&R.push(`hl=${d}`),h&&R.push(`iv_load_policy=${h}`),p&&R.push("loop=1"),m&&R.push("modestbranding=1"),b&&R.push(`origin=${b}`),x&&R.push(`playlist=${x}`),M&&R.push(`start=${M}`),C&&R.push(`color=${C}`),R.length&&(F+=`?${R.join("&")}`),F},Mj=Mn.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:t=>({commands:e})=>m_(t.src)?e.insertContent({type:this.name,attrs:t}):!1}},addPasteRules(){return this.options.addPasteHandler?[Wz({find:Tj,type:this.type,getAttributes:t=>({src:t.input})})]:[]},renderHTML({HTMLAttributes:t}){const e=_j({url:t.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:t.start||0});return t.src=e,["div",{"data-youtube-video":""},["iframe",jt(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor},t)]]}});function Oj(t={}){return new Ft({view(e){return new Rj(e,t)}})}class Rj{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,c=e.nodeAfter;if(l||c){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let d=u.getBoundingClientRect(),h=l?d.bottom:d.top;l&&c&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:d.left,right:d.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=DE(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Lj=on.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Oj(this.options)]}}),Ij=Mn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",jt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):dz(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var c;if(l){const{$to:u}=o.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(Be.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection($e.create(o.doc,u.pos)):o.setSelection(Be.create(o.doc,u.pos));else{const h=(c=u.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();h&&(o.insert(d,h),o.setSelection(Be.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[HA({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}});var F0,V0;if(typeof WeakMap<"u"){let t=new WeakMap;F0=e=>t.get(e),V0=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;F0=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},V0=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Xt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let l=1;s<this.width&&this.map[e+l]==n;l++)s++;for(let l=1;o<this.height&&this.map[e+this.width*l]==n;l++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:l,top:c,bottom:u}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,c),right:Math.max(r,l),bottom:Math.max(s,u)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const l=(t+1)*this.width;for(;o<l&&this.map[o]<i;)o++;return o==l?s-1:this.map[o]}i=s}}static get(t){return F0(t)||V0(t,Nj(t))}};function Nj(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Dj(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let u=0,d=e*n;u<d;u++)r[u]=0;for(let u=0,d=0;u<n;u++){const h=t.child(u);d++;for(let y=0;;y++){for(;i<r.length&&r[i]!=0;)i++;if(y==h.childCount)break;const b=h.child(y),{colspan:x,rowspan:C,colwidth:M}=b.attrs;for(let L=0;L<C;L++){if(L+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:C-L});break}const A=i+L*e;for(let F=0;F<x;F++){r[A+F]==0?r[A+F]=d:(s||(s=[])).push({type:"collision",row:u,pos:d,n:x-F});const R=M&&M[F];if(R){const U=(A+F)%e*2,W=o[U];W==null||W!=R&&o[U+1]==1?(o[U]=R,o[U+1]=1):W==R&&o[U+1]++}}}i+=x,d+=b.nodeSize}const p=(u+1)*e;let m=0;for(;i<p;)r[i++]==0&&m++;m&&(s||(s=[])).push({type:"missing",row:u,n:m}),d++}const l=new Xt(e,n,r,s);let c=!1;for(let u=0;!c&&u<o.length;u+=2)o[u]!=null&&o[u+1]<n&&(c=!0);return c&&Pj(l,o,t),l}function Dj(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const l=t.child(o);for(let c=0;c<l.childCount;c++){const u=l.child(c);o+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const l=i.child(o);s+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Pj(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let l=null;const c=o.attrs;for(let u=0;u<c.colspan;u++){const d=(i+u)%t.width,h=e[d*2];h!=null&&(!c.colwidth||c.colwidth[u]!=h)&&((l||(l=Bj(c)))[u]=h)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function Bj(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function $n(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var $s=new Kt("selectingCells");function ya(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function $j(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function di(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function sp(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ya(e.$head)||Hj(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Hj(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function z0(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Fj(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function E1(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function y_(t,e,n){const r=t.node(-1),i=Xt.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function Qo(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function v_(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Vj(t,e,n){const r=$n(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Ot=class Qi extends We{constructor(e,n=e){const r=e.node(-1),i=Xt.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),l=e.node(0),c=i.cellsInRect(o).filter(d=>d!=n.pos-s);c.unshift(n.pos-s);const u=c.map(d=>{const h=r.nodeAt(d);if(!h)throw RangeError(`No cell with offset ${d} found`);const p=s+d+1;return new Ey(l.resolve(p),l.resolve(p+h.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(z0(r)&&z0(i)&&E1(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Qi.rowSelection(r,i):s&&this.isColSelection()?Qi.colSelection(r,i):new Qi(r,i)}return Be.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Xt.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let c=i.top;c<i.bottom;c++){const u=[];for(let d=c*n.width+i.left,h=i.left;h<i.right;h++,d++){const p=n.map[d];if(s[p])continue;s[p]=!0;const m=n.findCell(p);let y=e.nodeAt(p);if(!y)throw RangeError(`No cell with offset ${p} found`);const b=i.left-m.left,x=m.right-i.right;if(b>0||x>0){let C=y.attrs;if(b>0&&(C=Qo(C,0,b)),x>0&&(C=Qo(C,C.colspan-x,x)),m.left<i.left){if(y=y.type.createAndFill(C),!y)throw RangeError(`Could not create cell with attrs ${JSON.stringify(C)}`)}else y=y.type.create(C,y.content)}if(m.top<i.top||m.bottom>i.bottom){const C={...y.attrs,rowspan:Math.min(m.bottom,i.bottom)-Math.max(m.top,i.top)};m.top<i.top?y=y.type.createAndFill(C):y=y.type.create(C,y.content)}u.push(y)}o.push(e.child(c).copy(Y.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:o;return new le(Y.from(l),1,1)}replace(e,n=le.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:l,$to:c}=i[o],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(c.pos),o?le.empty:n)}const s=We.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new le(Y.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Xt.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Xt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),c=e.node(0);return o.top<=l.top?(o.top>0&&(e=c.resolve(s+i.map[o.left])),l.bottom<i.height&&(n=c.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(n=c.resolve(s+i.map[l.left])),o.bottom<i.height&&(e=c.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Qi(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Xt.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==n.width}eq(e){return e instanceof Qi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Xt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),c=e.node(0);return o.left<=l.left?(o.left>0&&(e=c.resolve(s+i.map[o.top*i.width])),l.right<i.width&&(n=c.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(n=c.resolve(s+i.map[l.top*i.width])),o.right<i.width&&(e=c.resolve(s+i.map[i.width*(o.top+1)-1]))),new Qi(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Qi(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Qi(e.resolve(n),e.resolve(r))}getBookmark(){return new zj(this.$anchorCell.pos,this.$headCell.pos)}};Ot.prototype.visible=!1;We.jsonID("cell",Ot);var zj=class b_{constructor(e,n){this.anchor=e,this.head=n}map(e){return new b_(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&E1(n,r)?new Ot(n,r):We.near(r,1)}};function Uj(t){if(!(t.selection instanceof Ot))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Pn.node(r,r+n.nodeSize,{class:"selectedCell"}))}),It.create(t.doc,e)}function Wj({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function jj({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Kj(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof $e&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Ot.create(i,r.from);else if(o=="row"){const l=i.resolve(r.from+1);s=Ot.rowSelection(l,l)}else if(!n){const l=Xt.get(r.node),c=r.from+1,u=c+l.map[l.width*l.height-1];s=Ot.create(i,c+1,u)}}else r instanceof Be&&Wj(r)?s=Be.create(i,r.from):r instanceof Be&&jj(r)&&(s=Be.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var qj=new Kt("fix-tables");function w_(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,l=0;o<s;o++){const c=e.child(o);for(let u=l,d=Math.min(i,o+3);u<d;u++)if(t.child(u)==c){l=u+1,n+=c.nodeSize;continue e}r(c,n),l<i&&t.child(l).sameMarkup(c)?w_(t.child(l),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function x_(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=Gj(t,i,s,n))};return e?e.doc!=t.doc&&w_(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Gj(t,e,n,r){const i=Xt.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let c=0;c<i.height;c++)s.push(0);for(let c=0;c<i.problems.length;c++){const u=i.problems[c];if(u.type=="collision"){const d=e.nodeAt(u.pos);if(!d)continue;const h=d.attrs;for(let p=0;p<h.rowspan;p++)s[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,Qo(h,h.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const d=e.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const d=e.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,colwidth:u.colwidth})}}let o,l;for(let c=0;c<s.length;c++)s[c]&&(o==null&&(o=c),l=c);for(let c=0,u=n+1;c<i.height;c++){const d=e.child(c),h=u+d.nodeSize,p=s[c];if(p>0){let m="cell";d.firstChild&&(m=d.firstChild.type.spec.tableRole);const y=[];for(let x=0;x<p;x++){const C=$n(t.schema)[m].createAndFill();C&&y.push(C)}const b=(c==0||o==c-1)&&l==c?u+1:h-1;r.insert(r.mapping.map(b),y)}u=h}return r.setMeta(qj,{fixTables:!0})}function Hi(t){const e=t.selection,n=sp(t),r=n.node(-1),i=n.start(-1),s=Xt.get(r);return{...e instanceof Ot?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function C_(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;Vj(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const l=o*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){const c=e.map[l],u=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(n+c),null,v_(u.attrs,i-e.colCount(c))),o+=u.attrs.rowspan-1}else{const c=s==null?$n(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,u=e.positionAt(o,i,r);t.insert(t.mapping.map(n+u),c.createAndFill())}}return t}function Jj(t,e){if(!di(t))return!1;if(e){const n=Hi(t);e(C_(t.tr,n,n.left))}return!0}function Yj(t,e){if(!di(t))return!1;if(e){const n=Hi(t);e(C_(t.tr,n,n.right))}return!0}function Xj(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const l=o*e.width+i,c=e.map[l],u=n.nodeAt(c),d=u.attrs;if(i>0&&e.map[l-1]==c||i<e.width-1&&e.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(r+c),null,Qo(d,i-e.colCount(c)));else{const h=t.mapping.slice(s).map(r+c);t.delete(h,h+u.nodeSize)}o+=d.rowspan}}function Zj(t,e){if(!di(t))return!1;if(e){const n=Hi(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;Xj(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Xt.get(s)}e(r)}return!0}function Qj(t,e,n){var r;const i=$n(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function S_(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let u=0;u<i;u++)o+=r.child(u).nodeSize;const l=[];let c=i>0?-1:0;Qj(e,r,i+c)&&(c=i==0||i==e.height?null:0);for(let u=0,d=e.width*i;u<e.width;u++,d++)if(i>0&&i<e.height&&e.map[d]==e.map[d-e.width]){const h=e.map[d],p=r.nodeAt(h).attrs;t.setNodeMarkup(n+h,null,{...p,rowspan:p.rowspan+1}),u+=p.colspan-1}else{const h=c==null?$n(r.type.schema).cell:(s=r.nodeAt(e.map[d+c*e.width]))==null?void 0:s.type,p=h==null?void 0:h.createAndFill();p&&l.push(p)}return t.insert(o,$n(r.type.schema).row.create(null,l)),t}function eK(t,e){if(!di(t))return!1;if(e){const n=Hi(t);e(S_(t.tr,n,n.top))}return!0}function tK(t,e){if(!di(t))return!1;if(e){const n=Hi(t);e(S_(t.tr,n,n.bottom))}return!0}function nK(t,{map:e,table:n,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;const o=s+n.child(i).nodeSize,l=t.mapping.maps.length;t.delete(s+r,o+r);const c=new Set;for(let u=0,d=i*e.width;u<e.width;u++,d++){const h=e.map[d];if(!c.has(h)){if(c.add(h),i>0&&h==e.map[d-e.width]){const p=n.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(l).map(h+r),null,{...p,rowspan:p.rowspan-1}),u+=p.colspan-1}else if(i<e.height&&h==e.map[d+e.width]){const p=n.nodeAt(h),m=p.attrs,y=p.type.create({...m,rowspan:p.attrs.rowspan-1},p.content),b=e.positionAt(i+1,u,n);t.insert(t.mapping.slice(l).map(r+b),y),u+=m.colspan-1}}}}function rK(t,e){if(!di(t))return!1;if(e){const n=Hi(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;nK(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Xt.get(n.table)}e(r)}return!0}function _S(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function iK({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,l=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[l]==n[l+1])return!0;s+=t,l+=t}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function MS(t,e){const n=t.selection;if(!(n instanceof Ot)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Hi(t),{map:i}=r;if(iK(i,r))return!1;if(e){const s=t.tr,o={};let l=Y.empty,c,u;for(let d=r.top;d<r.bottom;d++)for(let h=r.left;h<r.right;h++){const p=i.map[d*i.width+h],m=r.table.nodeAt(p);if(!(o[p]||!m))if(o[p]=!0,c==null)c=p,u=m;else{_S(m)||(l=l.append(m.content));const y=s.mapping.map(p+r.tableStart);s.delete(y,y+m.nodeSize)}}if(c==null||u==null)return!0;if(s.setNodeMarkup(c+r.tableStart,null,{...v_(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const d=c+1+u.content.size,h=_S(u)?c+1:d;s.replaceWith(h+r.tableStart,d+r.tableStart,l)}s.setSelection(new Ot(s.doc.resolve(c+r.tableStart))),e(s)}return!0}function OS(t,e){const n=$n(t.schema);return sK(({node:r})=>n[r.type.spec.tableRole])(t,e)}function sK(t){return(e,n)=>{var r;const i=e.selection;let s,o;if(i instanceof Ot){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=$j(i.$from),!s)return!1;o=(r=ya(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let l=s.attrs;const c=[],u=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});const d=Hi(e),h=e.tr;for(let m=0;m<d.right-d.left;m++)c.push(u?{...l,colwidth:u&&u[m]?[u[m]]:null}:l);let p;for(let m=d.top;m<d.bottom;m++){let y=d.map.positionAt(m,d.left,d.table);m==d.top&&(y+=s.nodeSize);for(let b=d.left,x=0;b<d.right;b++,x++)b==d.left&&m==d.top||h.insert(p=h.mapping.map(y+d.tableStart,1),t({node:s,row:m,col:b}).createAndFill(c[x]))}h.setNodeMarkup(o,t({node:s,row:d.top,col:d.left}),c[0]),i instanceof Ot&&h.setSelection(new Ot(h.doc.resolve(i.$anchorCell.pos),p?h.doc.resolve(p):void 0)),n(h)}return!0}}function oK(t,e){return function(n,r){if(!di(n))return!1;const i=sp(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof Ot?n.selection.forEachCell((o,l)=>{o.attrs[t]!==e&&s.setNodeMarkup(l,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function lK(t){return function(e,n){if(!di(e))return!1;if(n){const r=$n(e.schema),i=Hi(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=o.map(c=>i.table.nodeAt(c));for(let c=0;c<o.length;c++)l[c].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[c],r.cell,l[c].attrs);if(s.steps.length==0)for(let c=0;c<o.length;c++)s.setNodeMarkup(i.tableStart+o[c],r.header_cell,l[c].attrs);n(s)}return!0}}function RS(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Gc(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?lK(t):function(n,r){if(!di(n))return!1;if(r){const i=$n(n.schema),s=Hi(n),o=n.tr,l=RS("row",s,i),c=RS("column",s,i),d=(t==="column"?l:t==="row"?c:!1)?1:0,h=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,p=t=="column"?c?i.cell:i.header_cell:t=="row"?l?i.cell:i.header_cell:i.cell;s.map.cellsInRect(h).forEach(m=>{const y=m+s.tableStart,b=o.doc.nodeAt(y);b&&o.setNodeMarkup(y,p,b.attrs)}),r(o)}return!0}}Gc("row",{useDeprecatedLogic:!0});Gc("column",{useDeprecatedLogic:!0});var aK=Gc("cell",{useDeprecatedLogic:!0});function cK(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function LS(t){return function(e,n){if(!di(e))return!1;const r=cK(sp(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Be.between(i,Fj(i))).scrollIntoView())}return!0}}function uK(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Tf(t,e){const n=t.selection;if(!(n instanceof Ot))return!1;if(e){const r=t.tr,i=$n(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new le(i,0,0))}),r.docChanged&&e(r)}return!0}function fK(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,l=[];if(s=="row")for(let c=0;c<e.childCount;c++){let u=e.child(c).content;const d=c?0:Math.max(0,n-1),h=c<e.childCount-1?0:Math.max(0,r-1);(d||h)&&(u=U0($n(o).row,new le(u,d,h)).content),l.push(u)}else if(s=="cell"||s=="header_cell")l.push(n||r?U0($n(o).row,new le(e,n,r)).content:e);else return null;return dK(o,l)}function dK(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:l,colspan:c}=s.child(o).attrs;for(let u=i;u<i+l;u++)n[u]=(n[u]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Y.empty),n[i]<r){const s=$n(t).cell.createAndFill(),o=[];for(let l=n[i];l<r;l++)o.push(s);e[i]=e[i].append(Y.from(o))}return{height:e.length,width:r,rows:e}}function U0(t,e){const n=t.createAndFill();return new ky(n).replace(0,n.content.size,e).doc}function hK({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let l=0;l<n.length;l++){const c=n[l],u=[];for(let d=s[l]||0,h=0;d<r;h++){let p=c.child(h%c.childCount);d+p.attrs.colspan>r&&(p=p.type.createChecked(Qo(p.attrs,p.attrs.colspan,d+p.attrs.colspan-r),p.content)),u.push(p),d+=p.attrs.colspan;for(let m=1;m<p.attrs.rowspan;m++)s[l+m]=(s[l+m]||0)+p.attrs.colspan}o.push(Y.from(u))}n=o,t=r}if(e!=i){const s=[];for(let o=0,l=0;o<i;o++,l++){const c=[],u=n[l%e];for(let d=0;d<u.childCount;d++){let h=u.child(d);o+h.attrs.rowspan>i&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,i-h.attrs.rowspan)},h.content)),c.push(h)}s.push(Y.from(c))}n=s,e=i}return{width:t,height:e,rows:n}}function pK(t,e,n,r,i,s,o){const l=t.doc.type.schema,c=$n(l);let u,d;if(i>e.width)for(let h=0,p=0;h<e.height;h++){const m=n.child(h);p+=m.nodeSize;const y=[];let b;m.lastChild==null||m.lastChild.type==c.cell?b=u||(u=c.cell.createAndFill()):b=d||(d=c.header_cell.createAndFill());for(let x=e.width;x<i;x++)y.push(b);t.insert(t.mapping.slice(o).map(p-1+r),y)}if(s>e.height){const h=[];for(let y=0,b=(e.height-1)*e.width;y<Math.max(e.width,i);y++){const x=y>=e.width?!1:n.nodeAt(e.map[b+y]).type==c.header_cell;h.push(x?d||(d=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const p=c.row.create(null,Y.from(h)),m=[];for(let y=e.height;y<s;y++)m.push(p);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),m)}return!!(u||d)}function IS(t,e,n,r,i,s,o,l){if(o==0||o==e.height)return!1;let c=!1;for(let u=i;u<s;u++){const d=o*e.width+u,h=e.map[d];if(e.map[d-e.width]==h){c=!0;const p=n.nodeAt(h),{top:m,left:y}=e.findCell(h);t.setNodeMarkup(t.mapping.slice(l).map(h+r),null,{...p.attrs,rowspan:o-m}),t.insert(t.mapping.slice(l).map(e.positionAt(o,y,n)),p.type.createAndFill({...p.attrs,rowspan:m+p.attrs.rowspan-o})),u+=p.attrs.colspan-1}}return c}function NS(t,e,n,r,i,s,o,l){if(o==0||o==e.width)return!1;let c=!1;for(let u=i;u<s;u++){const d=u*e.width+o,h=e.map[d];if(e.map[d-1]==h){c=!0;const p=n.nodeAt(h),m=e.colCount(h),y=t.mapping.slice(l).map(h+r);t.setNodeMarkup(y,null,Qo(p.attrs,o-m,p.attrs.colspan-(o-m))),t.insert(y+p.nodeSize,p.type.createAndFill(Qo(p.attrs,0,o-m))),u+=p.attrs.rowspan-1}}return c}function DS(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=Xt.get(s);const{top:l,left:c}=r,u=c+i.width,d=l+i.height,h=t.tr;let p=0;function m(){if(s=n?h.doc.nodeAt(n-1):h.doc,!s)throw new Error("No table found");o=Xt.get(s),p=h.mapping.maps.length}pK(h,o,s,n,u,d,p)&&m(),IS(h,o,s,n,c,u,l,p)&&m(),IS(h,o,s,n,c,u,d,p)&&m(),NS(h,o,s,n,l,d,c,p)&&m(),NS(h,o,s,n,l,d,u,p)&&m();for(let y=l;y<d;y++){const b=o.positionAt(y,c,s),x=o.positionAt(y,u,s);h.replace(h.mapping.slice(p).map(b+n),h.mapping.slice(p).map(x+n),new le(i.rows[y-l],0,0))}m(),h.setSelection(new Ot(h.doc.resolve(n+o.positionAt(l,c,s)),h.doc.resolve(n+o.positionAt(d-1,u-1,s)))),e(h)}var gK=Dy({ArrowLeft:_f("horiz",-1),ArrowRight:_f("horiz",1),ArrowUp:_f("vert",-1),ArrowDown:_f("vert",1),"Shift-ArrowLeft":Mf("horiz",-1),"Shift-ArrowRight":Mf("horiz",1),"Shift-ArrowUp":Mf("vert",-1),"Shift-ArrowDown":Mf("vert",1),Backspace:Tf,"Mod-Backspace":Tf,Delete:Tf,"Mod-Delete":Tf});function Jf(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function _f(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof Ot)return Jf(n,r,We.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=k_(i,t,e);if(o==null)return!1;if(t=="horiz")return Jf(n,r,We.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(o),c=y_(l,t,e);let u;return c?u=We.near(c,1):e<0?u=We.near(n.doc.resolve(l.before(-1)),-1):u=We.near(n.doc.resolve(l.after(-1)),1),Jf(n,r,u)}}}function Mf(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof Ot)o=s;else{const c=k_(i,t,e);if(c==null)return!1;o=new Ot(n.doc.resolve(c))}const l=y_(o.$headCell,t,e);return l?Jf(n,r,new Ot(o.$anchorCell,l)):!1}}function mK(t,e){const n=t.state.doc,r=ya(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ot(r))),!0):!1}function yK(t,e,n){if(!di(t.state))return!1;let r=fK(n);const i=t.state.selection;if(i instanceof Ot){r||(r={width:1,height:1,rows:[Y.from(U0($n(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),l=Xt.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=hK(r,l.right-l.left,l.bottom-l.top),DS(t.state,t.dispatch,o,l,r),!0}else if(r){const s=sp(t.state),o=s.start(-1);return DS(t.state,t.dispatch,o,Xt.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function vK(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=PS(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof Ot)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=ya(t.state.selection.$anchor))!=null&&((n=ym(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(c,u){let d=ym(t,u);const h=$s.getState(t.state)==null;if(!d||!E1(c,d))if(h)d=c;else return;const p=new Ot(c,d);if(h||!t.state.selection.eq(p)){const m=t.state.tr.setSelection(p);h&&m.setMeta($s,c.pos),t.dispatch(m)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",l),$s.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta($s,-1))}function l(c){const u=c,d=$s.getState(t.state);let h;if(d!=null)h=t.state.doc.resolve(d);else if(PS(t,u.target)!=r&&(h=ym(t,e),!h))return o();h&&s(h,u)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",l)}function k_(t,e,n){if(!(t.state.selection instanceof Be))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const l=r.before(i),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?l:null}}return null}function PS(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function ym(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ya(t.state.doc.resolve(n.pos)):null}var bK=class{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),W0(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,W0(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function W0(t,e,n,r,i,s){var o;let l=0,c=!0,u=e.firstChild;const d=t.firstChild;if(d){for(let h=0,p=0;h<d.childCount;h++){const{colspan:m,colwidth:y}=d.child(h).attrs;for(let b=0;b<m;b++,p++){const x=i==p?s:y&&y[b],C=x?x+"px":"";l+=x||r,x||(c=!1),u?(u.style.width!=C&&(u.style.width=C),u=u.nextSibling):e.appendChild(document.createElement("col")).style.width=C}}for(;u;){const h=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=h}c?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var Hr=new Kt("tableColumnResizing");function wK({handleWidth:t=5,cellMinWidth:e=25,View:n=bK,lastColumnResizable:r=!0}={}){const i=new Ft({key:Hr,state:{init(s,o){var l,c;const u=(c=(l=i.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,d=$n(o.schema).table.name;return n&&u&&(u[d]=(h,p)=>new n(h,e,p)),new xK(-1,!1)},apply(s,o){return o.apply(s)}},props:{attributes:s=>{const o=Hr.getState(s);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,o)=>{CK(s,o,t,e,r)},mouseleave:s=>{SK(s)},mousedown:(s,o)=>{kK(s,o,e)}},decorations:s=>{const o=Hr.getState(s);if(o&&o.activeHandle>-1)return OK(s,o.activeHandle)},nodeViews:{}}});return i}var xK=class Yf{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Hr);if(r&&r.setHandle!=null)return new Yf(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Yf(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return z0(e.doc.resolve(i))||(i=-1),new Yf(i,n.dragging)}return n}};function CK(t,e,n,r,i){const s=Hr.getState(t.state);if(s&&!s.dragging){const o=AK(e.target);let l=-1;if(o){const{left:c,right:u}=o.getBoundingClientRect();e.clientX-c<=n?l=BS(t,e,"left",n):u-e.clientX<=n&&(l=BS(t,e,"right",n))}if(l!=s.activeHandle){if(!i&&l!==-1){const c=t.state.doc.resolve(l),u=c.node(-1),d=Xt.get(u),h=c.start(-1);if(d.colCount(c.pos-h)+c.nodeAfter.attrs.colspan-1==d.width-1)return}E_(t,l)}}}function SK(t){const e=Hr.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&E_(t,-1)}function kK(t,e,n){var r;const i=(r=t.dom.ownerDocument.defaultView)!=null?r:window,s=Hr.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const o=t.state.doc.nodeAt(s.activeHandle),l=EK(t,s.activeHandle,o.attrs);t.dispatch(t.state.tr.setMeta(Hr,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",u);const h=Hr.getState(t.state);h!=null&&h.dragging&&(TK(t,h.activeHandle,$S(h.dragging,d,n)),t.dispatch(t.state.tr.setMeta(Hr,{setDragging:null})))}function u(d){if(!d.which)return c(d);const h=Hr.getState(t.state);if(h&&h.dragging){const p=$S(h.dragging,d,n);_K(t,h.activeHandle,p,n)}}return i.addEventListener("mouseup",c),i.addEventListener("mousemove",u),e.preventDefault(),!0}function EK(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let l=s.node.childNodes[s.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(l-=r[u],c--);return l/c}function AK(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function BS(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,l=ya(t.state.doc.resolve(o));if(!l)return-1;if(n=="right")return l.pos;const c=Xt.get(l.node(-1)),u=l.start(-1),d=c.map.indexOf(l.pos-u);return d%c.width==0?-1:u+c.map[d-1]}function $S(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function E_(t,e){t.dispatch(t.state.tr.setMeta(Hr,{setHandle:e}))}function TK(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=Xt.get(i),o=r.start(-1),l=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let u=0;u<s.height;u++){const d=u*s.width+l;if(u&&s.map[d]==s.map[d-s.width])continue;const h=s.map[d],p=i.nodeAt(h).attrs,m=p.colspan==1?0:l-s.colCount(h);if(p.colwidth&&p.colwidth[m]==n)continue;const y=p.colwidth?p.colwidth.slice():MK(p.colspan);y[m]=n,c.setNodeMarkup(o+h,null,{...p,colwidth:y})}c.docChanged&&t.dispatch(c)}function _K(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),l=Xt.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let c=t.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&W0(s,c.firstChild,c,r,l,n)}function MK(t){return Array(t).fill(0)}function OK(t,e){const n=[],r=t.doc.resolve(e),i=r.node(-1);if(!i)return It.empty;const s=Xt.get(i),o=r.start(-1),l=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=l+c*s.width;if((l==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){const d=s.map[u],h=o+d+i.nodeAt(d).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(Pn.widget(h,p))}}return It.create(t.doc,n)}function RK({allowTableNodeSelection:t=!1}={}){return new Ft({key:$s,state:{init(){return null},apply(e,n){const r=e.getMeta($s);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:Uj,handleDOMEvents:{mousedown:vK},createSelectionBetween(e){return $s.getState(e.state)!=null?e.state.selection:null},handleTripleClick:mK,handleKeyDown:gK,handlePaste:yK},appendTransaction(e,n,r){return Kj(r,x_(r,n),t)}})}function HS(t,e,n,r,i,s){let o=0,l=!0,c=e.firstChild;const u=t.firstChild;for(let d=0,h=0;d<u.childCount;d+=1){const{colspan:p,colwidth:m}=u.child(d).attrs;for(let y=0;y<p;y+=1,h+=1){const b=i===h?s:m&&m[y],x=b?`${b}px`:"";o+=b||r,b||(l=!1),c?(c.style.width!==x&&(c.style.width=x),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=x}}for(;c;){const d=c.nextSibling;c.parentNode.removeChild(c),c=d}l?(n.style.width=`${o}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${o}px`)}class LK{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),HS(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,HS(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function IK(t,e,n,r){let i=0,s=!0;const o=[],l=t.firstChild;if(!l)return{};for(let h=0,p=0;h<l.childCount;h+=1){const{colspan:m,colwidth:y}=l.child(h).attrs;for(let b=0;b<m;b+=1,p+=1){const x=n===p?r:y&&y[b],C=x?`${x}px`:"";i+=x||e,x||(s=!1),o.push(["col",C?{style:`width: ${C}`}:{}])}}const c=s?`${i}px`:"",u=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:c,tableMinWidth:u}}function FS(t,e){return t.createAndFill()}function NK(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function DK(t,e,n,r,i){const s=NK(t),o=[],l=[];for(let u=0;u<n;u+=1){const d=FS(s.cell);if(d&&l.push(d),r){const h=FS(s.header_cell);h&&o.push(h)}}const c=[];for(let u=0;u<e;u+=1)c.push(s.row.createChecked(null,r&&u===0?o:l));return s.table.createChecked(null,c)}function PK(t){return t instanceof Ot}const Of=({editor:t})=>{const{selection:e}=t.state;if(!PK(e))return!1;let n=0;const r=BA(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},BK=Mn.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:LK,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=IK(t,this.options.cellMinWidth);return["table",jt(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=DK(s.schema,t,e,n);if(i){const l=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(Be.near(r.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>Jj(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>Yj(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Zj(t,e),addRowBefore:()=>({state:t,dispatch:e})=>eK(t,e),addRowAfter:()=>({state:t,dispatch:e})=>tK(t,e),deleteRow:()=>({state:t,dispatch:e})=>rK(t,e),deleteTable:()=>({state:t,dispatch:e})=>uK(t,e),mergeCells:()=>({state:t,dispatch:e})=>MS(t,e),splitCell:()=>({state:t,dispatch:e})=>OS(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Gc("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Gc("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>aK(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>MS(t,e)?!0:OS(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>oK(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>LS(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>LS(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&x_(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Ot.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Of,"Mod-Backspace":Of,Delete:Of,"Mod-Delete":Of}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[wK({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],RK({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:nt(Ae(t,"tableRole",e))}}}),$K=Mn.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",jt(this.options.HTMLAttributes,t),0]}}),HK=Mn.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",jt(this.options.HTMLAttributes,t),0]}}),FK=Mn.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",jt(this.options.HTMLAttributes,t),0]}});class Yt extends We{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Yt.valid(r)?new Yt(r):We.near(r)}content(){return le.empty}eq(e){return e instanceof Yt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Yt(e.resolve(n.pos))}getBookmark(){return new A1(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!VK(e)||!zK(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Yt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let c=e.doc.resolve(i);if(Yt.valid(c))return c}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!$e.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Yt.valid(l))return l}return null}}}Yt.prototype.visible=!1;Yt.findFrom=Yt.findGapCursorFrom;We.jsonID("gapcursor",Yt);class A1{constructor(e){this.pos=e}map(e){return new A1(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Yt.valid(n)?new Yt(n):We.near(n)}}function VK(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function zK(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function UK(){return new Ft({props:{decorations:qK,createSelectionBetween(t,e,n){return e.pos==n.pos&&Yt.valid(n)?new Yt(n):null},handleClick:jK,handleKeyDown:WK,handleDOMEvents:{beforeinput:KK}}})}const WK=Dy({ArrowLeft:Rf("horiz",-1),ArrowRight:Rf("horiz",1),ArrowUp:Rf("vert",-1),ArrowDown:Rf("vert",1)});function Rf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof Be){if(!s.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Yt.findGapCursorFrom(l,e,c);return u?(i&&i(r.tr.setSelection(new Yt(u))),!0):!1}}function jK(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Yt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&$e.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Yt(r))),!0)}function KK(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Yt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Y.empty;for(let o=r.length-1;o>=0;o--)i=Y.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new le(i,0,0));return s.setSelection(Be.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function qK(t){if(!(t.selection instanceof Yt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",It.create(t.doc,[Pn.widget(t.selection.head,e,{key:"gapcursor"})])}const GK=on.create({name:"gapCursor",addProseMirrorPlugins(){return[UK()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=nt(Ae(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),JK=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,YK=Mn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",jt(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[HA({find:JK,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),XK=Mn.create({name:"text",group:"inline"}),ZK=on.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ft({key:new Kt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,u=!o.isLeaf&&Uh(o);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=Pn.node(l,l+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),It.create(t,i)}}})]}}),QK=on.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),e9=Mn.create({name:"tiptapButton",group:"inline",inline:!0,atom:!0,renderHTML({HTMLAttributes:t}){return["button",{...t,class:"tiptap-button"},"Click me"]},addAttributes(){return{class:{default:"tiptap-button"}}},parseHTML(){return[{tag:"button.tiptap-button"}]}});/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VS={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=(t,e,n,r)=>({color:i="currentColor",size:s=24,stroke:o=2,title:l,class:c,...u},{attrs:d,slots:h})=>{let p=[...r.map(m=>$t(...m)),...h.default?[h.default()]:[]];return l&&(p=[$t("title",l),...p]),$t("svg",{...VS[t],width:s,height:s,...d,class:["tabler-icon",`tabler-icon-${e}`],...t==="filled"?{fill:i}:{"stroke-width":o??VS[t]["stroke-width"],stroke:i},...u},p)};/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t9=an("outline","align-center","IconAlignCenter",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M8 12l8 0",key:"svg-1"}],["path",{d:"M6 18l12 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n9=an("outline","align-left","IconAlignLeft",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l10 0",key:"svg-1"}],["path",{d:"M4 18l14 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r9=an("outline","align-right","IconAlignRight",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M10 12l10 0",key:"svg-1"}],["path",{d:"M6 18l14 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i9=an("outline","arrow-back-up","IconArrowBackUp",[["path",{d:"M9 14l-4 -4l4 -4",key:"svg-0"}],["path",{d:"M5 10h11a4 4 0 1 1 0 8h-1",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s9=an("outline","arrow-forward-up","IconArrowForwardUp",[["path",{d:"M15 14l4 -4l-4 -4",key:"svg-0"}],["path",{d:"M19 10h-11a4 4 0 1 0 0 8h1",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o9=an("outline","bold","IconBold",[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l9=an("outline","h-1","IconH1",[["path",{d:"M19 18v-8l-2 2",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a9=an("outline","h-2","IconH2",[["path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var c9=an("outline","h-3","IconH3",[["path",{d:"M19 14a2 2 0 1 0 -2 -2",key:"svg-0"}],["path",{d:"M17 16a2 2 0 1 0 2 -2",key:"svg-1"}],["path",{d:"M4 6v12",key:"svg-2"}],["path",{d:"M12 6v12",key:"svg-3"}],["path",{d:"M11 18h2",key:"svg-4"}],["path",{d:"M3 18h2",key:"svg-5"}],["path",{d:"M4 12h8",key:"svg-6"}],["path",{d:"M3 6h2",key:"svg-7"}],["path",{d:"M11 6h2",key:"svg-8"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u9=an("outline","h-4","IconH4",[["path",{d:"M20 18v-8l-4 6h5",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f9=an("outline","italic","IconItalic",[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d9=an("outline","link","IconLink",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h9=an("outline","list-details","IconListDetails",[["path",{d:"M13 5h8",key:"svg-0"}],["path",{d:"M13 9h5",key:"svg-1"}],["path",{d:"M13 15h8",key:"svg-2"}],["path",{d:"M13 19h5",key:"svg-3"}],["path",{d:"M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-5"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p9=an("outline","list-numbers","IconListNumbers",[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g9=an("outline","minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m9=an("outline","movie","IconMovie",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 4l0 16",key:"svg-1"}],["path",{d:"M16 4l0 16",key:"svg-2"}],["path",{d:"M4 8l4 0",key:"svg-3"}],["path",{d:"M4 16l4 0",key:"svg-4"}],["path",{d:"M4 12l16 0",key:"svg-5"}],["path",{d:"M16 8l4 0",key:"svg-6"}],["path",{d:"M16 16l4 0",key:"svg-7"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y9=an("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v9=an("outline","strikethrough","IconStrikethrough",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b9=an("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-vue v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w9=an("outline","underline","IconUnderline",[["path",{d:"M7 5v5a5 5 0 0 0 10 0v-5",key:"svg-0"}],["path",{d:"M5 19h14",key:"svg-1"}]]);const x9={},C9={class:"my-1.5 inline-flex flex-row flex-wrap items-center space-x-1 px-2"};function S9(t,e){return Je(),sn("div",C9,[Bi(t.$slots,"default")])}const sl=$i(x9,[["render",S9]]),k9=["aria-label"],Ct=bt({__name:"TiptapToolbarButton",props:{label:{},isActive:{type:Boolean}},setup(t){return(e,n)=>(Je(),sn("button",{"aria-label":e.label,class:Oi(["inline-flex h-8 w-8 shrink-0 flex-row items-center justify-center rounded-md disabled:bg-transparent disabled:text-gray-300 transition ease-in",e.isActive?"bg-[#d9dbde] text-gray-800 hover:bg-opacity-80":"text-gray-600 hover:bg-gray-200"]),type:"button"},[Bi(e.$slots,"default")],10,k9))}}),E9={__name:"HistoryTool",props:{editor:{type:Object,default:()=>{}}},setup(t){return(e,n)=>t.editor?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{disabled:!t.editor.can().chain().focus().undo().run(),onClick:n[0]||(n[0]=r=>t.editor.chain().focus().undo().run()),label:"Undo"},{default:ge(()=>[J(at(i9),{class:"h-5 w-5"})]),_:1},8,["disabled"]),J(Ct,{disabled:!t.editor.can().chain().focus().redo().run(),onClick:n[1]||(n[1]=r=>t.editor.chain().focus().redo().run()),label:"Redo"},{default:ge(()=>[J(at(s9),{class:"h-5 w-5"})]),_:1},8,["disabled"])]),_:1})):Wn("",!0)}},A9={__name:"HeadingTool",props:{editor:{type:Object,default:()=>{}}},setup(t){return(e,n)=>t.editor?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{isActive:t.editor.isActive("heading",{level:1}),onClick:n[0]||(n[0]=r=>t.editor.chain().focus().toggleHeading({level:1}).run()),label:"Heading 1"},{default:ge(()=>[J(at(l9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("heading",{level:2}),onClick:n[1]||(n[1]=r=>t.editor.chain().focus().toggleHeading({level:2}).run()),label:"Heading 2"},{default:ge(()=>[J(at(a9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("heading",{level:3}),onClick:n[2]||(n[2]=r=>t.editor.chain().focus().toggleHeading({level:3}).run()),label:"Heading 3"},{default:ge(()=>[J(at(c9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("heading",{level:4}),onClick:n[3]||(n[3]=r=>t.editor.chain().focus().toggleHeading({level:4}).run()),label:"Heading 4"},{default:ge(()=>[J(at(u9),{class:"h-5 w-5"})]),_:1},8,["isActive"])]),_:1})):Wn("",!0)}},T9={__name:"TextStyleTool",props:{editor:{type:Object,default:()=>{}}},setup(t){return(e,n)=>t.editor?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{isActive:t.editor.isActive("bold"),onClick:n[0]||(n[0]=r=>{var i;return(i=t.editor)==null?void 0:i.chain().focus().toggleBold().run()}),label:"Bold"},{default:ge(()=>[J(at(o9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("italic"),onClick:n[1]||(n[1]=r=>{var i;return(i=t.editor)==null?void 0:i.chain().focus().toggleItalic().run()}),label:"Italic"},{default:ge(()=>[J(at(f9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("underline"),onClick:n[2]||(n[2]=r=>t.editor.chain().focus().toggleUnderline().run()),label:"Underline"},{default:ge(()=>[J(at(w9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("strike"),onClick:n[3]||(n[3]=r=>t.editor.chain().focus().toggleStrike().run()),label:"Strikethrough"},{default:ge(()=>[J(at(v9),{class:"h-5 w-5"})]),_:1},8,["isActive"])]),_:1})):Wn("",!0)}},_9={__name:"TextAlignTool",props:{editor:{type:Object,default:()=>{}}},setup(t){return(e,n)=>t.editor?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{isActive:t.editor.isActive({textAlign:"left"}),onClick:n[0]||(n[0]=r=>t.editor.chain().focus().setTextAlign("left").run()),label:"AlignLeft"},{default:ge(()=>[J(at(n9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive({textAlign:"center"}),onClick:n[1]||(n[1]=r=>t.editor.chain().focus().setTextAlign("center").run()),label:"AlignCenter"},{default:ge(()=>[J(at(t9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive({textAlign:"right"}),onClick:n[2]||(n[2]=r=>t.editor.chain().focus().setTextAlign("right").run()),label:"AlignRight"},{default:ge(()=>[J(at(r9),{class:"h-5 w-5"})]),_:1},8,["isActive"])]),_:1})):Wn("",!0)}},M9={__name:"ListTool",props:{editor:{type:Object,default:()=>{}}},setup(t){return(e,n)=>t.editor?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{isActive:t.editor.isActive("bulletList"),onClick:n[0]||(n[0]=r=>{var i;return(i=t.editor)==null?void 0:i.chain().focus().toggleBulletList().run()}),label:"BulletList"},{default:ge(()=>[J(at(h9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{isActive:t.editor.isActive("orderedList"),onClick:n[1]||(n[1]=r=>t.editor.chain().focus().toggleOrderedList().run()),label:"OrderedList"},{default:ge(()=>[J(at(p9),{class:"h-5 w-5"})]),_:1},8,["isActive"])]),_:1})):Wn("",!0)}};function O9(t,e,n){let r=Ie(n==null?void 0:n.value),i=Ne(()=>t.value!==void 0);return[Ne(()=>i.value?t.value:r.value),function(s){return i.value||(r.value=s),e==null?void 0:e(s)}]}function T1(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function au(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){e.requestAnimationFrame(()=>{e.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return T1(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=au();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}var zS;let R9=Symbol("headlessui.useid"),L9=0;const va=(zS=void 0)!=null?zS:function(){return Wt(R9,()=>`${++L9}`)()};function Ht(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function Pi(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Pi),r}var I9=Object.defineProperty,N9=(t,e,n)=>e in t?I9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,US=(t,e,n)=>(N9(t,typeof e!="symbol"?e+"":e,n),n);let D9=class{constructor(){US(this,"current",this.detect()),US(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},cu=new D9;function ba(t){if(cu.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=Ht(t);if(e)return e.ownerDocument}return document}let j0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Hs=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Hs||{}),A_=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(A_||{}),P9=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(P9||{});function B9(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(j0)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var T_=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(T_||{});function $9(t,e=0){var n;return t===((n=ba(t))==null?void 0:n.body)?!1:Pi(e,{0(){return t.matches(j0)},1(){let r=t;for(;r!==null;){if(r.matches(j0))return!0;r=r.parentElement}return!1}})}var H9=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(H9||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function jo(t){t==null||t.focus({preventScroll:!0})}let F9=["textarea","input"].join(",");function V9(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,F9))!=null?n:!1}function z9(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Xf(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){var s;let o=(s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?s:document,l=Array.isArray(t)?n?z9(t):t:B9(t);i.length>0&&l.length>1&&(l=l.filter(y=>!i.includes(y))),r=r??o.activeElement;let c=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,l.indexOf(r))-1;if(e&4)return Math.max(0,l.indexOf(r))+1;if(e&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=e&32?{preventScroll:!0}:{},h=0,p=l.length,m;do{if(h>=p||h+p<=0)return 0;let y=u+h;if(e&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}m=l[y],m==null||m.focus(d),h+=c}while(m!==o.activeElement);return e&6&&V9(m)&&m.select(),2}function __(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function U9(){return/Android/gi.test(window.navigator.userAgent)}function W9(){return __()||U9()}function Lf(t,e,n){cu.isServer||wr(r=>{document.addEventListener(t,e,n),r(()=>document.removeEventListener(t,e,n))})}function M_(t,e,n){cu.isServer||wr(r=>{window.addEventListener(t,e,n),r(()=>window.removeEventListener(t,e,n))})}function j9(t,e,n=Ne(()=>!0)){function r(s,o){if(!n.value||s.defaultPrevented)return;let l=o(s);if(l===null||!l.getRootNode().contains(l))return;let c=function u(d){return typeof d=="function"?u(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t);for(let u of c){if(u===null)continue;let d=u instanceof HTMLElement?u:Ht(u);if(d!=null&&d.contains(l)||s.composed&&s.composedPath().includes(d))return}return!$9(l,T_.Loose)&&l.tabIndex!==-1&&s.preventDefault(),e(s,l)}let i=Ie(null);Lf("pointerdown",s=>{var o,l;n.value&&(i.value=((l=(o=s.composedPath)==null?void 0:o.call(s))==null?void 0:l[0])||s.target)},!0),Lf("mousedown",s=>{var o,l;n.value&&(i.value=((l=(o=s.composedPath)==null?void 0:o.call(s))==null?void 0:l[0])||s.target)},!0),Lf("click",s=>{W9()||i.value&&(r(s,()=>i.value),i.value=null)},!0),Lf("touchend",s=>r(s,()=>s.target instanceof HTMLElement?s.target:null),!0),M_("blur",s=>r(s,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function WS(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function K9(t,e){let n=Ie(WS(t.value.type,t.value.as));return hn(()=>{n.value=WS(t.value.type,t.value.as)}),wr(()=>{var r;n.value||Ht(e)&&Ht(e)instanceof HTMLButtonElement&&!((r=Ht(e))!=null&&r.hasAttribute("type"))&&(n.value="button")}),n}var ah=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(ah||{}),js=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(js||{});function Sr({visible:t=!0,features:e=0,ourProps:n,theirProps:r,...i}){var s;let o=R_(r,n),l=Object.assign(i,{props:o});if(t||e&2&&o.static)return vm(l);if(e&1){let c=(s=o.unmount)==null||s?0:1;return Pi(c,{0(){return null},1(){return vm({...i,props:{...o,hidden:!0,style:{display:"none"}}})}})}return vm(l)}function vm({props:t,attrs:e,slots:n,slot:r,name:i}){var s,o;let{as:l,...c}=_1(t,["unmount","static"]),u=(s=n.default)==null?void 0:s.call(n,r),d={};if(r){let h=!1,p=[];for(let[m,y]of Object.entries(r))typeof y=="boolean"&&(h=!0),y===!0&&p.push(m);h&&(d["data-headlessui-state"]=p.join(" "))}if(l==="template"){if(u=O_(u??[]),Object.keys(c).length>0||Object.keys(e).length>0){let[h,...p]=u??[];if(!G9(h)||p.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(c).concat(Object.keys(e)).map(b=>b.trim()).filter((b,x,C)=>C.indexOf(b)===x).sort((b,x)=>b.localeCompare(x)).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let m=R_((o=h.props)!=null?o:{},c,d),y=ss(h,m,!0);for(let b in m)b.startsWith("on")&&(y.props||(y.props={}),y.props[b]=m[b]);return y}return Array.isArray(u)&&u.length===1?u[0]:u}return $t(l,Object.assign({},c,d),{default:()=>u})}function O_(t){return t.flatMap(e=>e.type===nn?O_(e.children):[e])}function R_(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let l of o){if(i instanceof Event&&i.defaultPrevented)return;l(i,...s)}}});return e}function q9(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function _1(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function G9(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}var Jc=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Jc||{});let ch=bt({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:n}){return()=>{var r;let{features:i,...s}=t,o={"aria-hidden":(i&2)===2?!0:(r=s["aria-hidden"])!=null?r:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return Sr({ourProps:o,theirProps:s,slot:{},attrs:n,slots:e,name:"Hidden"})}}}),L_=Symbol("Context");var gr=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(gr||{});function J9(){return M1()!==null}function M1(){return Wt(L_,null)}function Y9(t){Bn(L_,t)}var uh=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(uh||{});function X9(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let _o=[];X9(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&_o[0]!==e.target&&(_o.unshift(e.target),_o=_o.filter(n=>n!=null&&n.isConnected),_o.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Z9(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}function I_(t,e,n,r){cu.isServer||wr(i=>{t=t??window,t.addEventListener(e,n,r),i(()=>t.removeEventListener(e,n,r))})}var Ga=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Ga||{});function Q9(){let t=Ie(0);return M_("keydown",e=>{e.key==="Tab"&&(t.value=e.shiftKey?1:0)}),t}function N_(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.value){let r=Ht(n);r instanceof HTMLElement&&e.add(r)}return e}var D_=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(D_||{});let Va=Object.assign(bt({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:Ie(new Set)}},inheritAttrs:!1,setup(t,{attrs:e,slots:n,expose:r}){let i=Ie(null);r({el:i,$el:i});let s=Ne(()=>ba(i)),o=Ie(!1);hn(()=>o.value=!0),xr(()=>o.value=!1),t7({ownerDocument:s},Ne(()=>o.value&&!!(t.features&16)));let l=n7({ownerDocument:s,container:i,initialFocus:Ne(()=>t.initialFocus)},Ne(()=>o.value&&!!(t.features&2)));r7({ownerDocument:s,container:i,containers:t.containers,previousActiveElement:l},Ne(()=>o.value&&!!(t.features&8)));let c=Q9();function u(m){let y=Ht(i);y&&(b=>b())(()=>{Pi(c.value,{[Ga.Forwards]:()=>{Xf(y,Hs.First,{skipElements:[m.relatedTarget]})},[Ga.Backwards]:()=>{Xf(y,Hs.Last,{skipElements:[m.relatedTarget]})}})})}let d=Ie(!1);function h(m){m.key==="Tab"&&(d.value=!0,requestAnimationFrame(()=>{d.value=!1}))}function p(m){if(!o.value)return;let y=N_(t.containers);Ht(i)instanceof HTMLElement&&y.add(Ht(i));let b=m.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(P_(y,b)||(d.value?Xf(Ht(i),Pi(c.value,{[Ga.Forwards]:()=>Hs.Next,[Ga.Backwards]:()=>Hs.Previous})|Hs.WrapAround,{relativeTo:m.target}):m.target instanceof HTMLElement&&jo(m.target)))}return()=>{let m={},y={ref:i,onKeydown:h,onFocusout:p},{features:b,initialFocus:x,containers:C,...M}=t;return $t(nn,[!!(b&4)&&$t(ch,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Jc.Focusable}),Sr({ourProps:y,theirProps:{...e,...M},slot:m,attrs:e,slots:n,name:"FocusTrap"}),!!(b&4)&&$t(ch,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Jc.Focusable})])}}}),{features:D_});function e7(t){let e=Ie(_o.slice());return ri([t],([n],[r])=>{r===!0&&n===!1?T1(()=>{e.value.splice(0)}):r===!1&&n===!0&&(e.value=_o.slice())},{flush:"post"}),()=>{var n;return(n=e.value.find(r=>r!=null&&r.isConnected))!=null?n:null}}function t7({ownerDocument:t},e){let n=e7(e);hn(()=>{wr(()=>{var r,i;e.value||((r=t.value)==null?void 0:r.activeElement)===((i=t.value)==null?void 0:i.body)&&jo(n())},{flush:"post"})}),xr(()=>{e.value&&jo(n())})}function n7({ownerDocument:t,container:e,initialFocus:n},r){let i=Ie(null),s=Ie(!1);return hn(()=>s.value=!0),xr(()=>s.value=!1),hn(()=>{ri([e,n,r],(o,l)=>{if(o.every((u,d)=>(l==null?void 0:l[d])===u)||!r.value)return;let c=Ht(e);c&&T1(()=>{var u,d;if(!s.value)return;let h=Ht(n),p=(u=t.value)==null?void 0:u.activeElement;if(h){if(h===p){i.value=p;return}}else if(c.contains(p)){i.value=p;return}h?jo(h):Xf(c,Hs.First|Hs.NoScroll)===A_.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.value=(d=t.value)==null?void 0:d.activeElement})},{immediate:!0,flush:"post"})}),i}function r7({ownerDocument:t,container:e,containers:n,previousActiveElement:r},i){var s;I_((s=t.value)==null?void 0:s.defaultView,"focus",o=>{if(!i.value)return;let l=N_(n);Ht(e)instanceof HTMLElement&&l.add(Ht(e));let c=r.value;if(!c)return;let u=o.target;u&&u instanceof HTMLElement?P_(l,u)?(r.value=u,jo(u)):(o.preventDefault(),o.stopPropagation(),jo(c)):jo(r.value)},!0)}function P_(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function i7(t){let e=bk(t.getSnapshot());return xr(t.subscribe(()=>{e.value=t.getSnapshot()})),e}function s7(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(l=>l()))}}}function o7(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,i=r.clientWidth-r.offsetWidth,s=t-i;n.style(r,"paddingRight",`${s}px`)}}}function l7(){return __()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=au();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=t.querySelector(u);d&&!r(d)&&(o=d)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;e.style(c,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),e.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function a7(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function c7(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let No=s7(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:au(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:c7(n)},i=[l7(),o7(),a7()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});No.subscribe(()=>{let t=No.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&No.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&No.dispatch("TEARDOWN",n)}});function u7(t,e,n){let r=i7(No),i=Ne(()=>{let s=t.value?r.value.get(t.value):void 0;return s?s.count>0:!1});return ri([t,e],([s,o],[l],c)=>{if(!s||!o)return;No.dispatch("PUSH",s,n);let u=!1;c(()=>{u||(No.dispatch("POP",l??s,n),u=!0)})},{immediate:!0}),i}let bm=new Map,za=new Map;function jS(t,e=Ie(!0)){wr(n=>{var r;if(!e.value)return;let i=Ht(t);if(!i)return;n(function(){var o;if(!i)return;let l=(o=za.get(i))!=null?o:1;if(l===1?za.delete(i):za.set(i,l-1),l!==1)return;let c=bm.get(i);c&&(c["aria-hidden"]===null?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden",c["aria-hidden"]),i.inert=c.inert,bm.delete(i))});let s=(r=za.get(i))!=null?r:0;za.set(i,s+1),s===0&&(bm.set(i,{"aria-hidden":i.getAttribute("aria-hidden"),inert:i.inert}),i.setAttribute("aria-hidden","true"),i.inert=!0)})}function f7({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){let r=Ie(null),i=ba(r);function s(){var o,l,c;let u=[];for(let d of t)d!==null&&(d instanceof HTMLElement?u.push(d):"value"in d&&d.value instanceof HTMLElement&&u.push(d.value));if(e!=null&&e.value)for(let d of e.value)u.push(d);for(let d of(o=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?o:[])d!==document.body&&d!==document.head&&d instanceof HTMLElement&&d.id!=="headlessui-portal-root"&&(d.contains(Ht(r))||d.contains((c=(l=Ht(r))==null?void 0:l.getRootNode())==null?void 0:c.host)||u.some(h=>d.contains(h))||u.push(d));return u}return{resolveContainers:s,contains(o){return s().some(l=>l.contains(o))},mainTreeNodeRef:r,MainTreeNode(){return n!=null?null:$t(ch,{features:Jc.Hidden,ref:r})}}}let B_=Symbol("ForcePortalRootContext");function d7(){return Wt(B_,!1)}let KS=bt({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(t,{slots:e,attrs:n}){return Bn(B_,t.force),()=>{let{force:r,...i}=t;return Sr({theirProps:i,ourProps:{},slot:{},slots:e,attrs:n,name:"ForcePortalRoot"})}}}),$_=Symbol("StackContext");var K0=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(K0||{});function h7(){return Wt($_,()=>{})}function p7({type:t,enabled:e,element:n,onUpdate:r}){let i=h7();function s(...o){r==null||r(...o),i(...o)}hn(()=>{ri(e,(o,l)=>{o?s(0,t,n):l===!0&&s(1,t,n)},{immediate:!0,flush:"sync"})}),xr(()=>{e.value&&s(1,t,n)}),Bn($_,s)}let g7=Symbol("DescriptionContext");function H_({slot:t=Ie({}),name:e="Description",props:n={}}={}){let r=Ie([]);function i(s){return r.value.push(s),()=>{let o=r.value.indexOf(s);o!==-1&&r.value.splice(o,1)}}return Bn(g7,{register:i,slot:t,name:e,props:n}),Ne(()=>r.value.length>0?r.value.join(" "):void 0)}function m7(t){let e=ba(t);if(!e){if(t===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${t}`)}let n=e.getElementById("headlessui-portal-root");if(n)return n;let r=e.createElement("div");return r.setAttribute("id","headlessui-portal-root"),e.body.appendChild(r)}const q0=new WeakMap;function y7(t){var e;return(e=q0.get(t))!=null?e:0}function qS(t,e){let n=e(y7(t));return n<=0?q0.delete(t):q0.set(t,n),n}let v7=bt({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:n}){let r=Ie(null),i=Ne(()=>ba(r)),s=d7(),o=Wt(F_,null),l=Ie(s===!0||o==null?m7(r.value):o.resolveTarget());l.value&&qS(l.value,p=>p+1);let c=Ie(!1);hn(()=>{c.value=!0}),wr(()=>{s||o!=null&&(l.value=o.resolveTarget())});let u=Wt(G0,null),d=!1,h=by();return ri(r,()=>{if(d||!u)return;let p=Ht(r);p&&(xr(u.register(p),h),d=!0)}),xr(()=>{var p,m;let y=(p=i.value)==null?void 0:p.getElementById("headlessui-portal-root");!y||l.value!==y||qS(l.value,b=>b-1)||l.value.children.length>0||(m=l.value.parentElement)==null||m.removeChild(l.value)}),()=>{if(!c.value||l.value===null)return null;let p={ref:r,"data-headlessui-portal":""};return $t(t3,{to:l.value},Sr({ourProps:p,theirProps:t,slot:{},attrs:n,slots:e,name:"Portal"}))}}}),G0=Symbol("PortalParentContext");function b7(){let t=Wt(G0,null),e=Ie([]);function n(s){return e.value.push(s),t&&t.register(s),()=>r(s)}function r(s){let o=e.value.indexOf(s);o!==-1&&e.value.splice(o,1),t&&t.unregister(s)}let i={register:n,unregister:r,portals:e};return[e,bt({name:"PortalWrapper",setup(s,{slots:o}){return Bn(G0,i),()=>{var l;return(l=o.default)==null?void 0:l.call(o)}}})]}let F_=Symbol("PortalGroupContext"),w7=bt({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:e,slots:n}){let r=Xc({resolveTarget(){return t.target}});return Bn(F_,r),()=>{let{target:i,...s}=t;return Sr({theirProps:s,ourProps:{},slot:{},attrs:e,slots:n,name:"PortalGroup"})}}});var x7=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(x7||{});let J0=Symbol("DialogContext");function O1(t){let e=Wt(J0,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,O1),n}return e}let If="DC8F892D-2EBD-447C-A4C8-A03058436FF4",C7=bt({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:If},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:t=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:i}){var s,o;let l=(s=t.id)!=null?s:`headlessui-dialog-${va()}`,c=Ie(!1);hn(()=>{c.value=!0});let u=!1,d=Ne(()=>t.role==="dialog"||t.role==="alertdialog"?t.role:(u||(u=!0,console.warn(`Invalid role [${d}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),h=Ie(0),p=M1(),m=Ne(()=>t.open===If&&p!==null?(p.value&gr.Open)===gr.Open:t.open),y=Ie(null),b=Ne(()=>ba(y));if(i({el:y,$el:y}),!(t.open!==If||p!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof m.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${m.value===If?void 0:t.open}`);let x=Ne(()=>c.value&&m.value?0:1),C=Ne(()=>x.value===0),M=Ne(()=>h.value>1),L=Wt(J0,null)!==null,[A,F]=b7(),{resolveContainers:R,mainTreeNodeRef:U,MainTreeNode:W}=f7({portals:A,defaultContainers:[Ne(()=>{var pe;return(pe=be.panelRef.value)!=null?pe:y.value})]}),ee=Ne(()=>M.value?"parent":"leaf"),ve=Ne(()=>p!==null?(p.value&gr.Closing)===gr.Closing:!1),Ce=Ne(()=>L||ve.value?!1:C.value),te=Ne(()=>{var pe,we,_e;return(_e=Array.from((we=(pe=b.value)==null?void 0:pe.querySelectorAll("body > *"))!=null?we:[]).find(He=>He.id==="headlessui-portal-root"?!1:He.contains(Ht(U))&&He instanceof HTMLElement))!=null?_e:null});jS(te,Ce);let me=Ne(()=>M.value?!0:C.value),Qe=Ne(()=>{var pe,we,_e;return(_e=Array.from((we=(pe=b.value)==null?void 0:pe.querySelectorAll("[data-headlessui-portal]"))!=null?we:[]).find(He=>He.contains(Ht(U))&&He instanceof HTMLElement))!=null?_e:null});jS(Qe,me),p7({type:"Dialog",enabled:Ne(()=>x.value===0),element:y,onUpdate:(pe,we)=>{if(we==="Dialog")return Pi(pe,{[K0.Add]:()=>h.value+=1,[K0.Remove]:()=>h.value-=1})}});let rt=H_({name:"DialogDescription",slot:Ne(()=>({open:m.value}))}),Re=Ie(null),be={titleId:Re,panelRef:Ie(null),dialogState:x,setTitleId(pe){Re.value!==pe&&(Re.value=pe)},close(){e("close",!1)}};Bn(J0,be);let j=Ne(()=>!(!C.value||M.value));j9(R,(pe,we)=>{pe.preventDefault(),be.close(),bh(()=>we==null?void 0:we.focus())},j);let de=Ne(()=>!(M.value||x.value!==0));I_((o=b.value)==null?void 0:o.defaultView,"keydown",pe=>{de.value&&(pe.defaultPrevented||pe.key===uh.Escape&&(pe.preventDefault(),pe.stopPropagation(),be.close()))});let Ee=Ne(()=>!(ve.value||x.value!==0||L));return u7(b,Ee,pe=>{var we;return{containers:[...(we=pe.containers)!=null?we:[],R]}}),wr(pe=>{if(x.value!==0)return;let we=Ht(y);if(!we)return;let _e=new ResizeObserver(He=>{for(let De of He){let Le=De.target.getBoundingClientRect();Le.x===0&&Le.y===0&&Le.width===0&&Le.height===0&&be.close()}});_e.observe(we),pe(()=>_e.disconnect())}),()=>{let{open:pe,initialFocus:we,..._e}=t,He={...n,ref:y,id:l,role:d.value,"aria-modal":x.value===0?!0:void 0,"aria-labelledby":Re.value,"aria-describedby":rt.value},De={open:x.value===0};return $t(KS,{force:!0},()=>[$t(v7,()=>$t(w7,{target:y.value},()=>$t(KS,{force:!1},()=>$t(Va,{initialFocus:we,containers:R,features:C.value?Pi(ee.value,{parent:Va.features.RestoreFocus,leaf:Va.features.All&~Va.features.FocusLock}):Va.features.None},()=>$t(F,{},()=>Sr({ourProps:He,theirProps:{..._e,...n},slot:De,attrs:n,slots:r,visible:x.value===0,features:ah.RenderStrategy|ah.Static,name:"Dialog"})))))),$t(W)])}}}),S7=bt({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var i;let s=(i=t.id)!=null?i:`headlessui-dialog-panel-${va()}`,o=O1("DialogPanel");r({el:o.panelRef,$el:o.panelRef});function l(c){c.stopPropagation()}return()=>{let{...c}=t,u={id:s,ref:o.panelRef,onClick:l};return Sr({ourProps:u,theirProps:c,slot:{open:o.dialogState.value===0},attrs:e,slots:n,name:"DialogPanel"})}}}),k7=bt({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n}){var r;let i=(r=t.id)!=null?r:`headlessui-dialog-title-${va()}`,s=O1("DialogTitle");return hn(()=>{s.setTitleId(i),xr(()=>s.setTitleId(null))}),()=>{let{...o}=t;return Sr({ourProps:{id:i},theirProps:o,slot:{open:s.dialogState.value===0},attrs:e,slots:n,name:"DialogTitle"})}}}),V_=Symbol("LabelContext");function z_(){let t=Wt(V_,null);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,z_),e}return t}function E7({slot:t={},name:e="Label",props:n={}}={}){let r=Ie([]);function i(s){return r.value.push(s),()=>{let o=r.value.indexOf(s);o!==-1&&r.value.splice(o,1)}}return Bn(V_,{register:i,slot:t,name:e,props:n}),Ne(()=>r.value.length>0?r.value.join(" "):void 0)}let A7=bt({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{slots:e,attrs:n}){var r;let i=(r=t.id)!=null?r:`headlessui-label-${va()}`,s=z_();return hn(()=>xr(s.register(i))),()=>{let{name:o="Label",slot:l={},props:c={}}=s,{passive:u,...d}=t,h={...Object.entries(c).reduce((p,[m,y])=>Object.assign(p,{[m]:at(y)}),{}),id:i};return u&&(delete h.onClick,delete h.htmlFor,delete d.onClick),Sr({ourProps:h,theirProps:d,slot:l,attrs:n,slots:e,name:o})}}}),U_=Symbol("GroupContext"),T7=bt({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:n}){let r=Ie(null),i=E7({name:"SwitchLabel",props:{htmlFor:Ne(()=>{var o;return(o=r.value)==null?void 0:o.id}),onClick(o){r.value&&(o.currentTarget.tagName==="LABEL"&&o.preventDefault(),r.value.click(),r.value.focus({preventScroll:!0}))}}}),s=H_({name:"SwitchDescription"});return Bn(U_,{switchRef:r,labelledby:i,describedby:s}),()=>Sr({theirProps:t,ourProps:{},slot:{},slots:e,attrs:n,name:"SwitchGroup"})}}),_7=bt({name:"Switch",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(t,{emit:e,attrs:n,slots:r,expose:i}){var s;let o=(s=t.id)!=null?s:`headlessui-switch-${va()}`,l=Wt(U_,null),[c,u]=O9(Ne(()=>t.modelValue),M=>e("update:modelValue",M),Ne(()=>t.defaultChecked));function d(){u(!c.value)}let h=Ie(null),p=l===null?h:l.switchRef,m=K9(Ne(()=>({as:t.as,type:n.type})),p);i({el:p,$el:p});function y(M){M.preventDefault(),d()}function b(M){M.key===uh.Space?(M.preventDefault(),d()):M.key===uh.Enter&&Z9(M.currentTarget)}function x(M){M.preventDefault()}let C=Ne(()=>{var M,L;return(L=(M=Ht(p))==null?void 0:M.closest)==null?void 0:L.call(M,"form")});return hn(()=>{ri([C],()=>{if(!C.value||t.defaultChecked===void 0)return;function M(){u(t.defaultChecked)}return C.value.addEventListener("reset",M),()=>{var L;(L=C.value)==null||L.removeEventListener("reset",M)}},{immediate:!0})}),()=>{let{name:M,value:L,form:A,tabIndex:F,...R}=t,U={checked:c.value},W={id:o,ref:p,role:"switch",type:m.value,tabIndex:F===-1?0:F,"aria-checked":c.value,"aria-labelledby":l==null?void 0:l.labelledby.value,"aria-describedby":l==null?void 0:l.describedby.value,onClick:y,onKeyup:b,onKeypress:x};return $t(nn,[M!=null&&c.value!=null?$t(ch,q9({features:Jc.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:c.value,form:A,disabled:R.disabled,name:M,value:L})):null,Sr({ourProps:W,theirProps:{...n,..._1(R,["modelValue","defaultChecked"])},slot:U,attrs:n,slots:r,name:"Switch"})])}}}),M7=A7;function O7(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function wm(t,...e){t&&e.length>0&&t.classList.add(...e)}function Nf(t,...e){t&&e.length>0&&t.classList.remove(...e)}var Y0=(t=>(t.Finished="finished",t.Cancelled="cancelled",t))(Y0||{});function R7(t,e){let n=au();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(t),[s,o]=[r,i].map(l=>{let[c=0]=l.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,d)=>d-u);return c});return s!==0?n.setTimeout(()=>e("finished"),s+o):e("finished"),n.add(()=>e("cancelled")),n.dispose}function GS(t,e,n,r,i,s){let o=au(),l=s!==void 0?O7(s):()=>{};return Nf(t,...i),wm(t,...e,...n),o.nextFrame(()=>{Nf(t,...n),wm(t,...r),o.add(R7(t,c=>(Nf(t,...r,...e),wm(t,...i),l(c))))}),o.add(()=>Nf(t,...e,...n,...r,...i)),o.add(()=>l("cancelled")),o.dispose}function xo(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let R1=Symbol("TransitionContext");var L7=(t=>(t.Visible="visible",t.Hidden="hidden",t))(L7||{});function I7(){return Wt(R1,null)!==null}function N7(){let t=Wt(R1,null);if(t===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return t}function D7(){let t=Wt(L1,null);if(t===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return t}let L1=Symbol("NestingContext");function op(t){return"children"in t?op(t.children):t.value.filter(({state:e})=>e==="visible").length>0}function W_(t){let e=Ie([]),n=Ie(!1);hn(()=>n.value=!0),xr(()=>n.value=!1);function r(s,o=js.Hidden){let l=e.value.findIndex(({id:c})=>c===s);l!==-1&&(Pi(o,{[js.Unmount](){e.value.splice(l,1)},[js.Hidden](){e.value[l].state="hidden"}}),!op(e)&&n.value&&(t==null||t()))}function i(s){let o=e.value.find(({id:l})=>l===s);return o?o.state!=="visible"&&(o.state="visible"):e.value.push({id:s,state:"visible"}),()=>r(s,js.Unmount)}return{children:e,register:i,unregister:r}}let j_=ah.RenderStrategy,X0=bt({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:i}){let s=Ie(0);function o(){s.value|=gr.Opening,e("beforeEnter")}function l(){s.value&=~gr.Opening,e("afterEnter")}function c(){s.value|=gr.Closing,e("beforeLeave")}function u(){s.value&=~gr.Closing,e("afterLeave")}if(!I7()&&J9())return()=>$t(K_,{...t,onBeforeEnter:o,onAfterEnter:l,onBeforeLeave:c,onAfterLeave:u},r);let d=Ie(null),h=Ne(()=>t.unmount?js.Unmount:js.Hidden);i({el:d,$el:d});let{show:p,appear:m}=N7(),{register:y,unregister:b}=D7(),x=Ie(p.value?"visible":"hidden"),C={value:!0},M=va(),L={value:!1},A=W_(()=>{!L.value&&x.value!=="hidden"&&(x.value="hidden",b(M),u())});hn(()=>{let me=y(M);xr(me)}),wr(()=>{if(h.value===js.Hidden&&M){if(p.value&&x.value!=="visible"){x.value="visible";return}Pi(x.value,{hidden:()=>b(M),visible:()=>y(M)})}});let F=xo(t.enter),R=xo(t.enterFrom),U=xo(t.enterTo),W=xo(t.entered),ee=xo(t.leave),ve=xo(t.leaveFrom),Ce=xo(t.leaveTo);hn(()=>{wr(()=>{if(x.value==="visible"){let me=Ht(d);if(me instanceof Comment&&me.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function te(me){let Qe=C.value&&!m.value,rt=Ht(d);!rt||!(rt instanceof HTMLElement)||Qe||(L.value=!0,p.value&&o(),p.value||c(),me(p.value?GS(rt,F,R,U,W,Re=>{L.value=!1,Re===Y0.Finished&&l()}):GS(rt,ee,ve,Ce,W,Re=>{L.value=!1,Re===Y0.Finished&&(op(A)||(x.value="hidden",b(M),u()))})))}return hn(()=>{ri([p],(me,Qe,rt)=>{te(rt),C.value=!1},{immediate:!0})}),Bn(L1,A),Y9(Ne(()=>Pi(x.value,{visible:gr.Open,hidden:gr.Closed})|s.value)),()=>{let{appear:me,show:Qe,enter:rt,enterFrom:Re,enterTo:be,entered:j,leave:de,leaveFrom:Ee,leaveTo:pe,...we}=t,_e={ref:d},He={...we,...m.value&&p.value&&cu.isServer?{class:Oi([n.class,we.class,...F,...R])}:{}};return Sr({theirProps:He,ourProps:_e,slot:{},slots:r,attrs:n,features:j_,visible:x.value==="visible",name:"TransitionChild"})}}}),P7=X0,K_=bt({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(t,{emit:e,attrs:n,slots:r}){let i=M1(),s=Ne(()=>t.show===null&&i!==null?(i.value&gr.Open)===gr.Open:t.show);wr(()=>{if(![!0,!1].includes(s.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let o=Ie(s.value?"visible":"hidden"),l=W_(()=>{o.value="hidden"}),c=Ie(!0),u={show:s,appear:Ne(()=>t.appear||!c.value)};return hn(()=>{wr(()=>{c.value=!1,s.value?o.value="visible":op(l)||(o.value="hidden")})}),Bn(L1,l),Bn(R1,u),()=>{let d=_1(t,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),h={unmount:t.unmount};return Sr({ourProps:{...h,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[$t(P7,{onBeforeEnter:()=>e("beforeEnter"),onAfterEnter:()=>e("afterEnter"),onBeforeLeave:()=>e("beforeLeave"),onAfterLeave:()=>e("afterLeave"),...n,...h,...d},r.default)]},attrs:{},features:j_,visible:o.value==="visible",name:"Transition"})}}});const B7=he("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),$7={class:"fixed inset-0 overflow-y-auto"},H7={class:"flex min-h-full items-center justify-center p-6 text-center"},uu=bt({__name:"Dialog",props:{show:{type:Boolean},title:{},maxWidth:{}},emits:["close"],setup(t,{emit:e}){const n=e;function r(){n("close")}return(i,s)=>(Je(),Nt(at(K_),{show:i.show,appear:"",as:"template"},{default:ge(()=>[J(at(C7),{open:i.show,onClose:r,class:"relative z-10",as:"div"},{default:ge(()=>[J(at(X0),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:ge(()=>[B7]),_:1}),he("div",$7,[he("div",H7,[J(at(X0),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:ge(()=>[J(at(S7),{class:Oi([[i.maxWidth??"max-w-md"],"flex w-full transform flex-col space-y-6 overflow-hidden rounded-xl bg-white p-6 text-left align-middle shadow-xl transition-all"])},{default:ge(()=>[J(at(k7),{class:"text-2xl font-medium leading-6 text-gray-900",as:"h3"},{default:ge(()=>[yr(Yc(i.title),1)]),_:1}),Bi(i.$slots,"default")]),_:3},8,["class"])]),_:3})])])]),_:3},8,["open"])]),_:3},8,["show"]))}}),F7={},V7={class:"flex flex-col space-y-1"};function z7(t,e){return Je(),sn("div",V7,[Bi(t.$slots,"default")])}const la=$i(F7,[["render",z7]]),U7=["placeholder"],aa=bt({__name:"Input",props:{modelValue:{},placeholder:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=Ne({get:()=>n.modelValue??"",set:s=>r("update:modelValue",s)});return(s,o)=>xP((Je(),sn("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>i.value=l),placeholder:s.placeholder,class:"w-full text-sm rounded-md border border-gray-400 px-3 py-2 text-gray-800 focus:ring-black focus:outline-black"},null,8,U7)),[[F3,i.value]])}}),W7={},j7={class:"select-none text-sm text-black font-medium flex justify-start items-center gap-4"};function K7(t,e){return Je(),sn("label",j7,[Bi(t.$slots,"default")])}const ca=$i(W7,[["render",K7]]),q7={class:"flex flex-col space-y-5"},G7=he("button",{class:"rounded-md bg-black px-4 py-3 text-sm font-medium text-white hover:bg-opacity-80",type:"submit"},"",-1),J7=bt({__name:"TiptapVideoDialog",props:{show:{type:Boolean}},emits:["close","insert"],setup(t,{emit:e}){const n=e,r=Ie("");function i(){n("close")}function s(){n("insert",r.value),r.value="",i()}return(o,l)=>(Je(),Nt(uu,{show:o.show,onClose:i,title:" Youtube"},{default:ge(()=>[he("form",{onSubmit:_h(s,["prevent"])},[he("div",q7,[J(la,null,{default:ge(()=>[J(ca,{for:"input-add-youtube-url"},{default:ge(()=>[yr(" Youtube ")]),_:1}),J(aa,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=c=>r.value=c),id:"input-add-youtube-url",placeholder:"",required:"",type:"url"},null,8,["modelValue"])]),_:1}),he("div",{class:"flex flex-row justify-end space-x-3"},[he("button",{onClick:i,class:"rounded-md px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100",type:"button"},"  "),G7])])],32)]),_:1},8,["show"]))}}),Y7={class:"flex flex-col space-y-5"},X7=he("button",{class:"rounded-lg bg-black px-4 py-3 text-sm font-medium text-white hover:bg-opacity-80",type:"submit"},"",-1),Z7=bt({__name:"TiptapImageDialog",props:{show:{type:Boolean}},emits:["close","insert"],setup(t,{emit:e}){const n=e,r=Ie();function i(){n("close")}function s(){n("insert",r.value),n("close")}return(o,l)=>(Je(),Nt(uu,{show:o.show,onClose:i,title:""},{default:ge(()=>[he("form",{onSubmit:_h(s,["prevent"])},[he("div",Y7,[J(la,null,{default:ge(()=>[J(ca,{for:"input-link-url"},{default:ge(()=>[yr("")]),_:1}),J(aa,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=c=>r.value=c),id:"input-link-url",class:"mt-2",placeholder:"",type:"url"},null,8,["modelValue"])]),_:1}),he("div",{class:"flex flex-row justify-end space-x-3"},[he("button",{onClick:i,class:"rounded-lg px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100",type:"button"},"  "),X7])])],32)]),_:1},8,["show"]))}}),Q7={class:"flex flex-col space-y-5"},eq={class:"flex flex-row space-x-5"},tq={class:"flex flex-row items-center space-x-3"},nq=he("button",{class:"rounded-lg bg-black px-4 py-3 text-sm font-medium text-white hover:bg-opacity-80",type:"submit"},"",-1),rq=bt({__name:"TiptapTableDialog",props:{show:{type:Boolean}},emits:["close","insert"],setup(t,{emit:e}){const n=e,r=Ie(3),i=Ie(3),s=Ie(!0);function o(){n("close")}function l(){n("insert",{rows:i.value,columns:r.value,withHeader:s.value}),o()}return(c,u)=>(Je(),Nt(uu,{show:c.show,onClose:o,title:""},{default:ge(()=>[he("form",{onSubmit:_h(l,["prevent"])},[he("div",Q7,[he("div",eq,[J(la,{class:"w-full flex-1"},{default:ge(()=>[J(ca,{for:"input-table-columns"},{default:ge(()=>[yr("")]),_:1}),J(aa,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),id:"input-table-columns",class:"w-full mt-2",min:"1",required:"",type:"number"},null,8,["modelValue"])]),_:1}),J(la,{class:"w-full flex-1"},{default:ge(()=>[J(ca,{for:"input-table-rows"},{default:ge(()=>[yr("")]),_:1}),J(aa,{modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=d=>i.value=d),id:"input-table-rows",class:"w-full mt-2",min:"1",required:"",type:"number"},null,8,["modelValue"])]),_:1})]),J(at(T7),null,{default:ge(()=>[he("div",tq,[J(at(_7),{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=d=>s.value=d),class:Oi([s.value?"bg-black":"bg-gray-200","relative inline-flex h-6 w-11 shrink-0 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"])},{default:ge(()=>[he("span",{class:Oi([s.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"]),J(at(M7),{class:"select-none text-sm text-gray-600"},{default:ge(()=>[yr(" Header")]),_:1})])]),_:1}),he("div",{class:"flex flex-row justify-end space-x-3"},[he("button",{onClick:o,class:"rounded-lg px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100",type:"button"},"  "),nq])])],32)]),_:1},8,["show"]))}}),iq={class:"flex flex-col space-y-5"},sq=he("button",{class:"rounded-lg bg-black px-4 py-3 text-sm font-medium text-white hover:bg-opacity-80",type:"submit"},"",-1),oq=bt({__name:"TiptapLinkDialog",props:{show:{type:Boolean},currentUrl:{}},emits:["close","update"],setup(t,{emit:e}){const n=t,r=e,i=Ie();function s(){r("close")}function o(){r("update",i.value),r("close")}return hn(()=>{i.value=n.currentUrl??""}),(l,c)=>(Je(),Nt(uu,{show:l.show,onClose:s,title:""},{default:ge(()=>[he("form",{onSubmit:_h(o,["prevent"])},[he("div",iq,[J(la,null,{default:ge(()=>[J(ca,{for:"input-link-url"},{default:ge(()=>[yr(" https ")]),_:1}),J(aa,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=u=>i.value=u),id:"input-link-url",class:"mt-2",placeholder:"",type:"url"},null,8,["modelValue"])]),_:1}),he("div",{class:"flex flex-row justify-end space-x-3"},[he("button",{onClick:s,class:"rounded-lg px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100",type:"button"},"  "),sq])])],32)]),_:1},8,["show"]))}}),lq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z"})],-1),aq=he("div",{class:"h-5 w-5 flex justify-center items-center"},"",-1),cq=bt({__name:"InsertTool",props:{editor:{type:Object,default:()=>{}}},emits:["toggleCommonTextList"],setup(t,{emit:e}){const n=e,r=t,i=Ie(!1),s=Ie(!1),o=Ie(!1),l=Ie(!1),c=Ie(!1),u=Ie("");function d(){var x;u.value=(x=r.editor.value)==null?void 0:x.getAttributes("link").href,i.value=!0}function h(x){var C,M;if(!x){(C=r.editor)==null||C.chain().focus().extendMarkRange("link").unsetLink().run();return}(M=r.editor)==null||M.chain().focus().extendMarkRange("link").setLink({href:x}).run()}function p(x){var C;(C=r.editor)==null||C.commands.setYoutubeVideo({src:x})}function m(x){var C;(C=r.editor)==null||C.chain().focus().insertTable({rows:x.rows,cols:x.columns,withHeaderRow:x.withHeader}).run()}function y(x){var C;(C=r.editor)==null||C.chain().focus().setImage({src:x}).run()}function b(){c.value=!c.value,n("toggleCommonTextList",c.value)}return(x,C)=>(Je(),sn(nn,null,[t.editor?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{isActive:t.editor.isActive("link"),onClick:d,label:"Link"},{default:ge(()=>[J(at(d9),{class:"h-5 w-5"})]),_:1},8,["isActive"]),J(Ct,{onClick:C[0]||(C[0]=M=>o.value=!0),label:"Image"},{default:ge(()=>[J(at(y9),{class:"h-5 w-5"})]),_:1}),J(Ct,{onClick:C[1]||(C[1]=M=>l.value=!0),label:"Table"},{default:ge(()=>[lq]),_:1}),J(Ct,{onClick:C[2]||(C[2]=M=>s.value=!0),label:"Youtube"},{default:ge(()=>[J(at(m9),{class:"h-5 w-5"})]),_:1}),J(Ct,{onClick:C[3]||(C[3]=M=>t.editor.chain().focus().setHorizontalRule().run()),label:"Horizontal Line"},{default:ge(()=>[J(at(g9),{class:"h-5 w-5"})]),_:1}),J(Ct,{isActive:c.value,onClick:b,label:""},{default:ge(()=>[aq]),_:1},8,["isActive"])]),_:1})):Wn("",!0),i.value?(Je(),Nt(oq,{key:1,"current-url":u.value,show:i.value,onClose:C[4]||(C[4]=M=>i.value=!1),onUpdate:h},null,8,["current-url","show"])):Wn("",!0),s.value?(Je(),Nt(J7,{key:2,show:s.value,onClose:C[5]||(C[5]=M=>s.value=!1),onInsert:p},null,8,["show"])):Wn("",!0),l.value?(Je(),Nt(rq,{key:3,show:l.value,onClose:C[6]||(C[6]=M=>l.value=!1),onInsert:m},null,8,["show"])):Wn("",!0),o.value?(Je(),Nt(Z7,{key:4,show:o.value,onClose:C[7]||(C[7]=M=>o.value=!1),onInsert:y},null,8,["show"])):Wn("",!0)],64))}}),uq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M15.46,15.88L16.88,14.46L19,16.59L21.12,14.46L22.54,15.88L20.41,18L22.54,20.12L21.12,21.54L19,19.41L16.88,21.54L15.46,20.12L17.59,18L15.46,15.88M4,3H18A2,2 0 0,1 20,5V12.08C18.45,11.82 16.92,12.18 15.68,13H12V17H13.08C12.97,17.68 12.97,18.35 13.08,19H4A2,2 0 0,1 2,17V5A2,2 0 0,1 4,3M4,7V11H10V7H4M12,7V11H18V7H12M4,13V17H10V13H4Z"})],-1),fq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M13,2A2,2 0 0,0 11,4V20A2,2 0 0,0 13,22H22V2H13M20,10V14H13V10H20M20,16V20H13V16H20M20,4V8H13V4H20M9,11H6V8H4V11H1V13H4V16H6V13H9V11Z"})],-1),dq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z"})],-1),hq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M4,2H11A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M17.59,12L15,9.41L16.41,8L19,10.59L21.59,8L23,9.41L20.41,12L23,14.59L21.59,16L19,13.41L16.41,16L15,14.59L17.59,12Z"})],-1),pq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M22,14A2,2 0 0,0 20,12H4A2,2 0 0,0 2,14V21H4V19H8V21H10V19H14V21H16V19H20V21H22V14M4,14H8V17H4V14M10,14H14V17H10V14M20,14V17H16V14H20M11,10H13V7H16V5H13V2H11V5H8V7H11V10Z"})],-1),gq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z"})],-1),mq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M9.41,13L12,15.59L14.59,13L16,14.41L13.41,17L16,19.59L14.59,21L12,18.41L9.41,21L8,19.59L10.59,17L8,14.41L9.41,13M22,9A2,2 0 0,1 20,11H4A2,2 0 0,1 2,9V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V9M4,9H8V6H4V9M10,9H14V6H10V9M16,9H20V6H16V9Z"})],-1),yq=he("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[he("path",{d:"M5,10H3V4H11V6H5V10M19,18H13V20H21V14H19V18M5,18V14H3V20H11V18H5M21,4H13V6H19V10H21V4M8,13V15L11,12L8,9V11H3V13H8M16,11V9L13,12L16,15V13H21V11H16Z"})],-1),vq={__name:"TableEditTool",props:{editor:{type:Object,default:()=>{}}},setup(t){return(e,n)=>{var r;return(r=t.editor)!=null&&r.isActive("table")?(Je(),Nt(sl,{key:0},{default:ge(()=>[J(Ct,{onClick:n[0]||(n[0]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.deleteTable()}),label:"Remove table"},{default:ge(()=>[uq]),_:1}),J(Ct,{onClick:n[1]||(n[1]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.addColumnBefore()}),label:"Add column before"},{default:ge(()=>[fq]),_:1}),J(Ct,{onClick:n[2]||(n[2]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.addColumnAfter()}),label:"Add column after"},{default:ge(()=>[dq]),_:1}),J(Ct,{onClick:n[3]||(n[3]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.deleteColumn()}),label:"Remove column"},{default:ge(()=>[hq]),_:1}),J(Ct,{onClick:n[4]||(n[4]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.addRowBefore()}),label:"Add row before"},{default:ge(()=>[pq]),_:1}),J(Ct,{onClick:n[5]||(n[5]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.addRowAfter()}),label:"Add row after"},{default:ge(()=>[gq]),_:1}),J(Ct,{onClick:n[6]||(n[6]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.deleteRow()}),label:"Remove row"},{default:ge(()=>[mq]),_:1}),J(Ct,{onClick:n[7]||(n[7]=i=>{var s;return(s=t.editor)==null?void 0:s.commands.mergeOrSplit()}),label:"Merge or split cell"},{default:ge(()=>[yq]),_:1})]),_:1})):Wn("",!0)}}},q_={__name:"CommonTextButton",emits:["click"],setup(t,{emit:e}){const n=e;function r(){n("click")}return(i,s)=>(Je(),sn("button",{onClick:r,class:"text-xs py-1 px-3 bg-gray-600 text-white rounded-lg transition hover:bg-gray-700 flex justify-center items-center",type:"button"},[Bi(i.$slots,"default")]))}};var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fh.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,p=2,m=4,y=1,b=2,x=1,C=2,M=4,L=8,A=16,F=32,R=64,U=128,W=256,ee=512,ve=30,Ce="...",te=800,me=16,Qe=1,rt=2,Re=3,be=1/0,j=9007199254740991,de=17976931348623157e292,Ee=NaN,pe=4294967295,we=pe-1,_e=pe>>>1,He=[["ary",U],["bind",x],["bindKey",C],["curry",L],["curryRight",A],["flip",ee],["partial",F],["partialRight",R],["rearg",W]],De="[object Arguments]",Le="[object Array]",$="[object AsyncFunction]",re="[object Boolean]",ie="[object Date]",xe="[object DOMException]",Xe="[object Error]",ft="[object Function]",E="[object GeneratorFunction]",T="[object Map]",D="[object Number]",z="[object Null]",H="[object Object]",ne="[object Promise]",ae="[object Proxy]",Z="[object RegExp]",G="[object Set]",X="[object String]",ce="[object Symbol]",Te="[object Undefined]",Se="[object WeakMap]",Pe="[object WeakSet]",je="[object ArrayBuffer]",Ge="[object DataView]",gt="[object Float32Array]",St="[object Float64Array]",qt="[object Int8Array]",oe="[object Int16Array]",Fe="[object Int32Array]",P="[object Uint8Array]",se="[object Uint8ClampedArray]",ue="[object Uint16Array]",Me="[object Uint32Array]",Ke=/\b__p \+= '';/g,kt=/\b(__p \+=) '' \+/g,Vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cn=/&(?:amp|lt|gt|quot|#39);/g,lr=/[&<>"']/g,On=RegExp(cn.source),gn=RegExp(lr.source),ol=/<%-([\s\S]+?)%>/g,fs=/<%([\s\S]+?)%>/g,fu=/<%=([\s\S]+?)%>/g,wa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ll=/^\w*$/,Y_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lp=/[\\^$.*+?()[\]{}|]/g,X_=RegExp(lp.source),ap=/^\s+/,Z_=/\s/,Q_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eM=/\{\n\/\* \[wrapped with (.+)\] \*/,tM=/,? & /,nM=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rM=/[()=,{}\[\]\/\s]/,iM=/\\(\\)?/g,sM=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,I1=/\w*$/,oM=/^[-+]0x[0-9a-f]+$/i,lM=/^0b[01]+$/i,aM=/^\[object .+?Constructor\]$/,cM=/^0o[0-7]+$/i,uM=/^(?:0|[1-9]\d*)$/,fM=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,du=/($^)/,dM=/['\n\r\u2028\u2029\\]/g,hu="\\ud800-\\udfff",hM="\\u0300-\\u036f",pM="\\ufe20-\\ufe2f",gM="\\u20d0-\\u20ff",N1=hM+pM+gM,D1="\\u2700-\\u27bf",P1="a-z\\xdf-\\xf6\\xf8-\\xff",mM="\\xac\\xb1\\xd7\\xf7",yM="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vM="\\u2000-\\u206f",bM=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",B1="A-Z\\xc0-\\xd6\\xd8-\\xde",$1="\\ufe0e\\ufe0f",H1=mM+yM+vM+bM,cp="[']",wM="["+hu+"]",F1="["+H1+"]",pu="["+N1+"]",V1="\\d+",xM="["+D1+"]",z1="["+P1+"]",U1="[^"+hu+H1+V1+D1+P1+B1+"]",up="\\ud83c[\\udffb-\\udfff]",CM="(?:"+pu+"|"+up+")",W1="[^"+hu+"]",fp="(?:\\ud83c[\\udde6-\\uddff]){2}",dp="[\\ud800-\\udbff][\\udc00-\\udfff]",al="["+B1+"]",j1="\\u200d",K1="(?:"+z1+"|"+U1+")",SM="(?:"+al+"|"+U1+")",q1="(?:"+cp+"(?:d|ll|m|re|s|t|ve))?",G1="(?:"+cp+"(?:D|LL|M|RE|S|T|VE))?",J1=CM+"?",Y1="["+$1+"]?",kM="(?:"+j1+"(?:"+[W1,fp,dp].join("|")+")"+Y1+J1+")*",EM="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",AM="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",X1=Y1+J1+kM,TM="(?:"+[xM,fp,dp].join("|")+")"+X1,_M="(?:"+[W1+pu+"?",pu,fp,dp,wM].join("|")+")",MM=RegExp(cp,"g"),OM=RegExp(pu,"g"),hp=RegExp(up+"(?="+up+")|"+_M+X1,"g"),RM=RegExp([al+"?"+z1+"+"+q1+"(?="+[F1,al,"$"].join("|")+")",SM+"+"+G1+"(?="+[F1,al+K1,"$"].join("|")+")",al+"?"+K1+"+"+q1,al+"+"+G1,AM,EM,V1,TM].join("|"),"g"),LM=RegExp("["+j1+hu+N1+$1+"]"),IM=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,NM=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],DM=-1,Rt={};Rt[gt]=Rt[St]=Rt[qt]=Rt[oe]=Rt[Fe]=Rt[P]=Rt[se]=Rt[ue]=Rt[Me]=!0,Rt[De]=Rt[Le]=Rt[je]=Rt[re]=Rt[Ge]=Rt[ie]=Rt[Xe]=Rt[ft]=Rt[T]=Rt[D]=Rt[H]=Rt[Z]=Rt[G]=Rt[X]=Rt[Se]=!1;var _t={};_t[De]=_t[Le]=_t[je]=_t[Ge]=_t[re]=_t[ie]=_t[gt]=_t[St]=_t[qt]=_t[oe]=_t[Fe]=_t[T]=_t[D]=_t[H]=_t[Z]=_t[G]=_t[X]=_t[ce]=_t[P]=_t[se]=_t[ue]=_t[Me]=!0,_t[Xe]=_t[ft]=_t[Se]=!1;var PM={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},BM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$M={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},HM={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},FM=parseFloat,VM=parseInt,Z1=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,zM=typeof self=="object"&&self&&self.Object===Object&&self,Cn=Z1||zM||Function("return this")(),pp=e&&!e.nodeType&&e,lo=pp&&!0&&t&&!t.nodeType&&t,Q1=lo&&lo.exports===pp,gp=Q1&&Z1.process,kr=function(){try{var I=lo&&lo.require&&lo.require("util").types;return I||gp&&gp.binding&&gp.binding("util")}catch{}}(),ev=kr&&kr.isArrayBuffer,tv=kr&&kr.isDate,nv=kr&&kr.isMap,rv=kr&&kr.isRegExp,iv=kr&&kr.isSet,sv=kr&&kr.isTypedArray;function ar(I,V,B){switch(B.length){case 0:return I.call(V);case 1:return I.call(V,B[0]);case 2:return I.call(V,B[0],B[1]);case 3:return I.call(V,B[0],B[1],B[2])}return I.apply(V,B)}function UM(I,V,B,ke){for(var Ye=-1,yt=I==null?0:I.length;++Ye<yt;){var un=I[Ye];V(ke,un,B(un),I)}return ke}function Er(I,V){for(var B=-1,ke=I==null?0:I.length;++B<ke&&V(I[B],B,I)!==!1;);return I}function WM(I,V){for(var B=I==null?0:I.length;B--&&V(I[B],B,I)!==!1;);return I}function ov(I,V){for(var B=-1,ke=I==null?0:I.length;++B<ke;)if(!V(I[B],B,I))return!1;return!0}function ds(I,V){for(var B=-1,ke=I==null?0:I.length,Ye=0,yt=[];++B<ke;){var un=I[B];V(un,B,I)&&(yt[Ye++]=un)}return yt}function gu(I,V){var B=I==null?0:I.length;return!!B&&cl(I,V,0)>-1}function mp(I,V,B){for(var ke=-1,Ye=I==null?0:I.length;++ke<Ye;)if(B(V,I[ke]))return!0;return!1}function Bt(I,V){for(var B=-1,ke=I==null?0:I.length,Ye=Array(ke);++B<ke;)Ye[B]=V(I[B],B,I);return Ye}function hs(I,V){for(var B=-1,ke=V.length,Ye=I.length;++B<ke;)I[Ye+B]=V[B];return I}function yp(I,V,B,ke){var Ye=-1,yt=I==null?0:I.length;for(ke&&yt&&(B=I[++Ye]);++Ye<yt;)B=V(B,I[Ye],Ye,I);return B}function jM(I,V,B,ke){var Ye=I==null?0:I.length;for(ke&&Ye&&(B=I[--Ye]);Ye--;)B=V(B,I[Ye],Ye,I);return B}function vp(I,V){for(var B=-1,ke=I==null?0:I.length;++B<ke;)if(V(I[B],B,I))return!0;return!1}var KM=bp("length");function qM(I){return I.split("")}function GM(I){return I.match(nM)||[]}function lv(I,V,B){var ke;return B(I,function(Ye,yt,un){if(V(Ye,yt,un))return ke=yt,!1}),ke}function mu(I,V,B,ke){for(var Ye=I.length,yt=B+(ke?1:-1);ke?yt--:++yt<Ye;)if(V(I[yt],yt,I))return yt;return-1}function cl(I,V,B){return V===V?oO(I,V,B):mu(I,av,B)}function JM(I,V,B,ke){for(var Ye=B-1,yt=I.length;++Ye<yt;)if(ke(I[Ye],V))return Ye;return-1}function av(I){return I!==I}function cv(I,V){var B=I==null?0:I.length;return B?xp(I,V)/B:Ee}function bp(I){return function(V){return V==null?n:V[I]}}function wp(I){return function(V){return I==null?n:I[V]}}function uv(I,V,B,ke,Ye){return Ye(I,function(yt,un,Et){B=ke?(ke=!1,yt):V(B,yt,un,Et)}),B}function YM(I,V){var B=I.length;for(I.sort(V);B--;)I[B]=I[B].value;return I}function xp(I,V){for(var B,ke=-1,Ye=I.length;++ke<Ye;){var yt=V(I[ke]);yt!==n&&(B=B===n?yt:B+yt)}return B}function Cp(I,V){for(var B=-1,ke=Array(I);++B<I;)ke[B]=V(B);return ke}function XM(I,V){return Bt(V,function(B){return[B,I[B]]})}function fv(I){return I&&I.slice(0,gv(I)+1).replace(ap,"")}function cr(I){return function(V){return I(V)}}function Sp(I,V){return Bt(V,function(B){return I[B]})}function xa(I,V){return I.has(V)}function dv(I,V){for(var B=-1,ke=I.length;++B<ke&&cl(V,I[B],0)>-1;);return B}function hv(I,V){for(var B=I.length;B--&&cl(V,I[B],0)>-1;);return B}function ZM(I,V){for(var B=I.length,ke=0;B--;)I[B]===V&&++ke;return ke}var QM=wp(PM),eO=wp(BM);function tO(I){return"\\"+HM[I]}function nO(I,V){return I==null?n:I[V]}function ul(I){return LM.test(I)}function rO(I){return IM.test(I)}function iO(I){for(var V,B=[];!(V=I.next()).done;)B.push(V.value);return B}function kp(I){var V=-1,B=Array(I.size);return I.forEach(function(ke,Ye){B[++V]=[Ye,ke]}),B}function pv(I,V){return function(B){return I(V(B))}}function ps(I,V){for(var B=-1,ke=I.length,Ye=0,yt=[];++B<ke;){var un=I[B];(un===V||un===d)&&(I[B]=d,yt[Ye++]=B)}return yt}function yu(I){var V=-1,B=Array(I.size);return I.forEach(function(ke){B[++V]=ke}),B}function sO(I){var V=-1,B=Array(I.size);return I.forEach(function(ke){B[++V]=[ke,ke]}),B}function oO(I,V,B){for(var ke=B-1,Ye=I.length;++ke<Ye;)if(I[ke]===V)return ke;return-1}function lO(I,V,B){for(var ke=B+1;ke--;)if(I[ke]===V)return ke;return ke}function fl(I){return ul(I)?cO(I):KM(I)}function qr(I){return ul(I)?uO(I):qM(I)}function gv(I){for(var V=I.length;V--&&Z_.test(I.charAt(V)););return V}var aO=wp($M);function cO(I){for(var V=hp.lastIndex=0;hp.test(I);)++V;return V}function uO(I){return I.match(hp)||[]}function fO(I){return I.match(RM)||[]}var dO=function I(V){V=V==null?Cn:dl.defaults(Cn.Object(),V,dl.pick(Cn,NM));var B=V.Array,ke=V.Date,Ye=V.Error,yt=V.Function,un=V.Math,Et=V.Object,Ep=V.RegExp,hO=V.String,Ar=V.TypeError,vu=B.prototype,pO=yt.prototype,hl=Et.prototype,bu=V["__core-js_shared__"],wu=pO.toString,wt=hl.hasOwnProperty,gO=0,mv=function(){var a=/[^.]+$/.exec(bu&&bu.keys&&bu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),xu=hl.toString,mO=wu.call(Et),yO=Cn._,vO=Ep("^"+wu.call(wt).replace(lp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cu=Q1?V.Buffer:n,gs=V.Symbol,Su=V.Uint8Array,yv=Cu?Cu.allocUnsafe:n,ku=pv(Et.getPrototypeOf,Et),vv=Et.create,bv=hl.propertyIsEnumerable,Eu=vu.splice,wv=gs?gs.isConcatSpreadable:n,Ca=gs?gs.iterator:n,ao=gs?gs.toStringTag:n,Au=function(){try{var a=po(Et,"defineProperty");return a({},"",{}),a}catch{}}(),bO=V.clearTimeout!==Cn.clearTimeout&&V.clearTimeout,wO=ke&&ke.now!==Cn.Date.now&&ke.now,xO=V.setTimeout!==Cn.setTimeout&&V.setTimeout,Tu=un.ceil,_u=un.floor,Ap=Et.getOwnPropertySymbols,CO=Cu?Cu.isBuffer:n,xv=V.isFinite,SO=vu.join,kO=pv(Et.keys,Et),fn=un.max,Rn=un.min,EO=ke.now,AO=V.parseInt,Cv=un.random,TO=vu.reverse,Tp=po(V,"DataView"),Sa=po(V,"Map"),_p=po(V,"Promise"),pl=po(V,"Set"),ka=po(V,"WeakMap"),Ea=po(Et,"create"),Mu=ka&&new ka,gl={},_O=go(Tp),MO=go(Sa),OO=go(_p),RO=go(pl),LO=go(ka),Ou=gs?gs.prototype:n,Aa=Ou?Ou.valueOf:n,Sv=Ou?Ou.toString:n;function S(a){if(Gt(a)&&!Ze(a)&&!(a instanceof ut)){if(a instanceof Tr)return a;if(wt.call(a,"__wrapped__"))return kb(a)}return new Tr(a)}var ml=function(){function a(){}return function(f){if(!zt(f))return{};if(vv)return vv(f);a.prototype=f;var g=new a;return a.prototype=n,g}}();function Ru(){}function Tr(a,f){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=n}S.templateSettings={escape:ol,evaluate:fs,interpolate:fu,variable:"",imports:{_:S}},S.prototype=Ru.prototype,S.prototype.constructor=S,Tr.prototype=ml(Ru.prototype),Tr.prototype.constructor=Tr;function ut(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function IO(){var a=new ut(this.__wrapped__);return a.__actions__=Jn(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Jn(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Jn(this.__views__),a}function NO(){if(this.__filtered__){var a=new ut(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function DO(){var a=this.__wrapped__.value(),f=this.__dir__,g=Ze(a),v=f<0,w=g?a.length:0,k=qR(0,w,this.__views__),_=k.start,O=k.end,N=O-_,K=v?O:_-1,q=this.__iteratees__,Q=q.length,ye=0,Oe=Rn(N,this.__takeCount__);if(!g||!v&&w==N&&Oe==N)return qv(a,this.__actions__);var ze=[];e:for(;N--&&ye<Oe;){K+=f;for(var it=-1,Ue=a[K];++it<Q;){var ct=q[it],dt=ct.iteratee,dr=ct.type,zn=dt(Ue);if(dr==rt)Ue=zn;else if(!zn){if(dr==Qe)continue e;break e}}ze[ye++]=Ue}return ze}ut.prototype=ml(Ru.prototype),ut.prototype.constructor=ut;function co(a){var f=-1,g=a==null?0:a.length;for(this.clear();++f<g;){var v=a[f];this.set(v[0],v[1])}}function PO(){this.__data__=Ea?Ea(null):{},this.size=0}function BO(a){var f=this.has(a)&&delete this.__data__[a];return this.size-=f?1:0,f}function $O(a){var f=this.__data__;if(Ea){var g=f[a];return g===c?n:g}return wt.call(f,a)?f[a]:n}function HO(a){var f=this.__data__;return Ea?f[a]!==n:wt.call(f,a)}function FO(a,f){var g=this.__data__;return this.size+=this.has(a)?0:1,g[a]=Ea&&f===n?c:f,this}co.prototype.clear=PO,co.prototype.delete=BO,co.prototype.get=$O,co.prototype.has=HO,co.prototype.set=FO;function Fi(a){var f=-1,g=a==null?0:a.length;for(this.clear();++f<g;){var v=a[f];this.set(v[0],v[1])}}function VO(){this.__data__=[],this.size=0}function zO(a){var f=this.__data__,g=Lu(f,a);if(g<0)return!1;var v=f.length-1;return g==v?f.pop():Eu.call(f,g,1),--this.size,!0}function UO(a){var f=this.__data__,g=Lu(f,a);return g<0?n:f[g][1]}function WO(a){return Lu(this.__data__,a)>-1}function jO(a,f){var g=this.__data__,v=Lu(g,a);return v<0?(++this.size,g.push([a,f])):g[v][1]=f,this}Fi.prototype.clear=VO,Fi.prototype.delete=zO,Fi.prototype.get=UO,Fi.prototype.has=WO,Fi.prototype.set=jO;function Vi(a){var f=-1,g=a==null?0:a.length;for(this.clear();++f<g;){var v=a[f];this.set(v[0],v[1])}}function KO(){this.size=0,this.__data__={hash:new co,map:new(Sa||Fi),string:new co}}function qO(a){var f=Wu(this,a).delete(a);return this.size-=f?1:0,f}function GO(a){return Wu(this,a).get(a)}function JO(a){return Wu(this,a).has(a)}function YO(a,f){var g=Wu(this,a),v=g.size;return g.set(a,f),this.size+=g.size==v?0:1,this}Vi.prototype.clear=KO,Vi.prototype.delete=qO,Vi.prototype.get=GO,Vi.prototype.has=JO,Vi.prototype.set=YO;function uo(a){var f=-1,g=a==null?0:a.length;for(this.__data__=new Vi;++f<g;)this.add(a[f])}function XO(a){return this.__data__.set(a,c),this}function ZO(a){return this.__data__.has(a)}uo.prototype.add=uo.prototype.push=XO,uo.prototype.has=ZO;function Gr(a){var f=this.__data__=new Fi(a);this.size=f.size}function QO(){this.__data__=new Fi,this.size=0}function eR(a){var f=this.__data__,g=f.delete(a);return this.size=f.size,g}function tR(a){return this.__data__.get(a)}function nR(a){return this.__data__.has(a)}function rR(a,f){var g=this.__data__;if(g instanceof Fi){var v=g.__data__;if(!Sa||v.length<i-1)return v.push([a,f]),this.size=++g.size,this;g=this.__data__=new Vi(v)}return g.set(a,f),this.size=g.size,this}Gr.prototype.clear=QO,Gr.prototype.delete=eR,Gr.prototype.get=tR,Gr.prototype.has=nR,Gr.prototype.set=rR;function kv(a,f){var g=Ze(a),v=!g&&mo(a),w=!g&&!v&&ws(a),k=!g&&!v&&!w&&wl(a),_=g||v||w||k,O=_?Cp(a.length,hO):[],N=O.length;for(var K in a)(f||wt.call(a,K))&&!(_&&(K=="length"||w&&(K=="offset"||K=="parent")||k&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||ji(K,N)))&&O.push(K);return O}function Ev(a){var f=a.length;return f?a[Hp(0,f-1)]:n}function iR(a,f){return ju(Jn(a),fo(f,0,a.length))}function sR(a){return ju(Jn(a))}function Mp(a,f,g){(g!==n&&!Jr(a[f],g)||g===n&&!(f in a))&&zi(a,f,g)}function Ta(a,f,g){var v=a[f];(!(wt.call(a,f)&&Jr(v,g))||g===n&&!(f in a))&&zi(a,f,g)}function Lu(a,f){for(var g=a.length;g--;)if(Jr(a[g][0],f))return g;return-1}function oR(a,f,g,v){return ms(a,function(w,k,_){f(v,w,g(w),_)}),v}function Av(a,f){return a&&pi(f,mn(f),a)}function lR(a,f){return a&&pi(f,Xn(f),a)}function zi(a,f,g){f=="__proto__"&&Au?Au(a,f,{configurable:!0,enumerable:!0,value:g,writable:!0}):a[f]=g}function Op(a,f){for(var g=-1,v=f.length,w=B(v),k=a==null;++g<v;)w[g]=k?n:ug(a,f[g]);return w}function fo(a,f,g){return a===a&&(g!==n&&(a=a<=g?a:g),f!==n&&(a=a>=f?a:f)),a}function _r(a,f,g,v,w,k){var _,O=f&h,N=f&p,K=f&m;if(g&&(_=w?g(a,v,w,k):g(a)),_!==n)return _;if(!zt(a))return a;var q=Ze(a);if(q){if(_=JR(a),!O)return Jn(a,_)}else{var Q=Ln(a),ye=Q==ft||Q==E;if(ws(a))return Yv(a,O);if(Q==H||Q==De||ye&&!w){if(_=N||ye?{}:gb(a),!O)return N?$R(a,lR(_,a)):BR(a,Av(_,a))}else{if(!_t[Q])return w?a:{};_=YR(a,Q,O)}}k||(k=new Gr);var Oe=k.get(a);if(Oe)return Oe;k.set(a,_),Wb(a)?a.forEach(function(Ue){_.add(_r(Ue,f,g,Ue,a,k))}):zb(a)&&a.forEach(function(Ue,ct){_.set(ct,_r(Ue,f,g,ct,a,k))});var ze=K?N?Yp:Jp:N?Xn:mn,it=q?n:ze(a);return Er(it||a,function(Ue,ct){it&&(ct=Ue,Ue=a[ct]),Ta(_,ct,_r(Ue,f,g,ct,a,k))}),_}function aR(a){var f=mn(a);return function(g){return Tv(g,a,f)}}function Tv(a,f,g){var v=g.length;if(a==null)return!v;for(a=Et(a);v--;){var w=g[v],k=f[w],_=a[w];if(_===n&&!(w in a)||!k(_))return!1}return!0}function _v(a,f,g){if(typeof a!="function")throw new Ar(o);return Na(function(){a.apply(n,g)},f)}function _a(a,f,g,v){var w=-1,k=gu,_=!0,O=a.length,N=[],K=f.length;if(!O)return N;g&&(f=Bt(f,cr(g))),v?(k=mp,_=!1):f.length>=i&&(k=xa,_=!1,f=new uo(f));e:for(;++w<O;){var q=a[w],Q=g==null?q:g(q);if(q=v||q!==0?q:0,_&&Q===Q){for(var ye=K;ye--;)if(f[ye]===Q)continue e;N.push(q)}else k(f,Q,v)||N.push(q)}return N}var ms=tb(hi),Mv=tb(Lp,!0);function cR(a,f){var g=!0;return ms(a,function(v,w,k){return g=!!f(v,w,k),g}),g}function Iu(a,f,g){for(var v=-1,w=a.length;++v<w;){var k=a[v],_=f(k);if(_!=null&&(O===n?_===_&&!fr(_):g(_,O)))var O=_,N=k}return N}function uR(a,f,g,v){var w=a.length;for(g=tt(g),g<0&&(g=-g>w?0:w+g),v=v===n||v>w?w:tt(v),v<0&&(v+=w),v=g>v?0:Kb(v);g<v;)a[g++]=f;return a}function Ov(a,f){var g=[];return ms(a,function(v,w,k){f(v,w,k)&&g.push(v)}),g}function Sn(a,f,g,v,w){var k=-1,_=a.length;for(g||(g=ZR),w||(w=[]);++k<_;){var O=a[k];f>0&&g(O)?f>1?Sn(O,f-1,g,v,w):hs(w,O):v||(w[w.length]=O)}return w}var Rp=nb(),Rv=nb(!0);function hi(a,f){return a&&Rp(a,f,mn)}function Lp(a,f){return a&&Rv(a,f,mn)}function Nu(a,f){return ds(f,function(g){return Ki(a[g])})}function ho(a,f){f=vs(f,a);for(var g=0,v=f.length;a!=null&&g<v;)a=a[gi(f[g++])];return g&&g==v?a:n}function Lv(a,f,g){var v=f(a);return Ze(a)?v:hs(v,g(a))}function Fn(a){return a==null?a===n?Te:z:ao&&ao in Et(a)?KR(a):sL(a)}function Ip(a,f){return a>f}function fR(a,f){return a!=null&&wt.call(a,f)}function dR(a,f){return a!=null&&f in Et(a)}function hR(a,f,g){return a>=Rn(f,g)&&a<fn(f,g)}function Np(a,f,g){for(var v=g?mp:gu,w=a[0].length,k=a.length,_=k,O=B(k),N=1/0,K=[];_--;){var q=a[_];_&&f&&(q=Bt(q,cr(f))),N=Rn(q.length,N),O[_]=!g&&(f||w>=120&&q.length>=120)?new uo(_&&q):n}q=a[0];var Q=-1,ye=O[0];e:for(;++Q<w&&K.length<N;){var Oe=q[Q],ze=f?f(Oe):Oe;if(Oe=g||Oe!==0?Oe:0,!(ye?xa(ye,ze):v(K,ze,g))){for(_=k;--_;){var it=O[_];if(!(it?xa(it,ze):v(a[_],ze,g)))continue e}ye&&ye.push(ze),K.push(Oe)}}return K}function pR(a,f,g,v){return hi(a,function(w,k,_){f(v,g(w),k,_)}),v}function Ma(a,f,g){f=vs(f,a),a=bb(a,f);var v=a==null?a:a[gi(Or(f))];return v==null?n:ar(v,a,g)}function Iv(a){return Gt(a)&&Fn(a)==De}function gR(a){return Gt(a)&&Fn(a)==je}function mR(a){return Gt(a)&&Fn(a)==ie}function Oa(a,f,g,v,w){return a===f?!0:a==null||f==null||!Gt(a)&&!Gt(f)?a!==a&&f!==f:yR(a,f,g,v,Oa,w)}function yR(a,f,g,v,w,k){var _=Ze(a),O=Ze(f),N=_?Le:Ln(a),K=O?Le:Ln(f);N=N==De?H:N,K=K==De?H:K;var q=N==H,Q=K==H,ye=N==K;if(ye&&ws(a)){if(!ws(f))return!1;_=!0,q=!1}if(ye&&!q)return k||(k=new Gr),_||wl(a)?db(a,f,g,v,w,k):WR(a,f,N,g,v,w,k);if(!(g&y)){var Oe=q&&wt.call(a,"__wrapped__"),ze=Q&&wt.call(f,"__wrapped__");if(Oe||ze){var it=Oe?a.value():a,Ue=ze?f.value():f;return k||(k=new Gr),w(it,Ue,g,v,k)}}return ye?(k||(k=new Gr),jR(a,f,g,v,w,k)):!1}function vR(a){return Gt(a)&&Ln(a)==T}function Dp(a,f,g,v){var w=g.length,k=w,_=!v;if(a==null)return!k;for(a=Et(a);w--;){var O=g[w];if(_&&O[2]?O[1]!==a[O[0]]:!(O[0]in a))return!1}for(;++w<k;){O=g[w];var N=O[0],K=a[N],q=O[1];if(_&&O[2]){if(K===n&&!(N in a))return!1}else{var Q=new Gr;if(v)var ye=v(K,q,N,a,f,Q);if(!(ye===n?Oa(q,K,y|b,v,Q):ye))return!1}}return!0}function Nv(a){if(!zt(a)||eL(a))return!1;var f=Ki(a)?vO:aM;return f.test(go(a))}function bR(a){return Gt(a)&&Fn(a)==Z}function wR(a){return Gt(a)&&Ln(a)==G}function xR(a){return Gt(a)&&Xu(a.length)&&!!Rt[Fn(a)]}function Dv(a){return typeof a=="function"?a:a==null?Zn:typeof a=="object"?Ze(a)?$v(a[0],a[1]):Bv(a):rw(a)}function Pp(a){if(!Ia(a))return kO(a);var f=[];for(var g in Et(a))wt.call(a,g)&&g!="constructor"&&f.push(g);return f}function CR(a){if(!zt(a))return iL(a);var f=Ia(a),g=[];for(var v in a)v=="constructor"&&(f||!wt.call(a,v))||g.push(v);return g}function Bp(a,f){return a<f}function Pv(a,f){var g=-1,v=Yn(a)?B(a.length):[];return ms(a,function(w,k,_){v[++g]=f(w,k,_)}),v}function Bv(a){var f=Zp(a);return f.length==1&&f[0][2]?yb(f[0][0],f[0][1]):function(g){return g===a||Dp(g,a,f)}}function $v(a,f){return eg(a)&&mb(f)?yb(gi(a),f):function(g){var v=ug(g,a);return v===n&&v===f?fg(g,a):Oa(f,v,y|b)}}function Du(a,f,g,v,w){a!==f&&Rp(f,function(k,_){if(w||(w=new Gr),zt(k))SR(a,f,_,g,Du,v,w);else{var O=v?v(ng(a,_),k,_+"",a,f,w):n;O===n&&(O=k),Mp(a,_,O)}},Xn)}function SR(a,f,g,v,w,k,_){var O=ng(a,g),N=ng(f,g),K=_.get(N);if(K){Mp(a,g,K);return}var q=k?k(O,N,g+"",a,f,_):n,Q=q===n;if(Q){var ye=Ze(N),Oe=!ye&&ws(N),ze=!ye&&!Oe&&wl(N);q=N,ye||Oe||ze?Ze(O)?q=O:Qt(O)?q=Jn(O):Oe?(Q=!1,q=Yv(N,!0)):ze?(Q=!1,q=Xv(N,!0)):q=[]:Da(N)||mo(N)?(q=O,mo(O)?q=qb(O):(!zt(O)||Ki(O))&&(q=gb(N))):Q=!1}Q&&(_.set(N,q),w(q,N,v,k,_),_.delete(N)),Mp(a,g,q)}function Hv(a,f){var g=a.length;if(g)return f+=f<0?g:0,ji(f,g)?a[f]:n}function Fv(a,f,g){f.length?f=Bt(f,function(k){return Ze(k)?function(_){return ho(_,k.length===1?k[0]:k)}:k}):f=[Zn];var v=-1;f=Bt(f,cr(Ve()));var w=Pv(a,function(k,_,O){var N=Bt(f,function(K){return K(k)});return{criteria:N,index:++v,value:k}});return YM(w,function(k,_){return PR(k,_,g)})}function kR(a,f){return Vv(a,f,function(g,v){return fg(a,v)})}function Vv(a,f,g){for(var v=-1,w=f.length,k={};++v<w;){var _=f[v],O=ho(a,_);g(O,_)&&Ra(k,vs(_,a),O)}return k}function ER(a){return function(f){return ho(f,a)}}function $p(a,f,g,v){var w=v?JM:cl,k=-1,_=f.length,O=a;for(a===f&&(f=Jn(f)),g&&(O=Bt(a,cr(g)));++k<_;)for(var N=0,K=f[k],q=g?g(K):K;(N=w(O,q,N,v))>-1;)O!==a&&Eu.call(O,N,1),Eu.call(a,N,1);return a}function zv(a,f){for(var g=a?f.length:0,v=g-1;g--;){var w=f[g];if(g==v||w!==k){var k=w;ji(w)?Eu.call(a,w,1):zp(a,w)}}return a}function Hp(a,f){return a+_u(Cv()*(f-a+1))}function AR(a,f,g,v){for(var w=-1,k=fn(Tu((f-a)/(g||1)),0),_=B(k);k--;)_[v?k:++w]=a,a+=g;return _}function Fp(a,f){var g="";if(!a||f<1||f>j)return g;do f%2&&(g+=a),f=_u(f/2),f&&(a+=a);while(f);return g}function ot(a,f){return rg(vb(a,f,Zn),a+"")}function TR(a){return Ev(xl(a))}function _R(a,f){var g=xl(a);return ju(g,fo(f,0,g.length))}function Ra(a,f,g,v){if(!zt(a))return a;f=vs(f,a);for(var w=-1,k=f.length,_=k-1,O=a;O!=null&&++w<k;){var N=gi(f[w]),K=g;if(N==="__proto__"||N==="constructor"||N==="prototype")return a;if(w!=_){var q=O[N];K=v?v(q,N,O):n,K===n&&(K=zt(q)?q:ji(f[w+1])?[]:{})}Ta(O,N,K),O=O[N]}return a}var Uv=Mu?function(a,f){return Mu.set(a,f),a}:Zn,MR=Au?function(a,f){return Au(a,"toString",{configurable:!0,enumerable:!1,value:hg(f),writable:!0})}:Zn;function OR(a){return ju(xl(a))}function Mr(a,f,g){var v=-1,w=a.length;f<0&&(f=-f>w?0:w+f),g=g>w?w:g,g<0&&(g+=w),w=f>g?0:g-f>>>0,f>>>=0;for(var k=B(w);++v<w;)k[v]=a[v+f];return k}function RR(a,f){var g;return ms(a,function(v,w,k){return g=f(v,w,k),!g}),!!g}function Pu(a,f,g){var v=0,w=a==null?v:a.length;if(typeof f=="number"&&f===f&&w<=_e){for(;v<w;){var k=v+w>>>1,_=a[k];_!==null&&!fr(_)&&(g?_<=f:_<f)?v=k+1:w=k}return w}return Vp(a,f,Zn,g)}function Vp(a,f,g,v){var w=0,k=a==null?0:a.length;if(k===0)return 0;f=g(f);for(var _=f!==f,O=f===null,N=fr(f),K=f===n;w<k;){var q=_u((w+k)/2),Q=g(a[q]),ye=Q!==n,Oe=Q===null,ze=Q===Q,it=fr(Q);if(_)var Ue=v||ze;else K?Ue=ze&&(v||ye):O?Ue=ze&&ye&&(v||!Oe):N?Ue=ze&&ye&&!Oe&&(v||!it):Oe||it?Ue=!1:Ue=v?Q<=f:Q<f;Ue?w=q+1:k=q}return Rn(k,we)}function Wv(a,f){for(var g=-1,v=a.length,w=0,k=[];++g<v;){var _=a[g],O=f?f(_):_;if(!g||!Jr(O,N)){var N=O;k[w++]=_===0?0:_}}return k}function jv(a){return typeof a=="number"?a:fr(a)?Ee:+a}function ur(a){if(typeof a=="string")return a;if(Ze(a))return Bt(a,ur)+"";if(fr(a))return Sv?Sv.call(a):"";var f=a+"";return f=="0"&&1/a==-be?"-0":f}function ys(a,f,g){var v=-1,w=gu,k=a.length,_=!0,O=[],N=O;if(g)_=!1,w=mp;else if(k>=i){var K=f?null:zR(a);if(K)return yu(K);_=!1,w=xa,N=new uo}else N=f?[]:O;e:for(;++v<k;){var q=a[v],Q=f?f(q):q;if(q=g||q!==0?q:0,_&&Q===Q){for(var ye=N.length;ye--;)if(N[ye]===Q)continue e;f&&N.push(Q),O.push(q)}else w(N,Q,g)||(N!==O&&N.push(Q),O.push(q))}return O}function zp(a,f){return f=vs(f,a),a=bb(a,f),a==null||delete a[gi(Or(f))]}function Kv(a,f,g,v){return Ra(a,f,g(ho(a,f)),v)}function Bu(a,f,g,v){for(var w=a.length,k=v?w:-1;(v?k--:++k<w)&&f(a[k],k,a););return g?Mr(a,v?0:k,v?k+1:w):Mr(a,v?k+1:0,v?w:k)}function qv(a,f){var g=a;return g instanceof ut&&(g=g.value()),yp(f,function(v,w){return w.func.apply(w.thisArg,hs([v],w.args))},g)}function Up(a,f,g){var v=a.length;if(v<2)return v?ys(a[0]):[];for(var w=-1,k=B(v);++w<v;)for(var _=a[w],O=-1;++O<v;)O!=w&&(k[w]=_a(k[w]||_,a[O],f,g));return ys(Sn(k,1),f,g)}function Gv(a,f,g){for(var v=-1,w=a.length,k=f.length,_={};++v<w;){var O=v<k?f[v]:n;g(_,a[v],O)}return _}function Wp(a){return Qt(a)?a:[]}function jp(a){return typeof a=="function"?a:Zn}function vs(a,f){return Ze(a)?a:eg(a,f)?[a]:Sb(vt(a))}var LR=ot;function bs(a,f,g){var v=a.length;return g=g===n?v:g,!f&&g>=v?a:Mr(a,f,g)}var Jv=bO||function(a){return Cn.clearTimeout(a)};function Yv(a,f){if(f)return a.slice();var g=a.length,v=yv?yv(g):new a.constructor(g);return a.copy(v),v}function Kp(a){var f=new a.constructor(a.byteLength);return new Su(f).set(new Su(a)),f}function IR(a,f){var g=f?Kp(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.byteLength)}function NR(a){var f=new a.constructor(a.source,I1.exec(a));return f.lastIndex=a.lastIndex,f}function DR(a){return Aa?Et(Aa.call(a)):{}}function Xv(a,f){var g=f?Kp(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.length)}function Zv(a,f){if(a!==f){var g=a!==n,v=a===null,w=a===a,k=fr(a),_=f!==n,O=f===null,N=f===f,K=fr(f);if(!O&&!K&&!k&&a>f||k&&_&&N&&!O&&!K||v&&_&&N||!g&&N||!w)return 1;if(!v&&!k&&!K&&a<f||K&&g&&w&&!v&&!k||O&&g&&w||!_&&w||!N)return-1}return 0}function PR(a,f,g){for(var v=-1,w=a.criteria,k=f.criteria,_=w.length,O=g.length;++v<_;){var N=Zv(w[v],k[v]);if(N){if(v>=O)return N;var K=g[v];return N*(K=="desc"?-1:1)}}return a.index-f.index}function Qv(a,f,g,v){for(var w=-1,k=a.length,_=g.length,O=-1,N=f.length,K=fn(k-_,0),q=B(N+K),Q=!v;++O<N;)q[O]=f[O];for(;++w<_;)(Q||w<k)&&(q[g[w]]=a[w]);for(;K--;)q[O++]=a[w++];return q}function eb(a,f,g,v){for(var w=-1,k=a.length,_=-1,O=g.length,N=-1,K=f.length,q=fn(k-O,0),Q=B(q+K),ye=!v;++w<q;)Q[w]=a[w];for(var Oe=w;++N<K;)Q[Oe+N]=f[N];for(;++_<O;)(ye||w<k)&&(Q[Oe+g[_]]=a[w++]);return Q}function Jn(a,f){var g=-1,v=a.length;for(f||(f=B(v));++g<v;)f[g]=a[g];return f}function pi(a,f,g,v){var w=!g;g||(g={});for(var k=-1,_=f.length;++k<_;){var O=f[k],N=v?v(g[O],a[O],O,g,a):n;N===n&&(N=a[O]),w?zi(g,O,N):Ta(g,O,N)}return g}function BR(a,f){return pi(a,Qp(a),f)}function $R(a,f){return pi(a,hb(a),f)}function $u(a,f){return function(g,v){var w=Ze(g)?UM:oR,k=f?f():{};return w(g,a,Ve(v,2),k)}}function yl(a){return ot(function(f,g){var v=-1,w=g.length,k=w>1?g[w-1]:n,_=w>2?g[2]:n;for(k=a.length>3&&typeof k=="function"?(w--,k):n,_&&Vn(g[0],g[1],_)&&(k=w<3?n:k,w=1),f=Et(f);++v<w;){var O=g[v];O&&a(f,O,v,k)}return f})}function tb(a,f){return function(g,v){if(g==null)return g;if(!Yn(g))return a(g,v);for(var w=g.length,k=f?w:-1,_=Et(g);(f?k--:++k<w)&&v(_[k],k,_)!==!1;);return g}}function nb(a){return function(f,g,v){for(var w=-1,k=Et(f),_=v(f),O=_.length;O--;){var N=_[a?O:++w];if(g(k[N],N,k)===!1)break}return f}}function HR(a,f,g){var v=f&x,w=La(a);function k(){var _=this&&this!==Cn&&this instanceof k?w:a;return _.apply(v?g:this,arguments)}return k}function rb(a){return function(f){f=vt(f);var g=ul(f)?qr(f):n,v=g?g[0]:f.charAt(0),w=g?bs(g,1).join(""):f.slice(1);return v[a]()+w}}function vl(a){return function(f){return yp(tw(ew(f).replace(MM,"")),a,"")}}function La(a){return function(){var f=arguments;switch(f.length){case 0:return new a;case 1:return new a(f[0]);case 2:return new a(f[0],f[1]);case 3:return new a(f[0],f[1],f[2]);case 4:return new a(f[0],f[1],f[2],f[3]);case 5:return new a(f[0],f[1],f[2],f[3],f[4]);case 6:return new a(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new a(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var g=ml(a.prototype),v=a.apply(g,f);return zt(v)?v:g}}function FR(a,f,g){var v=La(a);function w(){for(var k=arguments.length,_=B(k),O=k,N=bl(w);O--;)_[O]=arguments[O];var K=k<3&&_[0]!==N&&_[k-1]!==N?[]:ps(_,N);if(k-=K.length,k<g)return ab(a,f,Hu,w.placeholder,n,_,K,n,n,g-k);var q=this&&this!==Cn&&this instanceof w?v:a;return ar(q,this,_)}return w}function ib(a){return function(f,g,v){var w=Et(f);if(!Yn(f)){var k=Ve(g,3);f=mn(f),g=function(O){return k(w[O],O,w)}}var _=a(f,g,v);return _>-1?w[k?f[_]:_]:n}}function sb(a){return Wi(function(f){var g=f.length,v=g,w=Tr.prototype.thru;for(a&&f.reverse();v--;){var k=f[v];if(typeof k!="function")throw new Ar(o);if(w&&!_&&Uu(k)=="wrapper")var _=new Tr([],!0)}for(v=_?v:g;++v<g;){k=f[v];var O=Uu(k),N=O=="wrapper"?Xp(k):n;N&&tg(N[0])&&N[1]==(U|L|F|W)&&!N[4].length&&N[9]==1?_=_[Uu(N[0])].apply(_,N[3]):_=k.length==1&&tg(k)?_[O]():_.thru(k)}return function(){var K=arguments,q=K[0];if(_&&K.length==1&&Ze(q))return _.plant(q).value();for(var Q=0,ye=g?f[Q].apply(this,K):q;++Q<g;)ye=f[Q].call(this,ye);return ye}})}function Hu(a,f,g,v,w,k,_,O,N,K){var q=f&U,Q=f&x,ye=f&C,Oe=f&(L|A),ze=f&ee,it=ye?n:La(a);function Ue(){for(var ct=arguments.length,dt=B(ct),dr=ct;dr--;)dt[dr]=arguments[dr];if(Oe)var zn=bl(Ue),hr=ZM(dt,zn);if(v&&(dt=Qv(dt,v,w,Oe)),k&&(dt=eb(dt,k,_,Oe)),ct-=hr,Oe&&ct<K){var en=ps(dt,zn);return ab(a,f,Hu,Ue.placeholder,g,dt,en,O,N,K-ct)}var Yr=Q?g:this,Gi=ye?Yr[a]:a;return ct=dt.length,O?dt=oL(dt,O):ze&&ct>1&&dt.reverse(),q&&N<ct&&(dt.length=N),this&&this!==Cn&&this instanceof Ue&&(Gi=it||La(Gi)),Gi.apply(Yr,dt)}return Ue}function ob(a,f){return function(g,v){return pR(g,a,f(v),{})}}function Fu(a,f){return function(g,v){var w;if(g===n&&v===n)return f;if(g!==n&&(w=g),v!==n){if(w===n)return v;typeof g=="string"||typeof v=="string"?(g=ur(g),v=ur(v)):(g=jv(g),v=jv(v)),w=a(g,v)}return w}}function qp(a){return Wi(function(f){return f=Bt(f,cr(Ve())),ot(function(g){var v=this;return a(f,function(w){return ar(w,v,g)})})})}function Vu(a,f){f=f===n?" ":ur(f);var g=f.length;if(g<2)return g?Fp(f,a):f;var v=Fp(f,Tu(a/fl(f)));return ul(f)?bs(qr(v),0,a).join(""):v.slice(0,a)}function VR(a,f,g,v){var w=f&x,k=La(a);function _(){for(var O=-1,N=arguments.length,K=-1,q=v.length,Q=B(q+N),ye=this&&this!==Cn&&this instanceof _?k:a;++K<q;)Q[K]=v[K];for(;N--;)Q[K++]=arguments[++O];return ar(ye,w?g:this,Q)}return _}function lb(a){return function(f,g,v){return v&&typeof v!="number"&&Vn(f,g,v)&&(g=v=n),f=qi(f),g===n?(g=f,f=0):g=qi(g),v=v===n?f<g?1:-1:qi(v),AR(f,g,v,a)}}function zu(a){return function(f,g){return typeof f=="string"&&typeof g=="string"||(f=Rr(f),g=Rr(g)),a(f,g)}}function ab(a,f,g,v,w,k,_,O,N,K){var q=f&L,Q=q?_:n,ye=q?n:_,Oe=q?k:n,ze=q?n:k;f|=q?F:R,f&=~(q?R:F),f&M||(f&=~(x|C));var it=[a,f,w,Oe,Q,ze,ye,O,N,K],Ue=g.apply(n,it);return tg(a)&&wb(Ue,it),Ue.placeholder=v,xb(Ue,a,f)}function Gp(a){var f=un[a];return function(g,v){if(g=Rr(g),v=v==null?0:Rn(tt(v),292),v&&xv(g)){var w=(vt(g)+"e").split("e"),k=f(w[0]+"e"+(+w[1]+v));return w=(vt(k)+"e").split("e"),+(w[0]+"e"+(+w[1]-v))}return f(g)}}var zR=pl&&1/yu(new pl([,-0]))[1]==be?function(a){return new pl(a)}:mg;function cb(a){return function(f){var g=Ln(f);return g==T?kp(f):g==G?sO(f):XM(f,a(f))}}function Ui(a,f,g,v,w,k,_,O){var N=f&C;if(!N&&typeof a!="function")throw new Ar(o);var K=v?v.length:0;if(K||(f&=~(F|R),v=w=n),_=_===n?_:fn(tt(_),0),O=O===n?O:tt(O),K-=w?w.length:0,f&R){var q=v,Q=w;v=w=n}var ye=N?n:Xp(a),Oe=[a,f,g,v,w,q,Q,k,_,O];if(ye&&rL(Oe,ye),a=Oe[0],f=Oe[1],g=Oe[2],v=Oe[3],w=Oe[4],O=Oe[9]=Oe[9]===n?N?0:a.length:fn(Oe[9]-K,0),!O&&f&(L|A)&&(f&=~(L|A)),!f||f==x)var ze=HR(a,f,g);else f==L||f==A?ze=FR(a,f,O):(f==F||f==(x|F))&&!w.length?ze=VR(a,f,g,v):ze=Hu.apply(n,Oe);var it=ye?Uv:wb;return xb(it(ze,Oe),a,f)}function ub(a,f,g,v){return a===n||Jr(a,hl[g])&&!wt.call(v,g)?f:a}function fb(a,f,g,v,w,k){return zt(a)&&zt(f)&&(k.set(f,a),Du(a,f,n,fb,k),k.delete(f)),a}function UR(a){return Da(a)?n:a}function db(a,f,g,v,w,k){var _=g&y,O=a.length,N=f.length;if(O!=N&&!(_&&N>O))return!1;var K=k.get(a),q=k.get(f);if(K&&q)return K==f&&q==a;var Q=-1,ye=!0,Oe=g&b?new uo:n;for(k.set(a,f),k.set(f,a);++Q<O;){var ze=a[Q],it=f[Q];if(v)var Ue=_?v(it,ze,Q,f,a,k):v(ze,it,Q,a,f,k);if(Ue!==n){if(Ue)continue;ye=!1;break}if(Oe){if(!vp(f,function(ct,dt){if(!xa(Oe,dt)&&(ze===ct||w(ze,ct,g,v,k)))return Oe.push(dt)})){ye=!1;break}}else if(!(ze===it||w(ze,it,g,v,k))){ye=!1;break}}return k.delete(a),k.delete(f),ye}function WR(a,f,g,v,w,k,_){switch(g){case Ge:if(a.byteLength!=f.byteLength||a.byteOffset!=f.byteOffset)return!1;a=a.buffer,f=f.buffer;case je:return!(a.byteLength!=f.byteLength||!k(new Su(a),new Su(f)));case re:case ie:case D:return Jr(+a,+f);case Xe:return a.name==f.name&&a.message==f.message;case Z:case X:return a==f+"";case T:var O=kp;case G:var N=v&y;if(O||(O=yu),a.size!=f.size&&!N)return!1;var K=_.get(a);if(K)return K==f;v|=b,_.set(a,f);var q=db(O(a),O(f),v,w,k,_);return _.delete(a),q;case ce:if(Aa)return Aa.call(a)==Aa.call(f)}return!1}function jR(a,f,g,v,w,k){var _=g&y,O=Jp(a),N=O.length,K=Jp(f),q=K.length;if(N!=q&&!_)return!1;for(var Q=N;Q--;){var ye=O[Q];if(!(_?ye in f:wt.call(f,ye)))return!1}var Oe=k.get(a),ze=k.get(f);if(Oe&&ze)return Oe==f&&ze==a;var it=!0;k.set(a,f),k.set(f,a);for(var Ue=_;++Q<N;){ye=O[Q];var ct=a[ye],dt=f[ye];if(v)var dr=_?v(dt,ct,ye,f,a,k):v(ct,dt,ye,a,f,k);if(!(dr===n?ct===dt||w(ct,dt,g,v,k):dr)){it=!1;break}Ue||(Ue=ye=="constructor")}if(it&&!Ue){var zn=a.constructor,hr=f.constructor;zn!=hr&&"constructor"in a&&"constructor"in f&&!(typeof zn=="function"&&zn instanceof zn&&typeof hr=="function"&&hr instanceof hr)&&(it=!1)}return k.delete(a),k.delete(f),it}function Wi(a){return rg(vb(a,n,Tb),a+"")}function Jp(a){return Lv(a,mn,Qp)}function Yp(a){return Lv(a,Xn,hb)}var Xp=Mu?function(a){return Mu.get(a)}:mg;function Uu(a){for(var f=a.name+"",g=gl[f],v=wt.call(gl,f)?g.length:0;v--;){var w=g[v],k=w.func;if(k==null||k==a)return w.name}return f}function bl(a){var f=wt.call(S,"placeholder")?S:a;return f.placeholder}function Ve(){var a=S.iteratee||pg;return a=a===pg?Dv:a,arguments.length?a(arguments[0],arguments[1]):a}function Wu(a,f){var g=a.__data__;return QR(f)?g[typeof f=="string"?"string":"hash"]:g.map}function Zp(a){for(var f=mn(a),g=f.length;g--;){var v=f[g],w=a[v];f[g]=[v,w,mb(w)]}return f}function po(a,f){var g=nO(a,f);return Nv(g)?g:n}function KR(a){var f=wt.call(a,ao),g=a[ao];try{a[ao]=n;var v=!0}catch{}var w=xu.call(a);return v&&(f?a[ao]=g:delete a[ao]),w}var Qp=Ap?function(a){return a==null?[]:(a=Et(a),ds(Ap(a),function(f){return bv.call(a,f)}))}:yg,hb=Ap?function(a){for(var f=[];a;)hs(f,Qp(a)),a=ku(a);return f}:yg,Ln=Fn;(Tp&&Ln(new Tp(new ArrayBuffer(1)))!=Ge||Sa&&Ln(new Sa)!=T||_p&&Ln(_p.resolve())!=ne||pl&&Ln(new pl)!=G||ka&&Ln(new ka)!=Se)&&(Ln=function(a){var f=Fn(a),g=f==H?a.constructor:n,v=g?go(g):"";if(v)switch(v){case _O:return Ge;case MO:return T;case OO:return ne;case RO:return G;case LO:return Se}return f});function qR(a,f,g){for(var v=-1,w=g.length;++v<w;){var k=g[v],_=k.size;switch(k.type){case"drop":a+=_;break;case"dropRight":f-=_;break;case"take":f=Rn(f,a+_);break;case"takeRight":a=fn(a,f-_);break}}return{start:a,end:f}}function GR(a){var f=a.match(eM);return f?f[1].split(tM):[]}function pb(a,f,g){f=vs(f,a);for(var v=-1,w=f.length,k=!1;++v<w;){var _=gi(f[v]);if(!(k=a!=null&&g(a,_)))break;a=a[_]}return k||++v!=w?k:(w=a==null?0:a.length,!!w&&Xu(w)&&ji(_,w)&&(Ze(a)||mo(a)))}function JR(a){var f=a.length,g=new a.constructor(f);return f&&typeof a[0]=="string"&&wt.call(a,"index")&&(g.index=a.index,g.input=a.input),g}function gb(a){return typeof a.constructor=="function"&&!Ia(a)?ml(ku(a)):{}}function YR(a,f,g){var v=a.constructor;switch(f){case je:return Kp(a);case re:case ie:return new v(+a);case Ge:return IR(a,g);case gt:case St:case qt:case oe:case Fe:case P:case se:case ue:case Me:return Xv(a,g);case T:return new v;case D:case X:return new v(a);case Z:return NR(a);case G:return new v;case ce:return DR(a)}}function XR(a,f){var g=f.length;if(!g)return a;var v=g-1;return f[v]=(g>1?"& ":"")+f[v],f=f.join(g>2?", ":" "),a.replace(Q_,`{
/* [wrapped with `+f+`] */
`)}function ZR(a){return Ze(a)||mo(a)||!!(wv&&a&&a[wv])}function ji(a,f){var g=typeof a;return f=f??j,!!f&&(g=="number"||g!="symbol"&&uM.test(a))&&a>-1&&a%1==0&&a<f}function Vn(a,f,g){if(!zt(g))return!1;var v=typeof f;return(v=="number"?Yn(g)&&ji(f,g.length):v=="string"&&f in g)?Jr(g[f],a):!1}function eg(a,f){if(Ze(a))return!1;var g=typeof a;return g=="number"||g=="symbol"||g=="boolean"||a==null||fr(a)?!0:ll.test(a)||!wa.test(a)||f!=null&&a in Et(f)}function QR(a){var f=typeof a;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?a!=="__proto__":a===null}function tg(a){var f=Uu(a),g=S[f];if(typeof g!="function"||!(f in ut.prototype))return!1;if(a===g)return!0;var v=Xp(g);return!!v&&a===v[0]}function eL(a){return!!mv&&mv in a}var tL=bu?Ki:vg;function Ia(a){var f=a&&a.constructor,g=typeof f=="function"&&f.prototype||hl;return a===g}function mb(a){return a===a&&!zt(a)}function yb(a,f){return function(g){return g==null?!1:g[a]===f&&(f!==n||a in Et(g))}}function nL(a){var f=Ju(a,function(v){return g.size===u&&g.clear(),v}),g=f.cache;return f}function rL(a,f){var g=a[1],v=f[1],w=g|v,k=w<(x|C|U),_=v==U&&g==L||v==U&&g==W&&a[7].length<=f[8]||v==(U|W)&&f[7].length<=f[8]&&g==L;if(!(k||_))return a;v&x&&(a[2]=f[2],w|=g&x?0:M);var O=f[3];if(O){var N=a[3];a[3]=N?Qv(N,O,f[4]):O,a[4]=N?ps(a[3],d):f[4]}return O=f[5],O&&(N=a[5],a[5]=N?eb(N,O,f[6]):O,a[6]=N?ps(a[5],d):f[6]),O=f[7],O&&(a[7]=O),v&U&&(a[8]=a[8]==null?f[8]:Rn(a[8],f[8])),a[9]==null&&(a[9]=f[9]),a[0]=f[0],a[1]=w,a}function iL(a){var f=[];if(a!=null)for(var g in Et(a))f.push(g);return f}function sL(a){return xu.call(a)}function vb(a,f,g){return f=fn(f===n?a.length-1:f,0),function(){for(var v=arguments,w=-1,k=fn(v.length-f,0),_=B(k);++w<k;)_[w]=v[f+w];w=-1;for(var O=B(f+1);++w<f;)O[w]=v[w];return O[f]=g(_),ar(a,this,O)}}function bb(a,f){return f.length<2?a:ho(a,Mr(f,0,-1))}function oL(a,f){for(var g=a.length,v=Rn(f.length,g),w=Jn(a);v--;){var k=f[v];a[v]=ji(k,g)?w[k]:n}return a}function ng(a,f){if(!(f==="constructor"&&typeof a[f]=="function")&&f!="__proto__")return a[f]}var wb=Cb(Uv),Na=xO||function(a,f){return Cn.setTimeout(a,f)},rg=Cb(MR);function xb(a,f,g){var v=f+"";return rg(a,XR(v,lL(GR(v),g)))}function Cb(a){var f=0,g=0;return function(){var v=EO(),w=me-(v-g);if(g=v,w>0){if(++f>=te)return arguments[0]}else f=0;return a.apply(n,arguments)}}function ju(a,f){var g=-1,v=a.length,w=v-1;for(f=f===n?v:f;++g<f;){var k=Hp(g,w),_=a[k];a[k]=a[g],a[g]=_}return a.length=f,a}var Sb=nL(function(a){var f=[];return a.charCodeAt(0)===46&&f.push(""),a.replace(Y_,function(g,v,w,k){f.push(w?k.replace(iM,"$1"):v||g)}),f});function gi(a){if(typeof a=="string"||fr(a))return a;var f=a+"";return f=="0"&&1/a==-be?"-0":f}function go(a){if(a!=null){try{return wu.call(a)}catch{}try{return a+""}catch{}}return""}function lL(a,f){return Er(He,function(g){var v="_."+g[0];f&g[1]&&!gu(a,v)&&a.push(v)}),a.sort()}function kb(a){if(a instanceof ut)return a.clone();var f=new Tr(a.__wrapped__,a.__chain__);return f.__actions__=Jn(a.__actions__),f.__index__=a.__index__,f.__values__=a.__values__,f}function aL(a,f,g){(g?Vn(a,f,g):f===n)?f=1:f=fn(tt(f),0);var v=a==null?0:a.length;if(!v||f<1)return[];for(var w=0,k=0,_=B(Tu(v/f));w<v;)_[k++]=Mr(a,w,w+=f);return _}function cL(a){for(var f=-1,g=a==null?0:a.length,v=0,w=[];++f<g;){var k=a[f];k&&(w[v++]=k)}return w}function uL(){var a=arguments.length;if(!a)return[];for(var f=B(a-1),g=arguments[0],v=a;v--;)f[v-1]=arguments[v];return hs(Ze(g)?Jn(g):[g],Sn(f,1))}var fL=ot(function(a,f){return Qt(a)?_a(a,Sn(f,1,Qt,!0)):[]}),dL=ot(function(a,f){var g=Or(f);return Qt(g)&&(g=n),Qt(a)?_a(a,Sn(f,1,Qt,!0),Ve(g,2)):[]}),hL=ot(function(a,f){var g=Or(f);return Qt(g)&&(g=n),Qt(a)?_a(a,Sn(f,1,Qt,!0),n,g):[]});function pL(a,f,g){var v=a==null?0:a.length;return v?(f=g||f===n?1:tt(f),Mr(a,f<0?0:f,v)):[]}function gL(a,f,g){var v=a==null?0:a.length;return v?(f=g||f===n?1:tt(f),f=v-f,Mr(a,0,f<0?0:f)):[]}function mL(a,f){return a&&a.length?Bu(a,Ve(f,3),!0,!0):[]}function yL(a,f){return a&&a.length?Bu(a,Ve(f,3),!0):[]}function vL(a,f,g,v){var w=a==null?0:a.length;return w?(g&&typeof g!="number"&&Vn(a,f,g)&&(g=0,v=w),uR(a,f,g,v)):[]}function Eb(a,f,g){var v=a==null?0:a.length;if(!v)return-1;var w=g==null?0:tt(g);return w<0&&(w=fn(v+w,0)),mu(a,Ve(f,3),w)}function Ab(a,f,g){var v=a==null?0:a.length;if(!v)return-1;var w=v-1;return g!==n&&(w=tt(g),w=g<0?fn(v+w,0):Rn(w,v-1)),mu(a,Ve(f,3),w,!0)}function Tb(a){var f=a==null?0:a.length;return f?Sn(a,1):[]}function bL(a){var f=a==null?0:a.length;return f?Sn(a,be):[]}function wL(a,f){var g=a==null?0:a.length;return g?(f=f===n?1:tt(f),Sn(a,f)):[]}function xL(a){for(var f=-1,g=a==null?0:a.length,v={};++f<g;){var w=a[f];v[w[0]]=w[1]}return v}function _b(a){return a&&a.length?a[0]:n}function CL(a,f,g){var v=a==null?0:a.length;if(!v)return-1;var w=g==null?0:tt(g);return w<0&&(w=fn(v+w,0)),cl(a,f,w)}function SL(a){var f=a==null?0:a.length;return f?Mr(a,0,-1):[]}var kL=ot(function(a){var f=Bt(a,Wp);return f.length&&f[0]===a[0]?Np(f):[]}),EL=ot(function(a){var f=Or(a),g=Bt(a,Wp);return f===Or(g)?f=n:g.pop(),g.length&&g[0]===a[0]?Np(g,Ve(f,2)):[]}),AL=ot(function(a){var f=Or(a),g=Bt(a,Wp);return f=typeof f=="function"?f:n,f&&g.pop(),g.length&&g[0]===a[0]?Np(g,n,f):[]});function TL(a,f){return a==null?"":SO.call(a,f)}function Or(a){var f=a==null?0:a.length;return f?a[f-1]:n}function _L(a,f,g){var v=a==null?0:a.length;if(!v)return-1;var w=v;return g!==n&&(w=tt(g),w=w<0?fn(v+w,0):Rn(w,v-1)),f===f?lO(a,f,w):mu(a,av,w,!0)}function ML(a,f){return a&&a.length?Hv(a,tt(f)):n}var OL=ot(Mb);function Mb(a,f){return a&&a.length&&f&&f.length?$p(a,f):a}function RL(a,f,g){return a&&a.length&&f&&f.length?$p(a,f,Ve(g,2)):a}function LL(a,f,g){return a&&a.length&&f&&f.length?$p(a,f,n,g):a}var IL=Wi(function(a,f){var g=a==null?0:a.length,v=Op(a,f);return zv(a,Bt(f,function(w){return ji(w,g)?+w:w}).sort(Zv)),v});function NL(a,f){var g=[];if(!(a&&a.length))return g;var v=-1,w=[],k=a.length;for(f=Ve(f,3);++v<k;){var _=a[v];f(_,v,a)&&(g.push(_),w.push(v))}return zv(a,w),g}function ig(a){return a==null?a:TO.call(a)}function DL(a,f,g){var v=a==null?0:a.length;return v?(g&&typeof g!="number"&&Vn(a,f,g)?(f=0,g=v):(f=f==null?0:tt(f),g=g===n?v:tt(g)),Mr(a,f,g)):[]}function PL(a,f){return Pu(a,f)}function BL(a,f,g){return Vp(a,f,Ve(g,2))}function $L(a,f){var g=a==null?0:a.length;if(g){var v=Pu(a,f);if(v<g&&Jr(a[v],f))return v}return-1}function HL(a,f){return Pu(a,f,!0)}function FL(a,f,g){return Vp(a,f,Ve(g,2),!0)}function VL(a,f){var g=a==null?0:a.length;if(g){var v=Pu(a,f,!0)-1;if(Jr(a[v],f))return v}return-1}function zL(a){return a&&a.length?Wv(a):[]}function UL(a,f){return a&&a.length?Wv(a,Ve(f,2)):[]}function WL(a){var f=a==null?0:a.length;return f?Mr(a,1,f):[]}function jL(a,f,g){return a&&a.length?(f=g||f===n?1:tt(f),Mr(a,0,f<0?0:f)):[]}function KL(a,f,g){var v=a==null?0:a.length;return v?(f=g||f===n?1:tt(f),f=v-f,Mr(a,f<0?0:f,v)):[]}function qL(a,f){return a&&a.length?Bu(a,Ve(f,3),!1,!0):[]}function GL(a,f){return a&&a.length?Bu(a,Ve(f,3)):[]}var JL=ot(function(a){return ys(Sn(a,1,Qt,!0))}),YL=ot(function(a){var f=Or(a);return Qt(f)&&(f=n),ys(Sn(a,1,Qt,!0),Ve(f,2))}),XL=ot(function(a){var f=Or(a);return f=typeof f=="function"?f:n,ys(Sn(a,1,Qt,!0),n,f)});function ZL(a){return a&&a.length?ys(a):[]}function QL(a,f){return a&&a.length?ys(a,Ve(f,2)):[]}function eI(a,f){return f=typeof f=="function"?f:n,a&&a.length?ys(a,n,f):[]}function sg(a){if(!(a&&a.length))return[];var f=0;return a=ds(a,function(g){if(Qt(g))return f=fn(g.length,f),!0}),Cp(f,function(g){return Bt(a,bp(g))})}function Ob(a,f){if(!(a&&a.length))return[];var g=sg(a);return f==null?g:Bt(g,function(v){return ar(f,n,v)})}var tI=ot(function(a,f){return Qt(a)?_a(a,f):[]}),nI=ot(function(a){return Up(ds(a,Qt))}),rI=ot(function(a){var f=Or(a);return Qt(f)&&(f=n),Up(ds(a,Qt),Ve(f,2))}),iI=ot(function(a){var f=Or(a);return f=typeof f=="function"?f:n,Up(ds(a,Qt),n,f)}),sI=ot(sg);function oI(a,f){return Gv(a||[],f||[],Ta)}function lI(a,f){return Gv(a||[],f||[],Ra)}var aI=ot(function(a){var f=a.length,g=f>1?a[f-1]:n;return g=typeof g=="function"?(a.pop(),g):n,Ob(a,g)});function Rb(a){var f=S(a);return f.__chain__=!0,f}function cI(a,f){return f(a),a}function Ku(a,f){return f(a)}var uI=Wi(function(a){var f=a.length,g=f?a[0]:0,v=this.__wrapped__,w=function(k){return Op(k,a)};return f>1||this.__actions__.length||!(v instanceof ut)||!ji(g)?this.thru(w):(v=v.slice(g,+g+(f?1:0)),v.__actions__.push({func:Ku,args:[w],thisArg:n}),new Tr(v,this.__chain__).thru(function(k){return f&&!k.length&&k.push(n),k}))});function fI(){return Rb(this)}function dI(){return new Tr(this.value(),this.__chain__)}function hI(){this.__values__===n&&(this.__values__=jb(this.value()));var a=this.__index__>=this.__values__.length,f=a?n:this.__values__[this.__index__++];return{done:a,value:f}}function pI(){return this}function gI(a){for(var f,g=this;g instanceof Ru;){var v=kb(g);v.__index__=0,v.__values__=n,f?w.__wrapped__=v:f=v;var w=v;g=g.__wrapped__}return w.__wrapped__=a,f}function mI(){var a=this.__wrapped__;if(a instanceof ut){var f=a;return this.__actions__.length&&(f=new ut(this)),f=f.reverse(),f.__actions__.push({func:Ku,args:[ig],thisArg:n}),new Tr(f,this.__chain__)}return this.thru(ig)}function yI(){return qv(this.__wrapped__,this.__actions__)}var vI=$u(function(a,f,g){wt.call(a,g)?++a[g]:zi(a,g,1)});function bI(a,f,g){var v=Ze(a)?ov:cR;return g&&Vn(a,f,g)&&(f=n),v(a,Ve(f,3))}function wI(a,f){var g=Ze(a)?ds:Ov;return g(a,Ve(f,3))}var xI=ib(Eb),CI=ib(Ab);function SI(a,f){return Sn(qu(a,f),1)}function kI(a,f){return Sn(qu(a,f),be)}function EI(a,f,g){return g=g===n?1:tt(g),Sn(qu(a,f),g)}function Lb(a,f){var g=Ze(a)?Er:ms;return g(a,Ve(f,3))}function Ib(a,f){var g=Ze(a)?WM:Mv;return g(a,Ve(f,3))}var AI=$u(function(a,f,g){wt.call(a,g)?a[g].push(f):zi(a,g,[f])});function TI(a,f,g,v){a=Yn(a)?a:xl(a),g=g&&!v?tt(g):0;var w=a.length;return g<0&&(g=fn(w+g,0)),Zu(a)?g<=w&&a.indexOf(f,g)>-1:!!w&&cl(a,f,g)>-1}var _I=ot(function(a,f,g){var v=-1,w=typeof f=="function",k=Yn(a)?B(a.length):[];return ms(a,function(_){k[++v]=w?ar(f,_,g):Ma(_,f,g)}),k}),MI=$u(function(a,f,g){zi(a,g,f)});function qu(a,f){var g=Ze(a)?Bt:Pv;return g(a,Ve(f,3))}function OI(a,f,g,v){return a==null?[]:(Ze(f)||(f=f==null?[]:[f]),g=v?n:g,Ze(g)||(g=g==null?[]:[g]),Fv(a,f,g))}var RI=$u(function(a,f,g){a[g?0:1].push(f)},function(){return[[],[]]});function LI(a,f,g){var v=Ze(a)?yp:uv,w=arguments.length<3;return v(a,Ve(f,4),g,w,ms)}function II(a,f,g){var v=Ze(a)?jM:uv,w=arguments.length<3;return v(a,Ve(f,4),g,w,Mv)}function NI(a,f){var g=Ze(a)?ds:Ov;return g(a,Yu(Ve(f,3)))}function DI(a){var f=Ze(a)?Ev:TR;return f(a)}function PI(a,f,g){(g?Vn(a,f,g):f===n)?f=1:f=tt(f);var v=Ze(a)?iR:_R;return v(a,f)}function BI(a){var f=Ze(a)?sR:OR;return f(a)}function $I(a){if(a==null)return 0;if(Yn(a))return Zu(a)?fl(a):a.length;var f=Ln(a);return f==T||f==G?a.size:Pp(a).length}function HI(a,f,g){var v=Ze(a)?vp:RR;return g&&Vn(a,f,g)&&(f=n),v(a,Ve(f,3))}var FI=ot(function(a,f){if(a==null)return[];var g=f.length;return g>1&&Vn(a,f[0],f[1])?f=[]:g>2&&Vn(f[0],f[1],f[2])&&(f=[f[0]]),Fv(a,Sn(f,1),[])}),Gu=wO||function(){return Cn.Date.now()};function VI(a,f){if(typeof f!="function")throw new Ar(o);return a=tt(a),function(){if(--a<1)return f.apply(this,arguments)}}function Nb(a,f,g){return f=g?n:f,f=a&&f==null?a.length:f,Ui(a,U,n,n,n,n,f)}function Db(a,f){var g;if(typeof f!="function")throw new Ar(o);return a=tt(a),function(){return--a>0&&(g=f.apply(this,arguments)),a<=1&&(f=n),g}}var og=ot(function(a,f,g){var v=x;if(g.length){var w=ps(g,bl(og));v|=F}return Ui(a,v,f,g,w)}),Pb=ot(function(a,f,g){var v=x|C;if(g.length){var w=ps(g,bl(Pb));v|=F}return Ui(f,v,a,g,w)});function Bb(a,f,g){f=g?n:f;var v=Ui(a,L,n,n,n,n,n,f);return v.placeholder=Bb.placeholder,v}function $b(a,f,g){f=g?n:f;var v=Ui(a,A,n,n,n,n,n,f);return v.placeholder=$b.placeholder,v}function Hb(a,f,g){var v,w,k,_,O,N,K=0,q=!1,Q=!1,ye=!0;if(typeof a!="function")throw new Ar(o);f=Rr(f)||0,zt(g)&&(q=!!g.leading,Q="maxWait"in g,k=Q?fn(Rr(g.maxWait)||0,f):k,ye="trailing"in g?!!g.trailing:ye);function Oe(en){var Yr=v,Gi=w;return v=w=n,K=en,_=a.apply(Gi,Yr),_}function ze(en){return K=en,O=Na(ct,f),q?Oe(en):_}function it(en){var Yr=en-N,Gi=en-K,iw=f-Yr;return Q?Rn(iw,k-Gi):iw}function Ue(en){var Yr=en-N,Gi=en-K;return N===n||Yr>=f||Yr<0||Q&&Gi>=k}function ct(){var en=Gu();if(Ue(en))return dt(en);O=Na(ct,it(en))}function dt(en){return O=n,ye&&v?Oe(en):(v=w=n,_)}function dr(){O!==n&&Jv(O),K=0,v=N=w=O=n}function zn(){return O===n?_:dt(Gu())}function hr(){var en=Gu(),Yr=Ue(en);if(v=arguments,w=this,N=en,Yr){if(O===n)return ze(N);if(Q)return Jv(O),O=Na(ct,f),Oe(N)}return O===n&&(O=Na(ct,f)),_}return hr.cancel=dr,hr.flush=zn,hr}var zI=ot(function(a,f){return _v(a,1,f)}),UI=ot(function(a,f,g){return _v(a,Rr(f)||0,g)});function WI(a){return Ui(a,ee)}function Ju(a,f){if(typeof a!="function"||f!=null&&typeof f!="function")throw new Ar(o);var g=function(){var v=arguments,w=f?f.apply(this,v):v[0],k=g.cache;if(k.has(w))return k.get(w);var _=a.apply(this,v);return g.cache=k.set(w,_)||k,_};return g.cache=new(Ju.Cache||Vi),g}Ju.Cache=Vi;function Yu(a){if(typeof a!="function")throw new Ar(o);return function(){var f=arguments;switch(f.length){case 0:return!a.call(this);case 1:return!a.call(this,f[0]);case 2:return!a.call(this,f[0],f[1]);case 3:return!a.call(this,f[0],f[1],f[2])}return!a.apply(this,f)}}function jI(a){return Db(2,a)}var KI=LR(function(a,f){f=f.length==1&&Ze(f[0])?Bt(f[0],cr(Ve())):Bt(Sn(f,1),cr(Ve()));var g=f.length;return ot(function(v){for(var w=-1,k=Rn(v.length,g);++w<k;)v[w]=f[w].call(this,v[w]);return ar(a,this,v)})}),lg=ot(function(a,f){var g=ps(f,bl(lg));return Ui(a,F,n,f,g)}),Fb=ot(function(a,f){var g=ps(f,bl(Fb));return Ui(a,R,n,f,g)}),qI=Wi(function(a,f){return Ui(a,W,n,n,n,f)});function GI(a,f){if(typeof a!="function")throw new Ar(o);return f=f===n?f:tt(f),ot(a,f)}function JI(a,f){if(typeof a!="function")throw new Ar(o);return f=f==null?0:fn(tt(f),0),ot(function(g){var v=g[f],w=bs(g,0,f);return v&&hs(w,v),ar(a,this,w)})}function YI(a,f,g){var v=!0,w=!0;if(typeof a!="function")throw new Ar(o);return zt(g)&&(v="leading"in g?!!g.leading:v,w="trailing"in g?!!g.trailing:w),Hb(a,f,{leading:v,maxWait:f,trailing:w})}function XI(a){return Nb(a,1)}function ZI(a,f){return lg(jp(f),a)}function QI(){if(!arguments.length)return[];var a=arguments[0];return Ze(a)?a:[a]}function eN(a){return _r(a,m)}function tN(a,f){return f=typeof f=="function"?f:n,_r(a,m,f)}function nN(a){return _r(a,h|m)}function rN(a,f){return f=typeof f=="function"?f:n,_r(a,h|m,f)}function iN(a,f){return f==null||Tv(a,f,mn(f))}function Jr(a,f){return a===f||a!==a&&f!==f}var sN=zu(Ip),oN=zu(function(a,f){return a>=f}),mo=Iv(function(){return arguments}())?Iv:function(a){return Gt(a)&&wt.call(a,"callee")&&!bv.call(a,"callee")},Ze=B.isArray,lN=ev?cr(ev):gR;function Yn(a){return a!=null&&Xu(a.length)&&!Ki(a)}function Qt(a){return Gt(a)&&Yn(a)}function aN(a){return a===!0||a===!1||Gt(a)&&Fn(a)==re}var ws=CO||vg,cN=tv?cr(tv):mR;function uN(a){return Gt(a)&&a.nodeType===1&&!Da(a)}function fN(a){if(a==null)return!0;if(Yn(a)&&(Ze(a)||typeof a=="string"||typeof a.splice=="function"||ws(a)||wl(a)||mo(a)))return!a.length;var f=Ln(a);if(f==T||f==G)return!a.size;if(Ia(a))return!Pp(a).length;for(var g in a)if(wt.call(a,g))return!1;return!0}function dN(a,f){return Oa(a,f)}function hN(a,f,g){g=typeof g=="function"?g:n;var v=g?g(a,f):n;return v===n?Oa(a,f,n,g):!!v}function ag(a){if(!Gt(a))return!1;var f=Fn(a);return f==Xe||f==xe||typeof a.message=="string"&&typeof a.name=="string"&&!Da(a)}function pN(a){return typeof a=="number"&&xv(a)}function Ki(a){if(!zt(a))return!1;var f=Fn(a);return f==ft||f==E||f==$||f==ae}function Vb(a){return typeof a=="number"&&a==tt(a)}function Xu(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=j}function zt(a){var f=typeof a;return a!=null&&(f=="object"||f=="function")}function Gt(a){return a!=null&&typeof a=="object"}var zb=nv?cr(nv):vR;function gN(a,f){return a===f||Dp(a,f,Zp(f))}function mN(a,f,g){return g=typeof g=="function"?g:n,Dp(a,f,Zp(f),g)}function yN(a){return Ub(a)&&a!=+a}function vN(a){if(tL(a))throw new Ye(s);return Nv(a)}function bN(a){return a===null}function wN(a){return a==null}function Ub(a){return typeof a=="number"||Gt(a)&&Fn(a)==D}function Da(a){if(!Gt(a)||Fn(a)!=H)return!1;var f=ku(a);if(f===null)return!0;var g=wt.call(f,"constructor")&&f.constructor;return typeof g=="function"&&g instanceof g&&wu.call(g)==mO}var cg=rv?cr(rv):bR;function xN(a){return Vb(a)&&a>=-j&&a<=j}var Wb=iv?cr(iv):wR;function Zu(a){return typeof a=="string"||!Ze(a)&&Gt(a)&&Fn(a)==X}function fr(a){return typeof a=="symbol"||Gt(a)&&Fn(a)==ce}var wl=sv?cr(sv):xR;function CN(a){return a===n}function SN(a){return Gt(a)&&Ln(a)==Se}function kN(a){return Gt(a)&&Fn(a)==Pe}var EN=zu(Bp),AN=zu(function(a,f){return a<=f});function jb(a){if(!a)return[];if(Yn(a))return Zu(a)?qr(a):Jn(a);if(Ca&&a[Ca])return iO(a[Ca]());var f=Ln(a),g=f==T?kp:f==G?yu:xl;return g(a)}function qi(a){if(!a)return a===0?a:0;if(a=Rr(a),a===be||a===-be){var f=a<0?-1:1;return f*de}return a===a?a:0}function tt(a){var f=qi(a),g=f%1;return f===f?g?f-g:f:0}function Kb(a){return a?fo(tt(a),0,pe):0}function Rr(a){if(typeof a=="number")return a;if(fr(a))return Ee;if(zt(a)){var f=typeof a.valueOf=="function"?a.valueOf():a;a=zt(f)?f+"":f}if(typeof a!="string")return a===0?a:+a;a=fv(a);var g=lM.test(a);return g||cM.test(a)?VM(a.slice(2),g?2:8):oM.test(a)?Ee:+a}function qb(a){return pi(a,Xn(a))}function TN(a){return a?fo(tt(a),-j,j):a===0?a:0}function vt(a){return a==null?"":ur(a)}var _N=yl(function(a,f){if(Ia(f)||Yn(f)){pi(f,mn(f),a);return}for(var g in f)wt.call(f,g)&&Ta(a,g,f[g])}),Gb=yl(function(a,f){pi(f,Xn(f),a)}),Qu=yl(function(a,f,g,v){pi(f,Xn(f),a,v)}),MN=yl(function(a,f,g,v){pi(f,mn(f),a,v)}),ON=Wi(Op);function RN(a,f){var g=ml(a);return f==null?g:Av(g,f)}var LN=ot(function(a,f){a=Et(a);var g=-1,v=f.length,w=v>2?f[2]:n;for(w&&Vn(f[0],f[1],w)&&(v=1);++g<v;)for(var k=f[g],_=Xn(k),O=-1,N=_.length;++O<N;){var K=_[O],q=a[K];(q===n||Jr(q,hl[K])&&!wt.call(a,K))&&(a[K]=k[K])}return a}),IN=ot(function(a){return a.push(n,fb),ar(Jb,n,a)});function NN(a,f){return lv(a,Ve(f,3),hi)}function DN(a,f){return lv(a,Ve(f,3),Lp)}function PN(a,f){return a==null?a:Rp(a,Ve(f,3),Xn)}function BN(a,f){return a==null?a:Rv(a,Ve(f,3),Xn)}function $N(a,f){return a&&hi(a,Ve(f,3))}function HN(a,f){return a&&Lp(a,Ve(f,3))}function FN(a){return a==null?[]:Nu(a,mn(a))}function VN(a){return a==null?[]:Nu(a,Xn(a))}function ug(a,f,g){var v=a==null?n:ho(a,f);return v===n?g:v}function zN(a,f){return a!=null&&pb(a,f,fR)}function fg(a,f){return a!=null&&pb(a,f,dR)}var UN=ob(function(a,f,g){f!=null&&typeof f.toString!="function"&&(f=xu.call(f)),a[f]=g},hg(Zn)),WN=ob(function(a,f,g){f!=null&&typeof f.toString!="function"&&(f=xu.call(f)),wt.call(a,f)?a[f].push(g):a[f]=[g]},Ve),jN=ot(Ma);function mn(a){return Yn(a)?kv(a):Pp(a)}function Xn(a){return Yn(a)?kv(a,!0):CR(a)}function KN(a,f){var g={};return f=Ve(f,3),hi(a,function(v,w,k){zi(g,f(v,w,k),v)}),g}function qN(a,f){var g={};return f=Ve(f,3),hi(a,function(v,w,k){zi(g,w,f(v,w,k))}),g}var GN=yl(function(a,f,g){Du(a,f,g)}),Jb=yl(function(a,f,g,v){Du(a,f,g,v)}),JN=Wi(function(a,f){var g={};if(a==null)return g;var v=!1;f=Bt(f,function(k){return k=vs(k,a),v||(v=k.length>1),k}),pi(a,Yp(a),g),v&&(g=_r(g,h|p|m,UR));for(var w=f.length;w--;)zp(g,f[w]);return g});function YN(a,f){return Yb(a,Yu(Ve(f)))}var XN=Wi(function(a,f){return a==null?{}:kR(a,f)});function Yb(a,f){if(a==null)return{};var g=Bt(Yp(a),function(v){return[v]});return f=Ve(f),Vv(a,g,function(v,w){return f(v,w[0])})}function ZN(a,f,g){f=vs(f,a);var v=-1,w=f.length;for(w||(w=1,a=n);++v<w;){var k=a==null?n:a[gi(f[v])];k===n&&(v=w,k=g),a=Ki(k)?k.call(a):k}return a}function QN(a,f,g){return a==null?a:Ra(a,f,g)}function e2(a,f,g,v){return v=typeof v=="function"?v:n,a==null?a:Ra(a,f,g,v)}var Xb=cb(mn),Zb=cb(Xn);function t2(a,f,g){var v=Ze(a),w=v||ws(a)||wl(a);if(f=Ve(f,4),g==null){var k=a&&a.constructor;w?g=v?new k:[]:zt(a)?g=Ki(k)?ml(ku(a)):{}:g={}}return(w?Er:hi)(a,function(_,O,N){return f(g,_,O,N)}),g}function n2(a,f){return a==null?!0:zp(a,f)}function r2(a,f,g){return a==null?a:Kv(a,f,jp(g))}function i2(a,f,g,v){return v=typeof v=="function"?v:n,a==null?a:Kv(a,f,jp(g),v)}function xl(a){return a==null?[]:Sp(a,mn(a))}function s2(a){return a==null?[]:Sp(a,Xn(a))}function o2(a,f,g){return g===n&&(g=f,f=n),g!==n&&(g=Rr(g),g=g===g?g:0),f!==n&&(f=Rr(f),f=f===f?f:0),fo(Rr(a),f,g)}function l2(a,f,g){return f=qi(f),g===n?(g=f,f=0):g=qi(g),a=Rr(a),hR(a,f,g)}function a2(a,f,g){if(g&&typeof g!="boolean"&&Vn(a,f,g)&&(f=g=n),g===n&&(typeof f=="boolean"?(g=f,f=n):typeof a=="boolean"&&(g=a,a=n)),a===n&&f===n?(a=0,f=1):(a=qi(a),f===n?(f=a,a=0):f=qi(f)),a>f){var v=a;a=f,f=v}if(g||a%1||f%1){var w=Cv();return Rn(a+w*(f-a+FM("1e-"+((w+"").length-1))),f)}return Hp(a,f)}var c2=vl(function(a,f,g){return f=f.toLowerCase(),a+(g?Qb(f):f)});function Qb(a){return dg(vt(a).toLowerCase())}function ew(a){return a=vt(a),a&&a.replace(fM,QM).replace(OM,"")}function u2(a,f,g){a=vt(a),f=ur(f);var v=a.length;g=g===n?v:fo(tt(g),0,v);var w=g;return g-=f.length,g>=0&&a.slice(g,w)==f}function f2(a){return a=vt(a),a&&gn.test(a)?a.replace(lr,eO):a}function d2(a){return a=vt(a),a&&X_.test(a)?a.replace(lp,"\\$&"):a}var h2=vl(function(a,f,g){return a+(g?"-":"")+f.toLowerCase()}),p2=vl(function(a,f,g){return a+(g?" ":"")+f.toLowerCase()}),g2=rb("toLowerCase");function m2(a,f,g){a=vt(a),f=tt(f);var v=f?fl(a):0;if(!f||v>=f)return a;var w=(f-v)/2;return Vu(_u(w),g)+a+Vu(Tu(w),g)}function y2(a,f,g){a=vt(a),f=tt(f);var v=f?fl(a):0;return f&&v<f?a+Vu(f-v,g):a}function v2(a,f,g){a=vt(a),f=tt(f);var v=f?fl(a):0;return f&&v<f?Vu(f-v,g)+a:a}function b2(a,f,g){return g||f==null?f=0:f&&(f=+f),AO(vt(a).replace(ap,""),f||0)}function w2(a,f,g){return(g?Vn(a,f,g):f===n)?f=1:f=tt(f),Fp(vt(a),f)}function x2(){var a=arguments,f=vt(a[0]);return a.length<3?f:f.replace(a[1],a[2])}var C2=vl(function(a,f,g){return a+(g?"_":"")+f.toLowerCase()});function S2(a,f,g){return g&&typeof g!="number"&&Vn(a,f,g)&&(f=g=n),g=g===n?pe:g>>>0,g?(a=vt(a),a&&(typeof f=="string"||f!=null&&!cg(f))&&(f=ur(f),!f&&ul(a))?bs(qr(a),0,g):a.split(f,g)):[]}var k2=vl(function(a,f,g){return a+(g?" ":"")+dg(f)});function E2(a,f,g){return a=vt(a),g=g==null?0:fo(tt(g),0,a.length),f=ur(f),a.slice(g,g+f.length)==f}function A2(a,f,g){var v=S.templateSettings;g&&Vn(a,f,g)&&(f=n),a=vt(a),f=Qu({},f,v,ub);var w=Qu({},f.imports,v.imports,ub),k=mn(w),_=Sp(w,k),O,N,K=0,q=f.interpolate||du,Q="__p += '",ye=Ep((f.escape||du).source+"|"+q.source+"|"+(q===fu?sM:du).source+"|"+(f.evaluate||du).source+"|$","g"),Oe="//# sourceURL="+(wt.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++DM+"]")+`
`;a.replace(ye,function(Ue,ct,dt,dr,zn,hr){return dt||(dt=dr),Q+=a.slice(K,hr).replace(dM,tO),ct&&(O=!0,Q+=`' +
__e(`+ct+`) +
'`),zn&&(N=!0,Q+=`';
`+zn+`;
__p += '`),dt&&(Q+=`' +
((__t = (`+dt+`)) == null ? '' : __t) +
'`),K=hr+Ue.length,Ue}),Q+=`';
`;var ze=wt.call(f,"variable")&&f.variable;if(!ze)Q=`with (obj) {
`+Q+`
}
`;else if(rM.test(ze))throw new Ye(l);Q=(N?Q.replace(Ke,""):Q).replace(kt,"$1").replace(Vt,"$1;"),Q="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(N?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Q+`return __p
}`;var it=nw(function(){return yt(k,Oe+"return "+Q).apply(n,_)});if(it.source=Q,ag(it))throw it;return it}function T2(a){return vt(a).toLowerCase()}function _2(a){return vt(a).toUpperCase()}function M2(a,f,g){if(a=vt(a),a&&(g||f===n))return fv(a);if(!a||!(f=ur(f)))return a;var v=qr(a),w=qr(f),k=dv(v,w),_=hv(v,w)+1;return bs(v,k,_).join("")}function O2(a,f,g){if(a=vt(a),a&&(g||f===n))return a.slice(0,gv(a)+1);if(!a||!(f=ur(f)))return a;var v=qr(a),w=hv(v,qr(f))+1;return bs(v,0,w).join("")}function R2(a,f,g){if(a=vt(a),a&&(g||f===n))return a.replace(ap,"");if(!a||!(f=ur(f)))return a;var v=qr(a),w=dv(v,qr(f));return bs(v,w).join("")}function L2(a,f){var g=ve,v=Ce;if(zt(f)){var w="separator"in f?f.separator:w;g="length"in f?tt(f.length):g,v="omission"in f?ur(f.omission):v}a=vt(a);var k=a.length;if(ul(a)){var _=qr(a);k=_.length}if(g>=k)return a;var O=g-fl(v);if(O<1)return v;var N=_?bs(_,0,O).join(""):a.slice(0,O);if(w===n)return N+v;if(_&&(O+=N.length-O),cg(w)){if(a.slice(O).search(w)){var K,q=N;for(w.global||(w=Ep(w.source,vt(I1.exec(w))+"g")),w.lastIndex=0;K=w.exec(q);)var Q=K.index;N=N.slice(0,Q===n?O:Q)}}else if(a.indexOf(ur(w),O)!=O){var ye=N.lastIndexOf(w);ye>-1&&(N=N.slice(0,ye))}return N+v}function I2(a){return a=vt(a),a&&On.test(a)?a.replace(cn,aO):a}var N2=vl(function(a,f,g){return a+(g?" ":"")+f.toUpperCase()}),dg=rb("toUpperCase");function tw(a,f,g){return a=vt(a),f=g?n:f,f===n?rO(a)?fO(a):GM(a):a.match(f)||[]}var nw=ot(function(a,f){try{return ar(a,n,f)}catch(g){return ag(g)?g:new Ye(g)}}),D2=Wi(function(a,f){return Er(f,function(g){g=gi(g),zi(a,g,og(a[g],a))}),a});function P2(a){var f=a==null?0:a.length,g=Ve();return a=f?Bt(a,function(v){if(typeof v[1]!="function")throw new Ar(o);return[g(v[0]),v[1]]}):[],ot(function(v){for(var w=-1;++w<f;){var k=a[w];if(ar(k[0],this,v))return ar(k[1],this,v)}})}function B2(a){return aR(_r(a,h))}function hg(a){return function(){return a}}function $2(a,f){return a==null||a!==a?f:a}var H2=sb(),F2=sb(!0);function Zn(a){return a}function pg(a){return Dv(typeof a=="function"?a:_r(a,h))}function V2(a){return Bv(_r(a,h))}function z2(a,f){return $v(a,_r(f,h))}var U2=ot(function(a,f){return function(g){return Ma(g,a,f)}}),W2=ot(function(a,f){return function(g){return Ma(a,g,f)}});function gg(a,f,g){var v=mn(f),w=Nu(f,v);g==null&&!(zt(f)&&(w.length||!v.length))&&(g=f,f=a,a=this,w=Nu(f,mn(f)));var k=!(zt(g)&&"chain"in g)||!!g.chain,_=Ki(a);return Er(w,function(O){var N=f[O];a[O]=N,_&&(a.prototype[O]=function(){var K=this.__chain__;if(k||K){var q=a(this.__wrapped__),Q=q.__actions__=Jn(this.__actions__);return Q.push({func:N,args:arguments,thisArg:a}),q.__chain__=K,q}return N.apply(a,hs([this.value()],arguments))})}),a}function j2(){return Cn._===this&&(Cn._=yO),this}function mg(){}function K2(a){return a=tt(a),ot(function(f){return Hv(f,a)})}var q2=qp(Bt),G2=qp(ov),J2=qp(vp);function rw(a){return eg(a)?bp(gi(a)):ER(a)}function Y2(a){return function(f){return a==null?n:ho(a,f)}}var X2=lb(),Z2=lb(!0);function yg(){return[]}function vg(){return!1}function Q2(){return{}}function eD(){return""}function tD(){return!0}function nD(a,f){if(a=tt(a),a<1||a>j)return[];var g=pe,v=Rn(a,pe);f=Ve(f),a-=pe;for(var w=Cp(v,f);++g<a;)f(g);return w}function rD(a){return Ze(a)?Bt(a,gi):fr(a)?[a]:Jn(Sb(vt(a)))}function iD(a){var f=++gO;return vt(a)+f}var sD=Fu(function(a,f){return a+f},0),oD=Gp("ceil"),lD=Fu(function(a,f){return a/f},1),aD=Gp("floor");function cD(a){return a&&a.length?Iu(a,Zn,Ip):n}function uD(a,f){return a&&a.length?Iu(a,Ve(f,2),Ip):n}function fD(a){return cv(a,Zn)}function dD(a,f){return cv(a,Ve(f,2))}function hD(a){return a&&a.length?Iu(a,Zn,Bp):n}function pD(a,f){return a&&a.length?Iu(a,Ve(f,2),Bp):n}var gD=Fu(function(a,f){return a*f},1),mD=Gp("round"),yD=Fu(function(a,f){return a-f},0);function vD(a){return a&&a.length?xp(a,Zn):0}function bD(a,f){return a&&a.length?xp(a,Ve(f,2)):0}return S.after=VI,S.ary=Nb,S.assign=_N,S.assignIn=Gb,S.assignInWith=Qu,S.assignWith=MN,S.at=ON,S.before=Db,S.bind=og,S.bindAll=D2,S.bindKey=Pb,S.castArray=QI,S.chain=Rb,S.chunk=aL,S.compact=cL,S.concat=uL,S.cond=P2,S.conforms=B2,S.constant=hg,S.countBy=vI,S.create=RN,S.curry=Bb,S.curryRight=$b,S.debounce=Hb,S.defaults=LN,S.defaultsDeep=IN,S.defer=zI,S.delay=UI,S.difference=fL,S.differenceBy=dL,S.differenceWith=hL,S.drop=pL,S.dropRight=gL,S.dropRightWhile=mL,S.dropWhile=yL,S.fill=vL,S.filter=wI,S.flatMap=SI,S.flatMapDeep=kI,S.flatMapDepth=EI,S.flatten=Tb,S.flattenDeep=bL,S.flattenDepth=wL,S.flip=WI,S.flow=H2,S.flowRight=F2,S.fromPairs=xL,S.functions=FN,S.functionsIn=VN,S.groupBy=AI,S.initial=SL,S.intersection=kL,S.intersectionBy=EL,S.intersectionWith=AL,S.invert=UN,S.invertBy=WN,S.invokeMap=_I,S.iteratee=pg,S.keyBy=MI,S.keys=mn,S.keysIn=Xn,S.map=qu,S.mapKeys=KN,S.mapValues=qN,S.matches=V2,S.matchesProperty=z2,S.memoize=Ju,S.merge=GN,S.mergeWith=Jb,S.method=U2,S.methodOf=W2,S.mixin=gg,S.negate=Yu,S.nthArg=K2,S.omit=JN,S.omitBy=YN,S.once=jI,S.orderBy=OI,S.over=q2,S.overArgs=KI,S.overEvery=G2,S.overSome=J2,S.partial=lg,S.partialRight=Fb,S.partition=RI,S.pick=XN,S.pickBy=Yb,S.property=rw,S.propertyOf=Y2,S.pull=OL,S.pullAll=Mb,S.pullAllBy=RL,S.pullAllWith=LL,S.pullAt=IL,S.range=X2,S.rangeRight=Z2,S.rearg=qI,S.reject=NI,S.remove=NL,S.rest=GI,S.reverse=ig,S.sampleSize=PI,S.set=QN,S.setWith=e2,S.shuffle=BI,S.slice=DL,S.sortBy=FI,S.sortedUniq=zL,S.sortedUniqBy=UL,S.split=S2,S.spread=JI,S.tail=WL,S.take=jL,S.takeRight=KL,S.takeRightWhile=qL,S.takeWhile=GL,S.tap=cI,S.throttle=YI,S.thru=Ku,S.toArray=jb,S.toPairs=Xb,S.toPairsIn=Zb,S.toPath=rD,S.toPlainObject=qb,S.transform=t2,S.unary=XI,S.union=JL,S.unionBy=YL,S.unionWith=XL,S.uniq=ZL,S.uniqBy=QL,S.uniqWith=eI,S.unset=n2,S.unzip=sg,S.unzipWith=Ob,S.update=r2,S.updateWith=i2,S.values=xl,S.valuesIn=s2,S.without=tI,S.words=tw,S.wrap=ZI,S.xor=nI,S.xorBy=rI,S.xorWith=iI,S.zip=sI,S.zipObject=oI,S.zipObjectDeep=lI,S.zipWith=aI,S.entries=Xb,S.entriesIn=Zb,S.extend=Gb,S.extendWith=Qu,gg(S,S),S.add=sD,S.attempt=nw,S.camelCase=c2,S.capitalize=Qb,S.ceil=oD,S.clamp=o2,S.clone=eN,S.cloneDeep=nN,S.cloneDeepWith=rN,S.cloneWith=tN,S.conformsTo=iN,S.deburr=ew,S.defaultTo=$2,S.divide=lD,S.endsWith=u2,S.eq=Jr,S.escape=f2,S.escapeRegExp=d2,S.every=bI,S.find=xI,S.findIndex=Eb,S.findKey=NN,S.findLast=CI,S.findLastIndex=Ab,S.findLastKey=DN,S.floor=aD,S.forEach=Lb,S.forEachRight=Ib,S.forIn=PN,S.forInRight=BN,S.forOwn=$N,S.forOwnRight=HN,S.get=ug,S.gt=sN,S.gte=oN,S.has=zN,S.hasIn=fg,S.head=_b,S.identity=Zn,S.includes=TI,S.indexOf=CL,S.inRange=l2,S.invoke=jN,S.isArguments=mo,S.isArray=Ze,S.isArrayBuffer=lN,S.isArrayLike=Yn,S.isArrayLikeObject=Qt,S.isBoolean=aN,S.isBuffer=ws,S.isDate=cN,S.isElement=uN,S.isEmpty=fN,S.isEqual=dN,S.isEqualWith=hN,S.isError=ag,S.isFinite=pN,S.isFunction=Ki,S.isInteger=Vb,S.isLength=Xu,S.isMap=zb,S.isMatch=gN,S.isMatchWith=mN,S.isNaN=yN,S.isNative=vN,S.isNil=wN,S.isNull=bN,S.isNumber=Ub,S.isObject=zt,S.isObjectLike=Gt,S.isPlainObject=Da,S.isRegExp=cg,S.isSafeInteger=xN,S.isSet=Wb,S.isString=Zu,S.isSymbol=fr,S.isTypedArray=wl,S.isUndefined=CN,S.isWeakMap=SN,S.isWeakSet=kN,S.join=TL,S.kebabCase=h2,S.last=Or,S.lastIndexOf=_L,S.lowerCase=p2,S.lowerFirst=g2,S.lt=EN,S.lte=AN,S.max=cD,S.maxBy=uD,S.mean=fD,S.meanBy=dD,S.min=hD,S.minBy=pD,S.stubArray=yg,S.stubFalse=vg,S.stubObject=Q2,S.stubString=eD,S.stubTrue=tD,S.multiply=gD,S.nth=ML,S.noConflict=j2,S.noop=mg,S.now=Gu,S.pad=m2,S.padEnd=y2,S.padStart=v2,S.parseInt=b2,S.random=a2,S.reduce=LI,S.reduceRight=II,S.repeat=w2,S.replace=x2,S.result=ZN,S.round=mD,S.runInContext=I,S.sample=DI,S.size=$I,S.snakeCase=C2,S.some=HI,S.sortedIndex=PL,S.sortedIndexBy=BL,S.sortedIndexOf=$L,S.sortedLastIndex=HL,S.sortedLastIndexBy=FL,S.sortedLastIndexOf=VL,S.startCase=k2,S.startsWith=E2,S.subtract=yD,S.sum=vD,S.sumBy=bD,S.template=A2,S.times=nD,S.toFinite=qi,S.toInteger=tt,S.toLength=Kb,S.toLower=T2,S.toNumber=Rr,S.toSafeInteger=TN,S.toString=vt,S.toUpper=_2,S.trim=M2,S.trimEnd=O2,S.trimStart=R2,S.truncate=L2,S.unescape=I2,S.uniqueId=iD,S.upperCase=N2,S.upperFirst=dg,S.each=Lb,S.eachRight=Ib,S.first=_b,gg(S,function(){var a={};return hi(S,function(f,g){wt.call(S.prototype,g)||(a[g]=f)}),a}(),{chain:!1}),S.VERSION=r,Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){S[a].placeholder=S}),Er(["drop","take"],function(a,f){ut.prototype[a]=function(g){g=g===n?1:fn(tt(g),0);var v=this.__filtered__&&!f?new ut(this):this.clone();return v.__filtered__?v.__takeCount__=Rn(g,v.__takeCount__):v.__views__.push({size:Rn(g,pe),type:a+(v.__dir__<0?"Right":"")}),v},ut.prototype[a+"Right"]=function(g){return this.reverse()[a](g).reverse()}}),Er(["filter","map","takeWhile"],function(a,f){var g=f+1,v=g==Qe||g==Re;ut.prototype[a]=function(w){var k=this.clone();return k.__iteratees__.push({iteratee:Ve(w,3),type:g}),k.__filtered__=k.__filtered__||v,k}}),Er(["head","last"],function(a,f){var g="take"+(f?"Right":"");ut.prototype[a]=function(){return this[g](1).value()[0]}}),Er(["initial","tail"],function(a,f){var g="drop"+(f?"":"Right");ut.prototype[a]=function(){return this.__filtered__?new ut(this):this[g](1)}}),ut.prototype.compact=function(){return this.filter(Zn)},ut.prototype.find=function(a){return this.filter(a).head()},ut.prototype.findLast=function(a){return this.reverse().find(a)},ut.prototype.invokeMap=ot(function(a,f){return typeof a=="function"?new ut(this):this.map(function(g){return Ma(g,a,f)})}),ut.prototype.reject=function(a){return this.filter(Yu(Ve(a)))},ut.prototype.slice=function(a,f){a=tt(a);var g=this;return g.__filtered__&&(a>0||f<0)?new ut(g):(a<0?g=g.takeRight(-a):a&&(g=g.drop(a)),f!==n&&(f=tt(f),g=f<0?g.dropRight(-f):g.take(f-a)),g)},ut.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},ut.prototype.toArray=function(){return this.take(pe)},hi(ut.prototype,function(a,f){var g=/^(?:filter|find|map|reject)|While$/.test(f),v=/^(?:head|last)$/.test(f),w=S[v?"take"+(f=="last"?"Right":""):f],k=v||/^find/.test(f);w&&(S.prototype[f]=function(){var _=this.__wrapped__,O=v?[1]:arguments,N=_ instanceof ut,K=O[0],q=N||Ze(_),Q=function(ct){var dt=w.apply(S,hs([ct],O));return v&&ye?dt[0]:dt};q&&g&&typeof K=="function"&&K.length!=1&&(N=q=!1);var ye=this.__chain__,Oe=!!this.__actions__.length,ze=k&&!ye,it=N&&!Oe;if(!k&&q){_=it?_:new ut(this);var Ue=a.apply(_,O);return Ue.__actions__.push({func:Ku,args:[Q],thisArg:n}),new Tr(Ue,ye)}return ze&&it?a.apply(this,O):(Ue=this.thru(Q),ze?v?Ue.value()[0]:Ue.value():Ue)})}),Er(["pop","push","shift","sort","splice","unshift"],function(a){var f=vu[a],g=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",v=/^(?:pop|shift)$/.test(a);S.prototype[a]=function(){var w=arguments;if(v&&!this.__chain__){var k=this.value();return f.apply(Ze(k)?k:[],w)}return this[g](function(_){return f.apply(Ze(_)?_:[],w)})}}),hi(ut.prototype,function(a,f){var g=S[f];if(g){var v=g.name+"";wt.call(gl,v)||(gl[v]=[]),gl[v].push({name:f,func:g})}}),gl[Hu(n,C).name]=[{name:"wrapper",func:n}],ut.prototype.clone=IO,ut.prototype.reverse=NO,ut.prototype.value=DO,S.prototype.at=uI,S.prototype.chain=fI,S.prototype.commit=dI,S.prototype.next=hI,S.prototype.plant=gI,S.prototype.reverse=mI,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=yI,S.prototype.first=S.prototype.head,Ca&&(S.prototype[Ca]=pI),S},dl=dO();lo?((lo.exports=dl)._=dl,pp._=dl):Cn._=dl}).call(Ua)})(fh,fh.exports);var G_=fh.exports;const bq={class:"flex flex-col space-y-5"},wq=he("span",null,"",-1),xq={class:"flex justify-between items-center gap-4"},Cq={class:"flex justify-start items-center flex-wrap gap-3"},Sq=bt({__name:"TiptapCommonTextDialog",props:{show:{type:Boolean},listTexts:{}},emits:["close","updateList"],setup(t,{emit:e}){const n=t,r=e,i=Ie(G_.cloneDeep(n.listTexts)),s=Ie("");function o(){r("close")}function l(d){i.value.splice(d,1)}function c(){i.value.unshift(s.value)}function u(){r("updateList",i.value),o()}return(d,h)=>(Je(),Nt(uu,{show:d.show,onClose:o,title:""},{default:ge(()=>[he("div",bq,[he("div",null,[J(la,null,{default:ge(()=>[J(ca,{for:"input-common"},{default:ge(()=>[wq,J(ic,{onClick:c,hasUnderline:""},{default:ge(()=>[yr("")]),_:1})]),_:1}),he("div",xq,[J(aa,{modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=p=>s.value=p),onKeydown:W3(c,["enter"]),id:"input-common",class:"mt-2",placeholder:"",type:"text"},null,8,["modelValue"])])]),_:1})]),he("div",Cq,[(Je(!0),sn(nn,null,Pk(i.value,(p,m)=>(Je(),Nt(q_,{key:`editCommon_${m}`,onClick:y=>l(m),class:"hover:bg-red-700"},{default:ge(()=>[yr(Yc(p)+" ",1),J(at(b9),{class:"w-3 h-3 ml-3"})]),_:2},1032,["onClick"]))),128))]),he("div",{class:"flex flex-row justify-end space-x-3"},[he("button",{onClick:o,class:"rounded-lg px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100",type:"button"},"  "),he("button",{onClick:u,class:"rounded-lg bg-black px-4 py-3 text-sm font-medium text-white hover:bg-opacity-80",type:"button"},"  ")])])]),_:1},8,["show"]))}}),kq={class:"w-full py-1.5 px-2 flex justify-start items-center flex-wrap border-t border-t-gray-200 gap-3"},Eq={class:"flex justify-start items-center flex-wrap gap-3"},Aq={__name:"CommonTextList",emits:["insertCommonText"],setup(t,{emit:e}){const n=e,r=Ie(["GRAMICCI","DURABLE NYLON (100% NYLON) / 100% POLYESTE"]),i=Ie(!1),s=Ie(0),o=u=>{n("insertCommonText",u)},l=()=>{s.value++,i.value=!0},c=u=>{r.value=G_.cloneDeep(u)};return(u,d)=>(Je(),sn(nn,null,[he("div",kq,[he("div",{class:Oi([{"border-r border-r-gray-600 ":r.value.length},"text-xs pr-2"])},[he("button",{onClick:l,class:"underline text-black transition underline-offset-2 hover:opacity-75",type:"button"},"")],2),he("div",Eq,[(Je(!0),sn(nn,null,Pk(r.value,(h,p)=>(Je(),Nt(q_,{key:`commonText_${p}`,onClick:m=>o(h)},{default:ge(()=>[yr(Yc(h),1)]),_:2},1032,["onClick"]))),128))])]),(Je(),Nt(Sq,{key:s.value,listTexts:r.value,show:i.value,onClose:d[0]||(d[0]=h=>i.value=!1),onUpdateList:c},null,8,["listTexts","show"]))],64))}},Tq={components:{CommonTextList:Aq,TableEditTool:vq,InsertTool:cq,ListTool:M9,TextAlignTool:_9,TextStyleTool:T9,HeadingTool:A9,HistoryTool:E9,EditorContent:v6},data(){return{editor:null,contentResult:"",isShowCommonTextList:!1}},mounted(){this.editor=new y6({editorProps:{attributes:{class:"blog"}},extensions:[S8,k8,XK,N8,D8.configure({levels:[1,2,3,4]}),QK.configure({types:["heading","paragraph"]}),F8,j8,K8,J8,y1,Y8,X8,m8.configure({key:null}),xj.configure({openOnClick:!1}),Cj,kj,Ej,Mj,Lj.configure({width:2,color:"#2563eb"}),Ij,BK.configure({resizable:!0,allowTableNodeSelection:!0}),$K,HK,FK,GK,YK.configure({inline:!0}),C8.configure({render(){const t=document.createElement("div");return t.classList.add("custom-drag-handle"),t}}),ZK.configure({placeholder:"..."}),e9],content:"<h1>GRAMICCI PANT</h1><p><br>DURABLE NYLON (100% NYLON) / 100% POLYESTE</p>",onUpdate:({editor:t})=>{this.contentResult=this.generateHTML(t)}}),setTimeout(()=>this.contentResult=this.generateHTML(this.editor),250)},beforeUnmount(){var t;(t=this.editor)==null||t.destroy()},methods:{generateHTML(t){return`<div class="blog">${t==null?void 0:t.getHTML()}</div>`},insertButton(){this.editor.commands.insertContent({type:"tiptapButton"})},insertCommonText(t){this.editor.chain().focus().insertContent(t).run()},toggleCommonTextList(t){this.isShowCommonTextList=t},getEditorHTML(){return this.contentResult}}},_q={key:0,id:"tiptap"},Mq={class:"bg-tool-background sticky top-[79px] left-0 z-10"},Oq={key:0,class:"bg-tool-background"},Rq={class:"w-full"},Lq={class:"flex flex-col max-w-[900px] min-h-96 mx-auto bg-white my-8 p-5 rounded-lg sm:rounded-none sm:my-0 sm:mb-8 shadow-xl"};function Iq(t,e,n,r,i,s){const o=vi("HistoryTool"),l=vi("HeadingTool"),c=vi("TextStyleTool"),u=vi("TextAlignTool"),d=vi("ListTool"),h=vi("InsertTool"),p=vi("TableEditTool"),m=vi("CommonTextList"),y=vi("EditorContent");return i.editor?(Je(),sn("div",_q,[he("div",Mq,[J(o,{editor:i.editor},null,8,["editor"]),J(l,{editor:i.editor},null,8,["editor"]),J(c,{editor:i.editor},null,8,["editor"]),J(u,{editor:i.editor},null,8,["editor"]),J(d,{editor:i.editor},null,8,["editor"]),J(h,{editor:i.editor,onToggleCommonTextList:s.toggleCommonTextList},null,8,["editor","onToggleCommonTextList"]),J(p,{editor:i.editor},null,8,["editor"]),i.isShowCommonTextList?(Je(),sn("div",Oq,[J(m,{onInsertCommonText:s.insertCommonText},null,8,["onInsertCommonText"])])):Wn("",!0)]),he("div",Rq,[he("div",Lq,[J(y,{editor:i.editor},null,8,["editor"])])])])):Wn("",!0)}const Nq=$i(Tq,[["render",Iq]]),Dq={class:"w-full pt-[79px]"},Pq=bt({__name:"HomePage",setup(t){const e=Ie(null),n=Ie(null),r=Ie(!1),i=()=>{n.value=e==null?void 0:e.value.getEditorHTML()},s=()=>{},o=async()=>{e.value&&(n.value=e==null?void 0:e.value.getEditorHTML(),r.value=!0)};return(l,c)=>(Je(),sn(nn,null,[J(u$,null,{default:ge(()=>[J(M$),J(C$,{onExportTemplate:o,onLoadTemplate:s,onSaveTemplate:i})]),_:1}),he("div",Dq,[he("div",null,[J(Nq,{ref_key:"editorRef",ref:e},null,512)])]),J(Th,null,{default:ge(()=>[r.value?(Je(),Nt(P$,{key:0,onClose:c[0]||(c[0]=u=>r.value=!1),title:""},{default:ge(()=>[J(U$,{savedData:n.value},null,8,["savedData"])]),_:1})):Wn("",!0)]),_:1})],64))}}),Bq=[{path:"/",name:"HomePage",component:Pq,children:[]}],$q=i$({history:wB(),routes:Bq,scrollBehavior(){return{top:0}}});var xm={exports:{}},JS;function J_(){return JS||(JS=1,function(t){(function(e,n){var r=n(e,e.document,Date);e.lazySizes=r,t.exports&&(t.exports=r)})(typeof window<"u"?window:{},function(n,r,i){var s,o;if(function(){var j,de={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};o=n.lazySizesConfig||n.lazysizesConfig||{};for(j in de)j in o||(o[j]=de[j])}(),!r||!r.getElementsByClassName)return{init:function(){},cfg:o,noSupport:!0};var l=r.documentElement,c=n.HTMLPictureElement,u="addEventListener",d="getAttribute",h=n[u].bind(n),p=n.setTimeout,m=n.requestAnimationFrame||p,y=n.requestIdleCallback,b=/^picture$/i,x=["load","error","lazyincluded","_lazyloaded"],C={},M=Array.prototype.forEach,L=function(j,de){return C[de]||(C[de]=new RegExp("(\\s|^)"+de+"(\\s|$)")),C[de].test(j[d]("class")||"")&&C[de]},A=function(j,de){L(j,de)||j.setAttribute("class",(j[d]("class")||"").trim()+" "+de)},F=function(j,de){var Ee;(Ee=L(j,de))&&j.setAttribute("class",(j[d]("class")||"").replace(Ee," "))},R=function(j,de,Ee){var pe=Ee?u:"removeEventListener";Ee&&R(j,de),x.forEach(function(we){j[pe](we,de)})},U=function(j,de,Ee,pe,we){var _e=r.createEvent("Event");return Ee||(Ee={}),Ee.instance=s,_e.initEvent(de,!pe,!we),_e.detail=Ee,j.dispatchEvent(_e),_e},W=function(j,de){var Ee;!c&&(Ee=n.picturefill||o.pf)?(de&&de.src&&!j[d]("srcset")&&j.setAttribute("srcset",de.src),Ee({reevaluate:!0,elements:[j]})):de&&de.src&&(j.src=de.src)},ee=function(j,de){return(getComputedStyle(j,null)||{})[de]},ve=function(j,de,Ee){for(Ee=Ee||j.offsetWidth;Ee<o.minSize&&de&&!j._lazysizesWidth;)Ee=de.offsetWidth,de=de.parentNode;return Ee},Ce=function(){var j,de,Ee=[],pe=[],we=Ee,_e=function(){var De=we;for(we=Ee.length?pe:Ee,j=!0,de=!1;De.length;)De.shift()();j=!1},He=function(De,Le){j&&!Le?De.apply(this,arguments):(we.push(De),de||(de=!0,(r.hidden?p:m)(_e)))};return He._lsFlush=_e,He}(),te=function(j,de){return de?function(){Ce(j)}:function(){var Ee=this,pe=arguments;Ce(function(){j.apply(Ee,pe)})}},me=function(j){var de,Ee=0,pe=o.throttleDelay,we=o.ricTimeout,_e=function(){de=!1,Ee=i.now(),j()},He=y&&we>49?function(){y(_e,{timeout:we}),we!==o.ricTimeout&&(we=o.ricTimeout)}:te(function(){p(_e)},!0);return function(De){var Le;(De=De===!0)&&(we=33),!de&&(de=!0,Le=pe-(i.now()-Ee),Le<0&&(Le=0),De||Le<9?He():p(He,Le))}},Qe=function(j){var de,Ee,pe=99,we=function(){de=null,j()},_e=function(){var He=i.now()-Ee;He<pe?p(_e,pe-He):(y||we)(we)};return function(){Ee=i.now(),de||(de=p(_e,pe))}},rt=function(){var j,de,Ee,pe,we,_e,He,De,Le,$,re,ie,xe=/^img$/i,Xe=/^iframe$/i,ft="onscroll"in n&&!/(gle|ing)bot/.test(navigator.userAgent),E=0,T=0,D=0,z=-1,H=function(oe){D--,(!oe||D<0||!oe.target)&&(D=0)},ne=function(oe){return ie==null&&(ie=ee(r.body,"visibility")=="hidden"),ie||!(ee(oe.parentNode,"visibility")=="hidden"&&ee(oe,"visibility")=="hidden")},ae=function(oe,Fe){var P,se=oe,ue=ne(oe);for(De-=Fe,re+=Fe,Le-=Fe,$+=Fe;ue&&(se=se.offsetParent)&&se!=r.body&&se!=l;)ue=(ee(se,"opacity")||1)>0,ue&&ee(se,"overflow")!="visible"&&(P=se.getBoundingClientRect(),ue=$>P.left&&Le<P.right&&re>P.top-1&&De<P.bottom+1);return ue},Z=function(){var oe,Fe,P,se,ue,Me,Ke,kt,Vt,cn,lr,On,gn=s.elements;if((pe=o.loadMode)&&D<8&&(oe=gn.length)){for(Fe=0,z++;Fe<oe;Fe++)if(!(!gn[Fe]||gn[Fe]._lazyRace)){if(!ft||s.prematureUnveil&&s.prematureUnveil(gn[Fe])){Ge(gn[Fe]);continue}if((!(kt=gn[Fe][d]("data-expand"))||!(Me=kt*1))&&(Me=T),cn||(cn=!o.expand||o.expand<1?l.clientHeight>500&&l.clientWidth>500?500:370:o.expand,s._defEx=cn,lr=cn*o.expFactor,On=o.hFac,ie=null,T<lr&&D<1&&z>2&&pe>2&&!r.hidden?(T=lr,z=0):pe>1&&z>1&&D<6?T=cn:T=E),Vt!==Me&&(_e=innerWidth+Me*On,He=innerHeight+Me,Ke=Me*-1,Vt=Me),P=gn[Fe].getBoundingClientRect(),(re=P.bottom)>=Ke&&(De=P.top)<=He&&($=P.right)>=Ke*On&&(Le=P.left)<=_e&&(re||$||Le||De)&&(o.loadHidden||ne(gn[Fe]))&&(de&&D<3&&!kt&&(pe<3||z<4)||ae(gn[Fe],Me))){if(Ge(gn[Fe]),ue=!0,D>9)break}else!ue&&de&&!se&&D<4&&z<4&&pe>2&&(j[0]||o.preloadAfterLoad)&&(j[0]||!kt&&(re||$||Le||De||gn[Fe][d](o.sizesAttr)!="auto"))&&(se=j[0]||gn[Fe])}se&&!ue&&Ge(se)}},G=me(Z),X=function(oe){var Fe=oe.target;if(Fe._lazyCache){delete Fe._lazyCache;return}H(oe),A(Fe,o.loadedClass),F(Fe,o.loadingClass),R(Fe,Te),U(Fe,"lazyloaded")},ce=te(X),Te=function(oe){ce({target:oe.target})},Se=function(oe,Fe){var P=oe.getAttribute("data-load-mode")||o.iframeLoadMode;P==0?oe.contentWindow.location.replace(Fe):P==1&&(oe.src=Fe)},Pe=function(oe){var Fe,P=oe[d](o.srcsetAttr);(Fe=o.customMedia[oe[d]("data-media")||oe[d]("media")])&&oe.setAttribute("media",Fe),P&&oe.setAttribute("srcset",P)},je=te(function(oe,Fe,P,se,ue){var Me,Ke,kt,Vt,cn,lr;(cn=U(oe,"lazybeforeunveil",Fe)).defaultPrevented||(se&&(P?A(oe,o.autosizesClass):oe.setAttribute("sizes",se)),Ke=oe[d](o.srcsetAttr),Me=oe[d](o.srcAttr),ue&&(kt=oe.parentNode,Vt=kt&&b.test(kt.nodeName||"")),lr=Fe.firesLoad||"src"in oe&&(Ke||Me||Vt),cn={target:oe},A(oe,o.loadingClass),lr&&(clearTimeout(Ee),Ee=p(H,2500),R(oe,Te,!0)),Vt&&M.call(kt.getElementsByTagName("source"),Pe),Ke?oe.setAttribute("srcset",Ke):Me&&!Vt&&(Xe.test(oe.nodeName)?Se(oe,Me):oe.src=Me),ue&&(Ke||Vt)&&W(oe,{src:Me})),oe._lazyRace&&delete oe._lazyRace,F(oe,o.lazyClass),Ce(function(){var On=oe.complete&&oe.naturalWidth>1;(!lr||On)&&(On&&A(oe,o.fastLoadedClass),X(cn),oe._lazyCache=!0,p(function(){"_lazyCache"in oe&&delete oe._lazyCache},9)),oe.loading=="lazy"&&D--},!0)}),Ge=function(oe){if(!oe._lazyRace){var Fe,P=xe.test(oe.nodeName),se=P&&(oe[d](o.sizesAttr)||oe[d]("sizes")),ue=se=="auto";(ue||!de)&&P&&(oe[d]("src")||oe.srcset)&&!oe.complete&&!L(oe,o.errorClass)&&L(oe,o.lazyClass)||(Fe=U(oe,"lazyunveilread").detail,ue&&Re.updateElem(oe,!0,oe.offsetWidth),oe._lazyRace=!0,D++,je(oe,Fe,ue,se,P))}},gt=Qe(function(){o.loadMode=3,G()}),St=function(){o.loadMode==3&&(o.loadMode=2),gt()},qt=function(){if(!de){if(i.now()-we<999){p(qt,999);return}de=!0,o.loadMode=3,G(),h("scroll",St,!0)}};return{_:function(){we=i.now(),s.elements=r.getElementsByClassName(o.lazyClass),j=r.getElementsByClassName(o.lazyClass+" "+o.preloadClass),h("scroll",G,!0),h("resize",G,!0),h("pageshow",function(oe){if(oe.persisted){var Fe=r.querySelectorAll("."+o.loadingClass);Fe.length&&Fe.forEach&&m(function(){Fe.forEach(function(P){P.complete&&Ge(P)})})}}),n.MutationObserver?new MutationObserver(G).observe(l,{childList:!0,subtree:!0,attributes:!0}):(l[u]("DOMNodeInserted",G,!0),l[u]("DOMAttrModified",G,!0),setInterval(G,999)),h("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(oe){r[u](oe,G,!0)}),/d$|^c/.test(r.readyState)?qt():(h("load",qt),r[u]("DOMContentLoaded",G),p(qt,2e4)),s.elements.length?(Z(),Ce._lsFlush()):G()},checkElems:G,unveil:Ge,_aLSL:St}}(),Re=function(){var j,de=te(function(_e,He,De,Le){var $,re,ie;if(_e._lazysizesWidth=Le,Le+="px",_e.setAttribute("sizes",Le),b.test(He.nodeName||""))for($=He.getElementsByTagName("source"),re=0,ie=$.length;re<ie;re++)$[re].setAttribute("sizes",Le);De.detail.dataAttr||W(_e,De.detail)}),Ee=function(_e,He,De){var Le,$=_e.parentNode;$&&(De=ve(_e,$,De),Le=U(_e,"lazybeforesizes",{width:De,dataAttr:!!He}),Le.defaultPrevented||(De=Le.detail.width,De&&De!==_e._lazysizesWidth&&de(_e,$,Le,De)))},pe=function(){var _e,He=j.length;if(He)for(_e=0;_e<He;_e++)Ee(j[_e])},we=Qe(pe);return{_:function(){j=r.getElementsByClassName(o.autosizesClass),h("resize",we)},checkElems:we,updateElem:Ee}}(),be=function(){!be.i&&r.getElementsByClassName&&(be.i=!0,Re._(),rt._())};return p(function(){o.init&&be()}),s={cfg:o,autoSizer:Re,loader:rt,init:be,uP:W,aC:A,rC:F,hC:L,fire:U,gW:ve,rAF:Ce},s})}(xm)),xm.exports}J_();var Hq={exports:{}};(function(t){(function(e,n){if(e){var r=function(){n(e.lazySizes),e.removeEventListener("lazyunveilread",r,!0)};n=n.bind(null,e,e.document),t.exports?n(J_()):e.lazySizes?r():e.addEventListener("lazyunveilread",r,!0)}})(typeof window<"u"?window:0,function(e,n,r){if(e.addEventListener){var i=/\s+(\d+)(w|h)\s+(\d+)(w|h)/,s=/parent-fit["']*\s*:\s*["']*(contain|cover|width)/,o=/parent-container["']*\s*:\s*["']*(.+?)(?=(\s|$|,|'|"|;))/,l=/^picture$/i,c=r.cfg,u=function(h){return getComputedStyle(h,null)||{}},d={getParent:function(h,p){var m=h,y=h.parentNode;return(!p||p=="prev")&&y&&l.test(y.nodeName||"")&&(y=y.parentNode),p!="self"&&(p=="prev"?m=h.previousElementSibling:p&&(y.closest||e.jQuery)?m=(y.closest?y.closest(p):jQuery(y).closest(p)[0])||y:m=y),m},getFit:function(h){var p,m,y=u(h),b=y.content||y.fontFamily,x={fit:h._lazysizesParentFit||h.getAttribute("data-parent-fit")};return!x.fit&&b&&(p=b.match(s))&&(x.fit=p[1]),x.fit?(m=h._lazysizesParentContainer||h.getAttribute("data-parent-container"),!m&&b&&(p=b.match(o))&&(m=p[1]),x.parent=d.getParent(h,m)):x.fit=y.objectFit,x},getImageRatio:function(h){var p,m,y,b,x,C,M,L=h.parentNode,A=L&&l.test(L.nodeName||"")?L.querySelectorAll("source, img"):[h];for(p=0;p<A.length;p++)if(h=A[p],m=h.getAttribute(c.srcsetAttr)||h.getAttribute("srcset")||h.getAttribute("data-pfsrcset")||h.getAttribute("data-risrcset")||"",y=h._lsMedia||h.getAttribute("media"),y=c.customMedia[h.getAttribute("data-media")||y]||y,m&&(!y||(e.matchMedia&&matchMedia(y)||{}).matches)){b=parseFloat(h.getAttribute("data-aspectratio")),b||(x=m.match(i),x?x[2]=="w"?(C=x[1],M=x[3]):(C=x[3],M=x[1]):(C=h.getAttribute("width"),M=h.getAttribute("height")),b=C/M);break}return b},calculateSize:function(h,p){var m,y,b,x,C=this.getFit(h),M=C.fit,L=C.parent;return M!="width"&&(M!="contain"&&M!="cover"||!(b=this.getImageRatio(h)))?p:(L?p=L.clientWidth:L=h,x=p,M=="width"?x=p:(y=L.clientHeight,(m=p/y)&&(M=="cover"&&m<b||M=="contain"&&m>b)&&(x=p*(b/m))),x)}};r.parentFit=d,n.addEventListener("lazybeforesizes",function(h){if(!(h.defaultPrevented||h.detail.instance!=r)){var p=h.target;h.detail.width=d.calculateSize(p,h.detail.width)}})}})})(Hq);const Fq=q3(tB),Vq=Z3();Fq.use(Vq).use($q).mount("#app");
